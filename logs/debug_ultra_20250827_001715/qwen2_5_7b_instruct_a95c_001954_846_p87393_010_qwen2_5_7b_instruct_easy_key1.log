===== 分片 qwen2.5-7b-instruct_easy_key1 =====
时间: 2025-08-27T00:19:54.848029
模型: qwen2.5-7b-instruct
实例: qwen-key1
命令: python -u smart_batch_runner.py --model qwen2.5-7b-instruct --deployment qwen-key1 --prompt-types optimal --difficulty easy --task-types all --num-instances 1 --max-workers 50 --tool-success-rate 0.8 --batch-commit --checkpoint-interval 20 --ai-classification --no-adaptive --qps 50
环境变量:
  STORAGE_FORMAT=json
  PYTHONFAULTHANDLER=1
  PYTHONUNBUFFERED=1
==================================================

[00:19:59.285] 2025-08-27 00:19:59,284 - faiss.loader - INFO - Loading faiss.
[00:19:59.337] 2025-08-27 00:19:59,337 - faiss.loader - INFO - Successfully loaded faiss.
[00:20:00.059] [INFO] 使用JSON存储格式
[00:20:00.059] [INFO] 使用JSON存储格式
[00:20:00.592] [INFO] 使用JSON存储格式
[00:20:00.594] [INFO] 使用JSON存储格式
[00:20:00.595] 
[00:20:00.595] ============================================================
[00:20:00.595] 智能批测试: qwen2.5-7b-instruct (idealab)
[00:20:00.595] Prompt types: ['optimal']
[00:20:00.595] 难度: easy
[00:20:00.595] 目标: 每种配置 1 个实例
[00:20:00.595] ============================================================
[00:20:00.596] ○ simple_task         :   0/  1 已完成 (需要补充 1 个)
[00:20:00.596] ○ basic_task          :   0/  1 已完成 (需要补充 1 个)
[00:20:00.596] ○ data_pipeline       :   0/  1 已完成 (需要补充 1 个)
[00:20:00.596] ○ api_integration     :   0/  1 已完成 (需要补充 1 个)
[00:20:00.596] ○ multi_stage_pipeline:   0/  1 已完成 (需要补充 1 个)
[00:20:00.596] 
[00:20:00.596] ⏳ 需要运行 5 个新测试
[00:20:00.596] 
[00:20:00.596] ▶ 准备 simple_task (1 个实例)...
[00:20:00.596] 
[00:20:00.596] ▶ 准备 basic_task (1 个实例)...
[00:20:00.596] 
[00:20:00.596] ▶ 准备 data_pipeline (1 个实例)...
[00:20:00.596] 
[00:20:00.596] ▶ 准备 api_integration (1 个实例)...
[00:20:00.596] 
[00:20:00.596] ▶ 准备 multi_stage_pipeline (1 个实例)...
[00:20:00.596] 
[00:20:00.596] ▶ 开始执行 5 个测试...
[00:20:00.596] 📊 自适应checkpoint_interval: 20
[00:20:00.596] 📦 批量提交模式：每20个测试保存一次
[00:20:00.596] ⚠️  检测到idealab API，调整并发: workers=2, qps=None
[00:20:00.596] 2025-08-27 00:20:00,596 - smart_result_collector - INFO - 自动保存线程已启动
[00:20:00.596] 2025-08-27 00:20:00,596 - smart_result_collector - INFO - SmartResultCollector初始化完成
[00:20:00.597] 2025-08-27 00:20:00,596 - smart_result_collector - INFO -   - 临时目录: temp_results
[00:20:00.597] 2025-08-27 00:20:00,596 - smart_result_collector - INFO -   - 内存阈值: 20
[00:20:00.597] 2025-08-27 00:20:00,596 - smart_result_collector - INFO -   - 时间阈值: 300秒
[00:20:00.597] 2025-08-27 00:20:00,596 - smart_result_collector - INFO -   - 自动保存: 60秒
[00:20:00.597] 2025-08-27 00:20:00,596 - smart_result_collector - INFO -   - 自适应阈值: True
[00:20:00.597] 2025-08-27 00:20:00,596 - result_collector_adapter - INFO - ✅ 使用SmartResultCollector
[00:20:00.597] 2025-08-27 00:20:00,596 - result_collector_adapter - INFO - AdaptiveResultCollector初始化完成，使用: smart
[00:20:00.597] 🧠 启用SmartResultCollector模式，智能数据管理
[00:20:00.599] 2025-08-27 00:20:00,599 - smart_model_router - INFO - ✨ Using USER's Azure endpoint for gpt-5-nano
[00:20:00.637] 2025-08-27 00:20:00,637 - txt_based_ai_classifier - INFO - TXT-based AI classifier initialized with gpt-5-nano (parameter-filtered)
[00:20:00.637] [AI_DEBUG] AI分类器初始化成功: <txt_based_ai_classifier.TxtBasedAIClassifier object at 0x7fcab9176590>
[00:20:00.637] 2025-08-27 00:20:00,637 - batch_test_runner - INFO - 基于TXT文件的AI错误分类系统已启用 (使用gpt-5-nano)
[00:20:00.637] [DEBUG] BatchTestRunner initialized with save_logs=True, enable_database_updates=False, use_ai_classification=True, checkpoint_interval=20
[00:20:00.638] 2025-08-27 00:20:00,638 - batch_test_runner - INFO - ============================================================
[00:20:00.638] 2025-08-27 00:20:00,638 - batch_test_runner - INFO - Batch test runner initialized
[00:20:00.638] 2025-08-27 00:20:00,638 - batch_test_runner - INFO - Configuration: debug=False, silent=False, adaptive=False
[00:20:00.638] 2025-08-27 00:20:00,638 - batch_test_runner - INFO - Log file: logs/batch_test_20250827_002000.log
[00:20:00.639] 2025-08-27 00:20:00,638 - batch_test_runner - INFO - ============================================================
[00:20:00.639] 2025-08-27 00:20:00,638 - batch_test_runner - INFO - Running 5 tests with 2 workers, QPS limit: None
[00:20:00.639] 2025-08-27 00:20:00,638 - batch_test_runner - INFO - Initializing test components...
[00:20:01.479] 2025-08-27 00:20:01,478 - batch_test_runner - INFO - Found pre-generated workflows, will use them to save memory
[00:20:01.479] 2025-08-27 00:20:01,479 - batch_test_runner - INFO - ⚡ [OPTIMIZATION] Using MDPWorkflowGenerator with SKIP_MODEL_LOADING=true
[00:20:01.480] 2025-08-27 00:20:01,479 - batch_test_runner - INFO - ⚡ This saves ~350MB memory while keeping all functionality intact
[00:20:01.480] [DEBUG] Creating new ToolCapabilityManager instance
[00:20:01.480] [OperationEmbeddingIndex] Initializing with unified API client manager
[00:20:01.480] ['config/config.json', 'config/api_keys.json', 'config/api-keys.json']
[00:20:01.480] 2025-08-27 00:20:01,479 - api_client_manager - INFO - Loaded configuration from config/config.json
[00:20:01.487] [OperationEmbeddingIndex] OpenAI client initialized with model: gpt-4o-mini
[00:20:01.488] [OperationEmbeddingIndex] Using embedding model: text-embedding-3-large
[00:20:01.488] [OperationEmbeddingIndex] Detecting actual embedding dimension...
[00:20:02.185] 2025-08-27 00:20:02,185 - httpx - INFO - HTTP Request: POST https://archer222arc.openai.azure.com/openai/deployments/text-embedding-3-large/embeddings?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
[00:20:02.227] [OperationEmbeddingIndex] Detected embedding dimension: 3072
[00:20:02.349] [INFO] Loaded 4150 embeddings from persistent cache
[00:20:02.349] [OperationEmbeddingIndex] Initialized with 4150 cached embeddings
[00:20:02.350] [INFO] Loaded 15 LLM-enhanced operation definitions from cache
[00:20:02.351] [INFO] Found cached operation index at .mcp_operation_cache/operation_index.pkl
[00:20:02.351] [INFO] Loading operation index from .mcp_operation_cache/operation_index.pkl
[00:20:02.379] [INFO] Successfully loaded FAISS index with dimension 3072
[00:20:02.379] [INFO] Operation index loaded successfully from .mcp_operation_cache/operation_index.pkl
[00:20:02.380] [INFO] Loaded 15 operations with dimension 3072
[00:20:02.382] [INFO] Successfully loaded cached index
[00:20:02.387] [INFO] Operation semantic index initialized
[00:20:02.387] [INFO] Using device: cpu
[00:20:02.387] [INFO] Initialized tool success tracking attributes
[00:20:02.387] [INFO] Initializing embedding manager for enhanced tool selection
[00:20:02.387] [MCPEmbeddingManager] Creating new singleton instance
[00:20:02.387] [MCPEmbeddingManager] Initializing with unified API client manager
[00:20:02.405] [MCPEmbeddingManager] Using embedding model: text-embedding-3-large
[00:20:02.405] [MCPEmbeddingManager] Client initialized successfully
[00:20:02.405] 2025-08-27 00:20:02,405 - mcp_embedding_manager - INFO - Loading embedding cache from .mcp_embedding_cache/embedding_cache.pkl (size: 173790244 bytes)
[00:20:02.560] 2025-08-27 00:20:02,559 - mcp_embedding_manager - INFO - Loaded 7050 cached embeddings
[00:20:04.301] 2025-08-27 00:20:04,301 - mcp_embedding_manager - INFO - Loaded search cache with 3 entries
[00:20:04.302] 2025-08-27 00:20:04,301 - mcp_embedding_manager - INFO - Initialized operation mappings with 149 terms
[00:20:04.342] 2025-08-27 00:20:04,341 - mcp_embedding_manager - INFO - Loading embedding cache from .mcp_embedding_cache/embedding_cache.pkl (size: 173790244 bytes)
[00:20:04.505] 2025-08-27 00:20:04,505 - mcp_embedding_manager - INFO - Loaded 7050 cached embeddings
[00:20:06.082] 2025-08-27 00:20:06,081 - mcp_embedding_manager - INFO - [Cache] Loaded 9650 entries from file
[00:20:06.082] [MCPEmbeddingManager] Singleton created with 0 cached embeddings
[00:20:06.083] [INFO] Loading embedding index from .mcp_embedding_cache/tool_index.pkl
[00:20:06.083] 2025-08-27 00:20:06,083 - mcp_embedding_manager - INFO - Loading index from .mcp_embedding_cache/tool_index.pkl (size: 3723608 bytes)
[00:20:06.131] 2025-08-27 00:20:06,130 - mcp_embedding_manager - INFO - FAISS index loaded
[00:20:06.131] 2025-08-27 00:20:06,130 - mcp_embedding_manager - INFO - Updated dimension to 3072
[00:20:06.131] 2025-08-27 00:20:06,131 - mcp_embedding_manager - INFO - Index loaded successfully: 30 tools
[00:20:06.134] [SUCCESS] Loaded 30 tool embeddings
[00:20:06.137] 2025-08-27 00:20:06,134 - mdp_workflow_generator - INFO - Embedding index loaded successfully
[00:20:06.137] [SUCCESS] Embedding manager initialized with 30 tools
[00:20:06.137] [INFO] Initialized task types: ['simple_task', 'data_pipeline', 'api_integration', 'basic_task', 'multi_stage_pipeline']
[00:20:06.137] [INFO] Loading full MCP protocol registry...
[00:20:06.137] 2025-08-27 00:20:06,136 - mdp_workflow_generator - INFO - Loaded full tool registry from mcp_generated_library/tool_registry_consolidated.json
[00:20:06.137] [INFO] Loaded full tool registry with 30 tools
[00:20:06.137] 2025-08-27 00:20:06,136 - mdp_workflow_generator - INFO - Loading tools from mcp_generated_library/tool_registry_consolidated.json
[00:20:06.137] [INFO] Loading tools from mcp_generated_library/tool_registry_consolidated.json
[00:20:06.137] [INFO] Embedding manager ready with 30 tools
[00:20:06.137] [WARNING] Embedding manager exists but has no embeddings
[00:20:06.137] [INFO] Consider rebuilding index with: embedding_manager.build_index(tools_path)
[00:20:06.159] [INFO] Tool file_operations_reader: semantic operations = ['read', 'write', 'parse', 'transform']
[00:20:06.159] [INFO] Tool file_operations_scanner: semantic operations = ['read', 'write', 'parse', 'transform']
[00:20:06.159] [INFO] Tool network_fetcher: semantic operations = ['read', 'write', 'validate', 'integrate']
[00:20:06.160] [INFO] Tool integration_authenticator: semantic operations = ['integrate', 'transform', 'validate']
[00:20:06.160] [INFO] Tool utility_logger: semantic operations = ['cache', 'process']
[00:20:06.160] [INFO] Tool data_processing_parser: semantic operations = ['validate', 'transform', 'filter', 'aggregate']
[00:20:06.160] [INFO] Tool data_processing_transformer: semantic operations = ['validate', 'transform', 'filter', 'aggregate']
[00:20:06.160] [INFO] Tool data_processing_validator: semantic operations = ['validate', 'transform', 'filter', 'aggregate']
[00:20:06.160] [INFO] Tool network_validator: semantic operations = ['read', 'write', 'validate', 'integrate']
[00:20:06.160] [INFO] Tool computation_calculator: semantic operations = ['compute', 'aggregate', 'transform']
[00:20:06.160] [INFO] Tool data_processing_filter: semantic operations = ['validate', 'transform', 'filter', 'aggregate']
[00:20:06.161] [INFO] Tool data_processing_aggregator: semantic operations = ['validate', 'transform', 'filter', 'aggregate']
[00:20:06.161] [INFO] Tool file_operations_converter: semantic operations = ['read', 'write', 'parse', 'transform']
[00:20:06.162] [INFO] Tool file_operations_compressor: semantic operations = ['read', 'write', 'parse', 'transform']
[00:20:06.162] [INFO] Tool file_operations_writer: semantic operations = ['read', 'write', 'parse', 'transform']
[00:20:06.162] [INFO] Tool network_poster: semantic operations = ['read', 'write', 'validate', 'integrate']
[00:20:06.162] [INFO] Tool network_monitor: semantic operations = ['read', 'write', 'validate', 'integrate']
[00:20:06.162] [INFO] Tool network_router: semantic operations = ['read', 'write', 'validate', 'integrate']
[00:20:06.162] [INFO] Tool computation_predictor: semantic operations = ['compute', 'aggregate', 'transform']
[00:20:06.163] [INFO] Tool computation_analyzer: semantic operations = ['compute', 'aggregate', 'transform']
[00:20:06.163] [INFO] Tool computation_simulator: semantic operations = ['compute', 'aggregate', 'transform']
[00:20:06.163] [INFO] Tool computation_optimizer: semantic operations = ['compute', 'aggregate', 'transform']
[00:20:06.163] [INFO] Tool integration_mapper: semantic operations = ['integrate', 'transform', 'validate']
[00:20:06.163] [INFO] Tool integration_queue: semantic operations = ['integrate', 'transform', 'validate']
[00:20:06.163] [INFO] Tool integration_scheduler: semantic operations = ['integrate', 'transform', 'validate']
[00:20:06.163] [INFO] Tool integration_connector: semantic operations = ['integrate', 'transform', 'validate']
[00:20:06.163] [INFO] Tool utility_cache: semantic operations = ['cache', 'process']
[00:20:06.163] [INFO] Tool utility_tracker: semantic operations = ['cache', 'process']
[00:20:06.163] [INFO] Tool utility_helper: semantic operations = ['cache', 'process']
[00:20:06.163] [INFO] Tool utility_notifier: semantic operations = ['cache', 'process']
[00:20:06.164] 2025-08-27 00:20:06,163 - mdp_workflow_generator - INFO - Loaded 30 tools
[00:20:06.165] [INFO] Setting default state_dim based on loaded tools
[00:20:06.165] [INFO] state_dim set to 345 (tools=30, base=340, task_types=5)
[00:20:06.165] 2025-08-27 00:20:06,165 - mdp_workflow_generator - INFO - Default state_dim calculated: 345
[00:20:06.165] [INFO] Setting default action_dim based on loaded tools
[00:20:06.165] [INFO] action_dim set to 31 (tools=30 + NO_OP)
[00:20:06.165] 2025-08-27 00:20:06,165 - mdp_workflow_generator - INFO - Default action_dim calculated: 31
[00:20:06.165] [INFO] ⚡ SKIP_MODEL_LOADING=true - Skipping neural network model loading
[00:20:06.165] [INFO] ⚡ Memory optimization: Saving ~350MB by not loading model
[00:20:06.165] [INFO] ⚡ Will use pre-generated workflows or random policy
[00:20:06.165] 2025-08-27 00:20:06,165 - mdp_workflow_generator - INFO - Model loading skipped for memory optimization (SKIP_MODEL_LOADING=true)
[00:20:06.165] [INFO] Initializing TaskManager...
[00:20:07.980] 2025-08-27 00:20:07,979 - unified_training_manager - INFO - Using device: cpu
[00:20:08.153] 2025-08-27 00:20:08,153 - unified_training_manager - INFO - Task filtering results:
[00:20:08.154] 2025-08-27 00:20:08,153 - unified_training_manager - INFO -   Total: 5040 -> 5040
[00:20:08.154] 2025-08-27 00:20:08,153 - unified_training_manager - INFO -   simple_task: 320 -> 320
[00:20:08.154] 2025-08-27 00:20:08,153 - unified_training_manager - INFO -   data_pipeline: 1520 -> 1520
[00:20:08.154] 2025-08-27 00:20:08,153 - unified_training_manager - INFO -   api_integration: 1360 -> 1360
[00:20:08.154] 2025-08-27 00:20:08,153 - unified_training_manager - INFO -   basic_task: 1200 -> 1200
[00:20:08.154] 2025-08-27 00:20:08,153 - unified_training_manager - INFO -   multi_stage_pipeline: 640 -> 640
[00:20:08.154] 2025-08-27 00:20:08,153 - unified_training_manager - INFO - Loaded 5040 tasks from mcp_generated_library/task_library_all_difficulties.json
[00:20:08.157] 2025-08-27 00:20:08,156 - unified_training_manager - INFO - Organized tasks: 5 types, 3 complexity levels, 5 difficulty levels
[00:20:08.157] [TaskManager] Difficulty level 'easy': 1096 tasks
[00:20:08.157] [TaskManager] Difficulty level 'very_easy': 856 tasks
[00:20:08.157] [TaskManager] Difficulty level 'medium': 1136 tasks
[00:20:08.157] [TaskManager] Difficulty level 'hard': 1096 tasks
[00:20:08.157] [TaskManager] Difficulty level 'very_hard': 856 tasks
[00:20:08.160] [INFO] TaskManager initialized with 5040 tasks
[00:20:08.160] [INFO] Task types available: ['basic_task', 'data_pipeline', 'multi_stage_pipeline', 'simple_task', 'api_integration']
[00:20:08.160] [INFO] Initializing ToolCallVerifier...
[00:20:08.162] [INFO] ToolCallVerifier initialized with 30 tools
[00:20:08.162] [INFO] Output tools identified: 1
[00:20:08.162] [INFO] Component initialization status:
[00:20:08.162]   - embedding_manager: initialized
[00:20:08.162]   - task_manager: initialized
[00:20:08.162]   - output_verifier: initialized
[00:20:08.162]   - tool_capability_manager: initialized
[00:20:08.162]   - tool_success_rates: initialized with 0 entries
[00:20:08.162] [INFO] MDPWorkflowGenerator initialization complete
[00:20:08.162] 2025-08-27 00:20:08,162 - mdp_workflow_generator - INFO - MDPWorkflowGenerator initialized successfully
[00:20:08.162] 2025-08-27 00:20:08,162 - batch_test_runner - INFO - ✅ MDPWorkflowGenerator initialized successfully:
[00:20:08.163] 2025-08-27 00:20:08,162 - batch_test_runner - INFO -   - task_manager: ✓
[00:20:08.163] 2025-08-27 00:20:08,163 - batch_test_runner - INFO -   - output_verifier: ✓
[00:20:08.163] 2025-08-27 00:20:08,163 - batch_test_runner - INFO -   - embedding_manager: ✓
[00:20:08.163] 2025-08-27 00:20:08,163 - batch_test_runner - INFO -   - tool_capabilities: 30 tools
[00:20:08.163] 2025-08-27 00:20:08,163 - batch_test_runner - INFO -   - neural network: skipped (saving 350MB)
[00:20:08.163] [MCPEmbeddingManager] Reusing existing singleton instance (id: 140508933821712)
[00:20:08.163] [MCPEmbeddingManager] Current cache size: 30 embeddings
[00:20:08.163] [FlawedWorkflowGenerator] Initialized with 30 tools
[00:20:08.163] [FlawedWorkflowGenerator] RAG support: disabled
[00:20:08.174] 2025-08-27 00:20:08,174 - focused_ai_classifier - INFO - Focused AI classifier initialized with gpt-5-nano (parameter-filtered)
[00:20:08.174] [INFO] Enhanced manager: AI错误分类系统已启用
[00:20:08.176] [INFO] 检测到并发环境，使用安全存储模式（ResultCollector）
[00:20:08.178] 2025-08-27 00:20:08,178 - result_collector - INFO - ResultCollector初始化，临时目录: temp_results
[00:20:08.178] 2025-08-27 00:20:08,178 - result_merger - INFO - ResultMerger初始化完成
[00:20:08.178] 2025-08-27 00:20:08,178 - result_merger - WARNING - 另一个合并器已在运行 (PID: -1)
[00:20:08.178] [INFO] 后台合并进程已启动（每10秒合并一次）
[00:20:08.179] DEBUG: Checking generator attributes
[00:20:08.179]   - has tool_capabilities: True
[00:20:08.179]   - has tool_capability_manager: True
[00:20:08.179]   - has task_manager: True
[00:20:08.179] [INFO] Loaded 30 tools from generator
[00:20:08.179] [INFO] Tool names sample: ['computation_analyzer', 'computation_calculator', 'computation_optimizer', 'computation_predictor', 'computation_simulator']...
[00:20:08.179] [MCPEmbeddingManager] Reusing existing singleton instance (id: 140508933821712)
[00:20:08.179] [MCPEmbeddingManager] Current cache size: 30 embeddings
[00:20:08.179] [INFO] Initializing LLM client using APIClientManager
[00:20:08.187] [INFO] Using Azure OpenAI client
[00:20:08.187] [DEBUG] Checking if generator has tool_capability_manager attribute
[00:20:08.187] [DEBUG] Creating FlawedWorkflowGenerator with correct parameters
[00:20:08.187] [MCPEmbeddingManager] Reusing existing singleton instance (id: 140508933821712)
[00:20:08.187] [MCPEmbeddingManager] Current cache size: 30 embeddings
[00:20:08.187] [FlawedWorkflowGenerator] Initialized with 30 tools
[00:20:08.187] [FlawedWorkflowGenerator] RAG support: enabled
[00:20:08.187] [INFO] FlawedWorkflowGenerator initialized successfully
[00:20:08.187] [INFO] Initializing StableScorer for Phase 2 scoring
[00:20:08.187] <tool_capability_manager.ToolCapabilityManager object at 0x7fcab9175510>
[00:20:08.187] [MCPEmbeddingManager] Reusing existing singleton instance (id: 140508933821712)
[00:20:08.187] [MCPEmbeddingManager] Current cache size: 30 embeddings
[00:20:08.187] [INFO] Loaded tool success history for 0 tools
[00:20:08.187] [INFO] StableScorer initialized with semantic capability
[00:20:08.187] [INFO] StableScorer initialized successfully
[00:20:08.187] [INFO] Loading task instances...
[00:20:08.187] [INFO] Loading task instances from mcp_generated_library/difficulty_versions/task_library_enhanced_v3_easy.json
[00:20:08.204] [INFO] Loaded 630 task instances
[00:20:08.204] [INFO] Task instances loaded: ['basic_task', 'data_pipeline', 'multi_stage_pipeline', 'simple_task', 'api_integration']
[00:20:08.204] 2025-08-27 00:20:08,204 - batch_test_runner - INFO - Loading task library with pre-generated workflows: task_library_enhanced_v3_easy_with_workflows.json
[00:20:08.204] 2025-08-27 00:20:08,204 - batch_test_runner - INFO - Using partial loading: 20 tasks per type
[00:20:09.919] 2025-08-27 00:20:09,918 - batch_test_runner - INFO - Partially loaded 100 tasks (vs 630 total)
[00:20:09.920] 2025-08-27 00:20:09,919 - batch_test_runner - INFO - Estimated memory saving: 84.1%
[00:20:09.946] 2025-08-27 00:20:09,946 - batch_test_runner - INFO - Initialization complete
[00:20:10.039] 2025-08-27 00:20:10,039 - batch_test_runner - INFO - Starting batch test with 5 tasks, 2 workers
[00:20:10.039] 2025-08-27 00:20:10,039 - batch_test_runner - INFO - Each task timeout: 10 minutes, Total batch timeout: 20 minutes
[00:20:10.041] [InteractiveExecutor] No LLM client provided, initializing from api_client_manager
[00:20:10.041] [InteractiveExecutor] No LLM client provided, initializing from api_client_manager
[00:20:10.042] 2025-08-27 00:20:10,042 - smart_model_router - INFO - Using idealab for qwen2.5-7b-instruct
[00:20:10.045] 2025-08-27 00:20:10,042 - smart_model_router - INFO - Using idealab for qwen2.5-7b-instruct
[00:20:10.058] 2025-08-27 00:20:10,058 - api_client_manager - INFO - Created idealab client for model qwen2.5-7b-instruct
[00:20:10.058] [InteractiveExecutor] Initialized client with model: qwen2.5-7b-instruct
[00:20:10.058] [InteractiveExecutor] Using prompt type: optimal for API key selection
[00:20:10.058] [InteractiveExecutor] API model name: qwen2.5-7b-instruct
[00:20:10.058] [MCPEmbeddingManager] Reusing existing singleton instance (id: 140508933821712)
[00:20:10.058] [MCPEmbeddingManager] Current cache size: 30 embeddings
[00:20:10.058] 2025-08-27 00:20:10,058 - api_client_manager - INFO - Created idealab client for model qwen2.5-7b-instruct
[00:20:10.058] [InteractiveExecutor] Initialized client with model: qwen2.5-7b-instruct
[00:20:10.058] [InteractiveExecutor] Using prompt type: optimal for API key selection
[00:20:10.058] 2025-08-27 00:20:10,058 - mcp_embedding_manager - INFO - Loading index from .mcp_embedding_cache/tool_index.pkl (size: 3723608 bytes)
[00:20:10.059] [InteractiveExecutor] API model name: qwen2.5-7b-instruct
[00:20:10.059] [MCPEmbeddingManager] Reusing existing singleton instance (id: 140508933821712)
[00:20:10.059] [MCPEmbeddingManager] Current cache size: 30 embeddings
[00:20:10.059] 2025-08-27 00:20:10,059 - mcp_embedding_manager - INFO - Loading index from .mcp_embedding_cache/tool_index.pkl (size: 3723608 bytes)
[00:20:10.121] 2025-08-27 00:20:10,121 - mcp_embedding_manager - INFO - FAISS index loaded
[00:20:10.121] 2025-08-27 00:20:10,121 - mcp_embedding_manager - INFO - Updated dimension to 3072
[00:20:10.121] 2025-08-27 00:20:10,121 - mcp_embedding_manager - INFO - Index loaded successfully: 30 tools
[00:20:10.123] [INFO] Tool embedding index loaded successfully
[00:20:10.123] 2025-08-27 00:20:10,123 - mcp_embedding_manager - INFO - FAISS index loaded
[00:20:10.123] 2025-08-27 00:20:10,123 - mcp_embedding_manager - INFO - Updated dimension to 3072
[00:20:10.123] 2025-08-27 00:20:10,123 - mcp_embedding_manager - INFO - Index loaded successfully: 30 tools
[00:20:10.126] [INFO] Tool embedding index loaded successfully
[00:20:10.126] [INFO] Loaded full tool registry from mcp_generated_library/tool_registry_consolidated.json
[00:20:10.127] [INFO] Loaded full tool registry from mcp_generated_library/tool_registry_consolidated.json
[00:20:10.127] [INFO] Operation semantic index initialized
[00:20:10.127] [INFO] Operation semantic index initialized
[00:20:10.127] 
[00:20:10.127] [TURN 1/10]
[00:20:10.127] 
[00:20:10.127] [TURN 1/10]
[00:20:10.127] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:10.132] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:12.562] 2025-08-27 00:20:12,562 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:12.583]   [SEARCH] Query: file_operations_reader
[00:20:12.584] 
[00:20:12.585] [TURN 2/10]
[00:20:12.585] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:12.621] 2025-08-27 00:20:12,621 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:12.622]   [SEARCH] Query: data processing validator
[00:20:12.622] 
[00:20:12.623] [TURN 2/10]
[00:20:12.623] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:13.660] 2025-08-27 00:20:13,660 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:13.663]   [EARLY_EXIT] No actions taken, continuing...
[00:20:13.663] 
[00:20:13.663] [TURN 3/10]
[00:20:13.663] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:13.713] 2025-08-27 00:20:13,713 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:13.714]   [EARLY_EXIT] No actions taken, continuing...
[00:20:13.714] 
[00:20:13.714] [TURN 3/10]
[00:20:13.714] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:14.795] 2025-08-27 00:20:14,794 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:14.797]   [EARLY_EXIT] No actions taken, continuing...
[00:20:14.798] 
[00:20:14.798] [TURN 4/10]
[00:20:14.798] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:14.885] 2025-08-27 00:20:14,885 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:14.886]   [EARLY_EXIT] No actions taken, continuing...
[00:20:14.886] 
[00:20:14.886] [TURN 4/10]
[00:20:14.886] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:15.965] 2025-08-27 00:20:15,965 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:15.967]   [EARLY_EXIT] No actions taken, continuing...
[00:20:15.967] 
[00:20:15.967] [TURN 5/10]
[00:20:15.967] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:16.123] 2025-08-27 00:20:16,123 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:16.124]   [EARLY_EXIT] No actions taken, continuing...
[00:20:16.124] 
[00:20:16.124] [TURN 5/10]
[00:20:16.124] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:16.995] 2025-08-27 00:20:16,995 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:16.997]   [EARLY_EXIT] No actions taken, continuing...
[00:20:16.997] 
[00:20:16.997] [TURN 6/10]
[00:20:16.998] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:17.278] 2025-08-27 00:20:17,277 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:17.291]   [EARLY_EXIT] No actions taken, continuing...
[00:20:17.291] 
[00:20:17.292] [TURN 6/10]
[00:20:17.293] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:18.011] 2025-08-27 00:20:18,011 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:18.012]   [FORMAT_ISSUE] Turn 6: No tools executed after multiple turns
[00:20:18.012] 
[00:20:18.012] [TURN 7/10]
[00:20:18.012] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:18.455] 2025-08-27 00:20:18,434 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:18.463]   [FORMAT_ISSUE] Turn 6: No tools executed after multiple turns
[00:20:18.463] 
[00:20:18.463] [TURN 7/10]
[00:20:18.464] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:19.257] 2025-08-27 00:20:19,257 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:19.258]   [FORMAT_ISSUE] Turn 7: No tools executed after multiple turns
[00:20:19.258] 
[00:20:19.258] [TURN 8/10]
[00:20:19.258] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:19.597] 2025-08-27 00:20:19,596 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:19.598]   [FORMAT_ISSUE] Turn 7: No tools executed after multiple turns
[00:20:19.598] 
[00:20:19.598] [TURN 8/10]
[00:20:19.598] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:20.542] 2025-08-27 00:20:20,542 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:20.544]   [FORMAT_ISSUE] Turn 8: No tools executed after multiple turns
[00:20:20.544] 
[00:20:20.544] [TURN 9/10]
[00:20:20.544] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:21.799] 2025-08-27 00:20:21,799 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:21.803]   [NO_ACTION] Quick feedback provided - no valid action format detected
[00:20:21.803] 
[00:20:21.803] [TURN 9/10]
[00:20:21.803] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:21.876] 2025-08-27 00:20:21,876 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:21.877]   [FORMAT_ISSUE] Turn 9: No tools executed after multiple turns
[00:20:21.877] 
[00:20:21.877] [TURN 10/10]
[00:20:21.878] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:23.118] 2025-08-27 00:20:23,117 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:23.119]   [FORMAT_ISSUE] Turn 10: No tools executed after multiple turns
[00:20:23.119] [ASSISTED] Task received 5 format helps, final result: failure
[00:20:23.131] [DEBUG] Got result for task: has_result=True, save_logs=True
[00:20:23.131] [AI_DEBUG] 测试非完全成功(failure)，准备调用AI分类
[00:20:23.131] [AI_DEBUG] 生成的txt_content长度: 23628
[00:20:23.131] [AI_DEBUG] _ai_classify_with_txt_content called:
[00:20:23.131]   - use_ai_classification=True
[00:20:23.131]   - ai_classifier=True
[00:20:23.131]   - txt_content_len=23628
[00:20:23.131]   - task_model=qwen2.5-7b-instruct
[00:20:23.132] [AI_CLASSIFIER] 直接使用AI分析完整交互记录（跳过规则匹配）
[00:20:23.135] [InteractiveExecutor] No LLM client provided, initializing from api_client_manager
[00:20:23.152] 2025-08-27 00:20:23,151 - api_client_manager - INFO - Created idealab client for model qwen2.5-7b-instruct
[00:20:23.152] [InteractiveExecutor] Initialized client with model: qwen2.5-7b-instruct
[00:20:23.152] [InteractiveExecutor] Using prompt type: optimal for API key selection
[00:20:23.152] [InteractiveExecutor] API model name: qwen2.5-7b-instruct
[00:20:23.152] [MCPEmbeddingManager] Reusing existing singleton instance (id: 140508933821712)
[00:20:23.152] [MCPEmbeddingManager] Current cache size: 30 embeddings
[00:20:23.153] 2025-08-27 00:20:23,152 - mcp_embedding_manager - INFO - Loading index from .mcp_embedding_cache/tool_index.pkl (size: 3723608 bytes)
[00:20:23.229] 2025-08-27 00:20:23,229 - mcp_embedding_manager - INFO - FAISS index loaded
[00:20:23.230] 2025-08-27 00:20:23,229 - mcp_embedding_manager - INFO - Updated dimension to 3072
[00:20:23.230] 2025-08-27 00:20:23,229 - mcp_embedding_manager - INFO - Index loaded successfully: 30 tools
[00:20:23.232] [INFO] Tool embedding index loaded successfully
[00:20:23.233] [INFO] Loaded full tool registry from mcp_generated_library/tool_registry_consolidated.json
[00:20:23.233] [INFO] Operation semantic index initialized
[00:20:23.234] 
[00:20:23.234] [TURN 1/10]
[00:20:23.234] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:24.996] 2025-08-27 00:20:24,995 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:25.001]   [SEARCH] Query: file reader json
[00:20:25.003] 
[00:20:25.003] [TURN 2/10]
[00:20:25.003] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:25.151] 2025-08-27 00:20:25,151 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:25.154]   [NO_ACTION] Quick feedback provided - no valid action format detected
[00:20:25.154] 
[00:20:25.154] [TURN 10/10]
[00:20:25.155] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:26.214] 2025-08-27 00:20:26,213 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:26.217]   [EARLY_EXIT] No actions taken, continuing...
[00:20:26.217] 
[00:20:26.217] [TURN 3/10]
[00:20:26.218] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:27.441] 2025-08-27 00:20:27,440 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:27.445]   [EARLY_EXIT] No actions taken, continuing...
[00:20:27.446] 
[00:20:27.446] [TURN 4/10]
[00:20:27.446] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:27.607] 2025-08-27 00:20:27,607 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:27.610]   [NO_ACTION] Quick feedback provided - no valid action format detected
[00:20:27.612] [ASSISTED] Task received 5 format helps, final result: failure
[00:20:27.618] [InteractiveExecutor] No LLM client provided, initializing from api_client_manager
[00:20:27.642] 2025-08-27 00:20:27,642 - api_client_manager - INFO - Created idealab client for model qwen2.5-7b-instruct
[00:20:27.642] [InteractiveExecutor] Initialized client with model: qwen2.5-7b-instruct
[00:20:27.642] [InteractiveExecutor] Using prompt type: optimal for API key selection
[00:20:27.642] [InteractiveExecutor] API model name: qwen2.5-7b-instruct
[00:20:27.643] [MCPEmbeddingManager] Reusing existing singleton instance (id: 140508933821712)
[00:20:27.643] [MCPEmbeddingManager] Current cache size: 30 embeddings
[00:20:27.643] 2025-08-27 00:20:27,643 - mcp_embedding_manager - INFO - Loading index from .mcp_embedding_cache/tool_index.pkl (size: 3723608 bytes)
[00:20:27.712] 2025-08-27 00:20:27,712 - mcp_embedding_manager - INFO - FAISS index loaded
[00:20:27.713] 2025-08-27 00:20:27,712 - mcp_embedding_manager - INFO - Updated dimension to 3072
[00:20:27.713] 2025-08-27 00:20:27,712 - mcp_embedding_manager - INFO - Index loaded successfully: 30 tools
[00:20:27.716] [INFO] Tool embedding index loaded successfully
[00:20:27.717] [INFO] Loaded full tool registry from mcp_generated_library/tool_registry_consolidated.json
[00:20:27.717] [INFO] Operation semantic index initialized
[00:20:27.717] 
[00:20:27.718] [TURN 1/10]
[00:20:27.718] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:27.849] 2025-08-27 00:20:27,849 - httpx - INFO - HTTP Request: POST https://85409-me3ofvov-eastus2.cognitiveservices.azure.com/openai/deployments/gpt-5-nano/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
[00:20:27.855] [AI_DEBUG] AI分类结果: category=tool_call_format_errors, confidence=0.85
[00:20:27.857] [DEBUG] Got result for task: has_result=True, save_logs=True
[00:20:27.857] [AI_DEBUG] 测试非完全成功(failure)，准备调用AI分类
[00:20:27.857] [AI_DEBUG] 生成的txt_content长度: 22822
[00:20:27.857] [AI_DEBUG] _ai_classify_with_txt_content called:
[00:20:27.857]   - use_ai_classification=True
[00:20:27.857]   - ai_classifier=True
[00:20:27.858]   - txt_content_len=22822
[00:20:27.858]   - task_model=qwen2.5-7b-instruct
[00:20:27.858] [AI_CLASSIFIER] 直接使用AI分析完整交互记录（跳过规则匹配）
[00:20:28.667] 2025-08-27 00:20:28,666 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:28.675]   [EARLY_EXIT] No actions taken, continuing...
[00:20:28.675] 
[00:20:28.675] [TURN 5/10]
[00:20:28.677] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:29.457] 2025-08-27 00:20:29,453 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:29.472]   [SEARCH] Query: network api fetch
[00:20:29.486] 
[00:20:29.486] [TURN 2/10]
[00:20:29.487] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:29.877] 2025-08-27 00:20:29,877 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:29.930]   [EARLY_EXIT] No actions taken, continuing...
[00:20:29.931] 
[00:20:29.931] [TURN 6/10]
[00:20:29.935] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:30.737] 2025-08-27 00:20:30,729 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:30.744]   [EARLY_EXIT] No actions taken, continuing...
[00:20:30.744] 
[00:20:30.744] [TURN 3/10]
[00:20:30.745] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:31.049] 2025-08-27 00:20:31,048 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:31.055]   [FORMAT_ISSUE] Turn 6: No tools executed after multiple turns
[00:20:31.056] 
[00:20:31.056] [TURN 7/10]
[00:20:31.056] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:31.953] 2025-08-27 00:20:31,952 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:31.961]   [EARLY_EXIT] No actions taken, continuing...
[00:20:31.961] 
[00:20:31.961] [TURN 4/10]
[00:20:31.962] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:32.352] 2025-08-27 00:20:32,352 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:32.353]   [FORMAT_ISSUE] Turn 7: No tools executed after multiple turns
[00:20:32.353] 
[00:20:32.353] [TURN 8/10]
[00:20:32.354] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:33.017] 2025-08-27 00:20:33,016 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:33.020]   [EARLY_EXIT] No actions taken, continuing...
[00:20:33.020] 
[00:20:33.021] [TURN 5/10]
[00:20:33.021] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:34.225] 2025-08-27 00:20:34,224 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:34.237]   [EARLY_EXIT] No actions taken, continuing...
[00:20:34.237] 
[00:20:34.237] [TURN 6/10]
[00:20:34.237] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:34.325] 2025-08-27 00:20:34,325 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:34.330]   [FORMAT_ISSUE] Turn 8: No tools executed after multiple turns
[00:20:34.331] 
[00:20:34.331] [TURN 9/10]
[00:20:34.331] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:34.784] 2025-08-27 00:20:34,784 - httpx - INFO - HTTP Request: POST https://85409-me3ofvov-eastus2.cognitiveservices.azure.com/openai/deployments/gpt-5-nano/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
[00:20:34.786] [AI_DEBUG] AI分类结果: category=tool_call_format_errors, confidence=0.85
[00:20:35.398] 2025-08-27 00:20:35,397 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:35.399]   [FORMAT_ISSUE] Turn 6: No tools executed after multiple turns
[00:20:35.400] 
[00:20:35.400] [TURN 7/10]
[00:20:35.400] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:35.509] 2025-08-27 00:20:35,508 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:35.514]   [FORMAT_ISSUE] Turn 9: No tools executed after multiple turns
[00:20:35.514] 
[00:20:35.514] [TURN 10/10]
[00:20:35.515] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:36.633] 2025-08-27 00:20:36,632 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:36.635]   [FORMAT_ISSUE] Turn 7: No tools executed after multiple turns
[00:20:36.635] 
[00:20:36.635] [TURN 8/10]
[00:20:36.637] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:36.843] 2025-08-27 00:20:36,843 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:36.851]   [FORMAT_ISSUE] Turn 10: No tools executed after multiple turns
[00:20:36.853] [ASSISTED] Task received 5 format helps, final result: failure
[00:20:36.860] [DEBUG] Got result for task: has_result=True, save_logs=True
[00:20:36.860] [AI_DEBUG] 测试非完全成功(failure)，准备调用AI分类
[00:20:36.860] [AI_DEBUG] 生成的txt_content长度: 24312
[00:20:36.860] [AI_DEBUG] _ai_classify_with_txt_content called:
[00:20:36.860]   - use_ai_classification=True
[00:20:36.860]   - ai_classifier=True
[00:20:36.860]   - txt_content_len=24312
[00:20:36.860]   - task_model=qwen2.5-7b-instruct
[00:20:36.860] [AI_CLASSIFIER] 直接使用AI分析完整交互记录（跳过规则匹配）
[00:20:36.864] [InteractiveExecutor] No LLM client provided, initializing from api_client_manager
[00:20:36.884] 2025-08-27 00:20:36,884 - api_client_manager - INFO - Created idealab client for model qwen2.5-7b-instruct
[00:20:36.884] [InteractiveExecutor] Initialized client with model: qwen2.5-7b-instruct
[00:20:36.884] [InteractiveExecutor] Using prompt type: optimal for API key selection
[00:20:36.885] [InteractiveExecutor] API model name: qwen2.5-7b-instruct
[00:20:36.885] [MCPEmbeddingManager] Reusing existing singleton instance (id: 140508933821712)
[00:20:36.885] [MCPEmbeddingManager] Current cache size: 30 embeddings
[00:20:36.885] 2025-08-27 00:20:36,885 - mcp_embedding_manager - INFO - Loading index from .mcp_embedding_cache/tool_index.pkl (size: 3723608 bytes)
[00:20:36.953] 2025-08-27 00:20:36,953 - mcp_embedding_manager - INFO - FAISS index loaded
[00:20:36.953] 2025-08-27 00:20:36,953 - mcp_embedding_manager - INFO - Updated dimension to 3072
[00:20:36.953] 2025-08-27 00:20:36,953 - mcp_embedding_manager - INFO - Index loaded successfully: 30 tools
[00:20:36.955] [INFO] Tool embedding index loaded successfully
[00:20:36.957] [INFO] Loaded full tool registry from mcp_generated_library/tool_registry_consolidated.json
[00:20:36.957] [INFO] Operation semantic index initialized
[00:20:36.958] 
[00:20:36.958] [TURN 1/10]
[00:20:36.959] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:38.600] 2025-08-27 00:20:38,600 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:38.603]   [SEARCH] Query: file reader writer
[00:20:38.605] 
[00:20:38.605] [TURN 2/10]
[00:20:38.606] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:39.558] 2025-08-27 00:20:39,557 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:39.561]   [FORMAT_ISSUE] Turn 8: No tools executed after multiple turns
[00:20:39.561] 
[00:20:39.561] [TURN 9/10]
[00:20:39.562] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:39.651] 2025-08-27 00:20:39,651 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:39.652]   [EARLY_EXIT] No actions taken, continuing...
[00:20:39.652] 
[00:20:39.652] [TURN 3/10]
[00:20:39.652] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:40.811] 2025-08-27 00:20:40,811 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:40.812]   [EARLY_EXIT] No actions taken, continuing...
[00:20:40.812] 
[00:20:40.812] [TURN 4/10]
[00:20:40.812] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:41.149] 2025-08-27 00:20:41,149 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:41.150]   [NO_ACTION] Quick feedback provided - no valid action format detected
[00:20:41.150] 
[00:20:41.150] [TURN 10/10]
[00:20:41.151] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:41.882] 2025-08-27 00:20:41,882 - httpx - INFO - HTTP Request: POST https://85409-me3ofvov-eastus2.cognitiveservices.azure.com/openai/deployments/gpt-5-nano/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
[00:20:41.884] [AI_DEBUG] AI分类结果: category=tool_call_format_errors, confidence=0.85
[00:20:41.989] 2025-08-27 00:20:41,988 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:41.990]   [EARLY_EXIT] No actions taken, continuing...
[00:20:41.990] 
[00:20:41.990] [TURN 5/10]
[00:20:41.990] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:42.712] 2025-08-27 00:20:42,712 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:42.712]   [NO_ACTION] Quick feedback provided - no valid action format detected
[00:20:42.713] [ASSISTED] Task received 5 format helps, final result: failure
[00:20:42.718] [DEBUG] Got result for task: has_result=True, save_logs=True
[00:20:42.718] [AI_DEBUG] 测试非完全成功(failure)，准备调用AI分类
[00:20:42.719] [AI_DEBUG] 生成的txt_content长度: 23423
[00:20:42.719] [AI_DEBUG] _ai_classify_with_txt_content called:
[00:20:42.719]   - use_ai_classification=True
[00:20:42.719]   - ai_classifier=True
[00:20:42.719]   - txt_content_len=23423
[00:20:42.719]   - task_model=qwen2.5-7b-instruct
[00:20:42.719] [AI_CLASSIFIER] 直接使用AI分析完整交互记录（跳过规则匹配）
[00:20:43.160] 2025-08-27 00:20:43,160 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:43.162]   [EARLY_EXIT] No actions taken, continuing...
[00:20:43.162] 
[00:20:43.162] [TURN 6/10]
[00:20:43.162] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:44.334] 2025-08-27 00:20:44,334 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:44.335]   [FORMAT_ISSUE] Turn 6: No tools executed after multiple turns
[00:20:44.335] 
[00:20:44.335] [TURN 7/10]
[00:20:44.335] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:45.553] 2025-08-27 00:20:45,552 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:45.558]   [FORMAT_ISSUE] Turn 7: No tools executed after multiple turns
[00:20:45.558] 
[00:20:45.558] [TURN 8/10]
[00:20:45.558] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:46.960] 2025-08-27 00:20:46,960 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:46.961]   [NO_ACTION] Quick feedback provided - no valid action format detected
[00:20:46.961] 
[00:20:46.961] [TURN 9/10]
[00:20:46.961] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:48.448] 2025-08-27 00:20:48,448 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:48.449]   [NO_ACTION] Quick feedback provided - no valid action format detected
[00:20:48.449] 
[00:20:48.449] [TURN 10/10]
[00:20:48.450] [LLM_CALL] Using model: qwen2.5-7b-instruct, API name: qwen2.5-7b-instruct
[00:20:48.699] 2025-08-27 00:20:48,699 - httpx - INFO - HTTP Request: POST https://85409-me3ofvov-eastus2.cognitiveservices.azure.com/openai/deployments/gpt-5-nano/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
[00:20:48.704] [AI_DEBUG] AI分类结果: category=tool_call_format_errors, confidence=0.85
[00:20:50.148] 2025-08-27 00:20:50,148 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:50.149]   [NO_ACTION] Quick feedback provided - no valid action format detected
[00:20:50.150] [ASSISTED] Task received 5 format helps, final result: failure
[00:20:50.158] [DEBUG] Got result for task: has_result=True, save_logs=True
[00:20:50.158] [AI_DEBUG] 测试非完全成功(failure)，准备调用AI分类
[00:20:50.158] [AI_DEBUG] 生成的txt_content长度: 21728
[00:20:50.159] [AI_DEBUG] _ai_classify_with_txt_content called:
[00:20:50.160]   - use_ai_classification=True
[00:20:50.160]   - ai_classifier=True
[00:20:50.160]   - txt_content_len=21728
[00:20:50.160]   - task_model=qwen2.5-7b-instruct
[00:20:50.160] [AI_CLASSIFIER] 直接使用AI分析完整交互记录（跳过规则匹配）
[00:20:57.510] 2025-08-27 00:20:57,509 - httpx - INFO - HTTP Request: POST https://85409-me3ofvov-eastus2.cognitiveservices.azure.com/openai/deployments/gpt-5-nano/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
[00:20:57.523] [AI_DEBUG] AI分类结果: category=tool_call_format_errors, confidence=0.85
[00:20:57.533] 💾 智能Checkpoint: 保存5个结果...
[00:20:57.533]    触发原因: 数量=5, 时间=0.0s, 强制=True
[00:20:57.537] 2025-08-27 00:20:57,536 - result_collector - INFO - 📤 已提交 qwen2.5-7b-instruct 的 1 个结果到收集器: qwen2.5-7b-instruct_87421_1756268457535759.json
[00:20:57.537] 2025-08-27 00:20:57,537 - result_collector - INFO - 📤 已提交 qwen2.5-7b-instruct 的 1 个结果到收集器: qwen2.5-7b-instruct_87421_1756268457537317.json
[00:20:57.538] 2025-08-27 00:20:57,538 - result_collector - INFO - 📤 已提交 qwen2.5-7b-instruct 的 1 个结果到收集器: qwen2.5-7b-instruct_87421_1756268457537958.json
[00:20:57.538] 2025-08-27 00:20:57,538 - result_collector - INFO - 📤 已提交 qwen2.5-7b-instruct 的 1 个结果到收集器: qwen2.5-7b-instruct_87421_1756268457538384.json
[00:20:57.539] 2025-08-27 00:20:57,539 - result_collector - INFO - 📤 已提交 qwen2.5-7b-instruct 的 1 个结果到收集器: qwen2.5-7b-instruct_87421_1756268457538826.json
[00:20:57.539] ✅ Checkpoint完成: 成功保存 5/5 个结果
[00:20:57.539] 
[00:20:57.539] [INFO] Batch writing 5 records to database (qwen2.5-7b-instruct:5)
[00:20:57.539] 2025-08-27 00:20:57,539 - batch_test_runner - INFO - Batch writing 5 records to database (qwen2.5-7b-instruct:5)
[00:20:57.540] 2025-08-27 00:20:57,540 - result_collector - INFO - 📤 已提交 qwen2.5-7b-instruct 的 5 个结果到收集器: qwen2.5-7b-instruct_87421_1756268457539593.json
[00:20:57.541] [INFO] Successfully wrote 5/5 records (qwen2.5-7b-instruct:5)
[00:20:57.541] 2025-08-27 00:20:57,540 - batch_test_runner - INFO - Successfully wrote 5/5 records (qwen2.5-7b-instruct:5)
[00:20:57.543] [INFO] Runtime error report saved to: runtime_reports/runtime_error_report_20250827_002057.json
[00:20:57.555] 2025-08-27 00:20:57,554 - batch_test_runner - INFO - Database saved successfully
[00:20:57.557] 
[00:20:57.557] 📊 Statistics saved to: /Users/ruicheng/Documents/GitHub/WorkflowBench/pilot_bench_cumulative_results/master_database.json
[00:20:57.557] 2025-08-27 00:20:57,557 - batch_test_runner - INFO - Statistics saved to: /Users/ruicheng/Documents/GitHub/WorkflowBench/pilot_bench_cumulative_results/master_database.json
[00:20:57.557] 2025-08-27 00:20:57,557 - batch_test_runner - INFO - ============================================================
[00:20:57.557] 2025-08-27 00:20:57,557 - batch_test_runner - INFO - Batch test completed at 2025-08-27T00:20:57.557683
[00:20:57.557] 2025-08-27 00:20:57,557 - batch_test_runner - INFO - Summary:
[00:20:57.557] 2025-08-27 00:20:57,557 - batch_test_runner - INFO -   - Total tests: 5
[00:20:57.557] 2025-08-27 00:20:57,557 - batch_test_runner - INFO -   - Successful: 0
[00:20:57.557] 2025-08-27 00:20:57,557 - batch_test_runner - INFO -   - Failed: 5
[00:20:57.557] 2025-08-27 00:20:57,557 - batch_test_runner - INFO -   - Success rate: 0.0%
[00:20:57.557] 2025-08-27 00:20:57,557 - batch_test_runner - INFO -   - Log file: logs/batch_test_20250827_002000.log
[00:20:57.557] 2025-08-27 00:20:57,557 - batch_test_runner - INFO - ============================================================
[00:20:57.558] 
[00:20:57.558] ✅ 批测试完成
[00:20:57.558]    成功: 0/5
[00:20:57.558]    失败: 5/5
[00:20:57.558] 📤 提交 5 个结果到ResultCollector...
