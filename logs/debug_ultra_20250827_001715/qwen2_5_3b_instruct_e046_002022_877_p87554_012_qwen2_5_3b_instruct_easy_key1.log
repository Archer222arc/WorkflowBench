===== 分片 qwen2.5-3b-instruct_easy_key1 =====
时间: 2025-08-27T00:20:22.878142
模型: qwen2.5-3b-instruct
实例: qwen-key1
命令: python -u smart_batch_runner.py --model qwen2.5-3b-instruct --deployment qwen-key1 --prompt-types optimal --difficulty easy --task-types all --num-instances 1 --max-workers 50 --tool-success-rate 0.8 --batch-commit --checkpoint-interval 20 --ai-classification --no-adaptive --qps 50
环境变量:
  STORAGE_FORMAT=json
  PYTHONFAULTHANDLER=1
  PYTHONUNBUFFERED=1
==================================================

[00:20:24.234] 2025-08-27 00:20:24,234 - faiss.loader - INFO - Loading faiss.
[00:20:24.271] 2025-08-27 00:20:24,271 - faiss.loader - INFO - Successfully loaded faiss.
[00:20:24.766] [INFO] 使用JSON存储格式
[00:20:24.766] [INFO] 使用JSON存储格式
[00:20:25.155] [INFO] 使用JSON存储格式
[00:20:25.158] [INFO] 使用JSON存储格式
[00:20:25.160] 
[00:20:25.162] ============================================================
[00:20:25.162] 智能批测试: qwen2.5-3b-instruct (idealab)
[00:20:25.162] Prompt types: ['optimal']
[00:20:25.162] 难度: easy
[00:20:25.162] 目标: 每种配置 1 个实例
[00:20:25.162] ============================================================
[00:20:25.162] ○ simple_task         :   0/  1 已完成 (需要补充 1 个)
[00:20:25.162] ○ basic_task          :   0/  1 已完成 (需要补充 1 个)
[00:20:25.162] ○ data_pipeline       :   0/  1 已完成 (需要补充 1 个)
[00:20:25.162] ○ api_integration     :   0/  1 已完成 (需要补充 1 个)
[00:20:25.163] ○ multi_stage_pipeline:   0/  1 已完成 (需要补充 1 个)
[00:20:25.163] 
[00:20:25.163] ⏳ 需要运行 5 个新测试
[00:20:25.163] 
[00:20:25.163] ▶ 准备 simple_task (1 个实例)...
[00:20:25.163] 
[00:20:25.164] ▶ 准备 basic_task (1 个实例)...
[00:20:25.164] 
[00:20:25.164] ▶ 准备 data_pipeline (1 个实例)...
[00:20:25.164] 
[00:20:25.164] ▶ 准备 api_integration (1 个实例)...
[00:20:25.164] 
[00:20:25.164] ▶ 准备 multi_stage_pipeline (1 个实例)...
[00:20:25.164] 
[00:20:25.164] ▶ 开始执行 5 个测试...
[00:20:25.164] 📊 自适应checkpoint_interval: 20
[00:20:25.164] 📦 批量提交模式：每20个测试保存一次
[00:20:25.164] ⚠️  检测到idealab API，调整并发: workers=2, qps=None
[00:20:25.164] 2025-08-27 00:20:25,163 - smart_result_collector - INFO - 自动保存线程已启动
[00:20:25.164] 2025-08-27 00:20:25,164 - smart_result_collector - INFO - SmartResultCollector初始化完成
[00:20:25.164] 2025-08-27 00:20:25,164 - smart_result_collector - INFO -   - 临时目录: temp_results
[00:20:25.164] 2025-08-27 00:20:25,164 - smart_result_collector - INFO -   - 内存阈值: 20
[00:20:25.164] 2025-08-27 00:20:25,164 - smart_result_collector - INFO -   - 时间阈值: 300秒
[00:20:25.164] 2025-08-27 00:20:25,164 - smart_result_collector - INFO -   - 自动保存: 60秒
[00:20:25.164] 2025-08-27 00:20:25,164 - smart_result_collector - INFO -   - 自适应阈值: True
[00:20:25.164] 2025-08-27 00:20:25,164 - result_collector_adapter - INFO - ✅ 使用SmartResultCollector
[00:20:25.164] 2025-08-27 00:20:25,164 - result_collector_adapter - INFO - AdaptiveResultCollector初始化完成，使用: smart
[00:20:25.165] 🧠 启用SmartResultCollector模式，智能数据管理
[00:20:25.166] 2025-08-27 00:20:25,166 - smart_model_router - INFO - ✨ Using USER's Azure endpoint for gpt-5-nano
[00:20:25.205] 2025-08-27 00:20:25,205 - txt_based_ai_classifier - INFO - TXT-based AI classifier initialized with gpt-5-nano (parameter-filtered)
[00:20:25.206] [AI_DEBUG] AI分类器初始化成功: <txt_based_ai_classifier.TxtBasedAIClassifier object at 0x7fa9114565f0>
[00:20:25.206] 2025-08-27 00:20:25,205 - batch_test_runner - INFO - 基于TXT文件的AI错误分类系统已启用 (使用gpt-5-nano)
[00:20:25.206] [DEBUG] BatchTestRunner initialized with save_logs=True, enable_database_updates=False, use_ai_classification=True, checkpoint_interval=20
[00:20:25.206] 2025-08-27 00:20:25,206 - batch_test_runner - INFO - ============================================================
[00:20:25.206] 2025-08-27 00:20:25,206 - batch_test_runner - INFO - Batch test runner initialized
[00:20:25.206] 2025-08-27 00:20:25,206 - batch_test_runner - INFO - Configuration: debug=False, silent=False, adaptive=False
[00:20:25.206] 2025-08-27 00:20:25,206 - batch_test_runner - INFO - Log file: logs/batch_test_20250827_002025.log
[00:20:25.206] 2025-08-27 00:20:25,206 - batch_test_runner - INFO - ============================================================
[00:20:25.206] 2025-08-27 00:20:25,206 - batch_test_runner - INFO - Running 5 tests with 2 workers, QPS limit: None
[00:20:25.206] 2025-08-27 00:20:25,206 - batch_test_runner - INFO - Initializing test components...
[00:20:26.097] 2025-08-27 00:20:26,097 - batch_test_runner - INFO - Found pre-generated workflows, will use them to save memory
[00:20:26.097] 2025-08-27 00:20:26,097 - batch_test_runner - INFO - ⚡ [OPTIMIZATION] Using MDPWorkflowGenerator with SKIP_MODEL_LOADING=true
[00:20:26.097] 2025-08-27 00:20:26,097 - batch_test_runner - INFO - ⚡ This saves ~350MB memory while keeping all functionality intact
[00:20:26.098] [DEBUG] Creating new ToolCapabilityManager instance
[00:20:26.098] [OperationEmbeddingIndex] Initializing with unified API client manager
[00:20:26.098] ['config/config.json', 'config/api_keys.json', 'config/api-keys.json']
[00:20:26.098] 2025-08-27 00:20:26,098 - api_client_manager - INFO - Loaded configuration from config/config.json
[00:20:26.107] [OperationEmbeddingIndex] OpenAI client initialized with model: gpt-4o-mini
[00:20:26.107] [OperationEmbeddingIndex] Using embedding model: text-embedding-3-large
[00:20:26.107] [OperationEmbeddingIndex] Detecting actual embedding dimension...
[00:20:26.498] 2025-08-27 00:20:26,498 - httpx - INFO - HTTP Request: POST https://archer222arc.openai.azure.com/openai/deployments/text-embedding-3-large/embeddings?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
[00:20:26.504] [OperationEmbeddingIndex] Detected embedding dimension: 3072
[00:20:26.566] [INFO] Loaded 4150 embeddings from persistent cache
[00:20:26.566] [OperationEmbeddingIndex] Initialized with 4150 cached embeddings
[00:20:26.567] [INFO] Loaded 15 LLM-enhanced operation definitions from cache
[00:20:26.567] [INFO] Found cached operation index at .mcp_operation_cache/operation_index.pkl
[00:20:26.567] [INFO] Loading operation index from .mcp_operation_cache/operation_index.pkl
[00:20:26.575] [INFO] Successfully loaded FAISS index with dimension 3072
[00:20:26.575] [INFO] Operation index loaded successfully from .mcp_operation_cache/operation_index.pkl
[00:20:26.575] [INFO] Loaded 15 operations with dimension 3072
[00:20:26.575] [INFO] Successfully loaded cached index
[00:20:26.575] [INFO] Operation semantic index initialized
[00:20:26.576] [INFO] Using device: cpu
[00:20:26.578] [INFO] Initialized tool success tracking attributes
[00:20:26.578] [INFO] Initializing embedding manager for enhanced tool selection
[00:20:26.578] [MCPEmbeddingManager] Creating new singleton instance
[00:20:26.578] [MCPEmbeddingManager] Initializing with unified API client manager
[00:20:26.594] [MCPEmbeddingManager] Using embedding model: text-embedding-3-large
[00:20:26.595] [MCPEmbeddingManager] Client initialized successfully
[00:20:26.596] 2025-08-27 00:20:26,595 - mcp_embedding_manager - INFO - Loading embedding cache from .mcp_embedding_cache/embedding_cache.pkl (size: 173790244 bytes)
[00:20:26.760] 2025-08-27 00:20:26,759 - mcp_embedding_manager - INFO - Loaded 7050 cached embeddings
[00:20:27.638] 2025-08-27 00:20:27,637 - mcp_embedding_manager - INFO - Loaded search cache with 3 entries
[00:20:27.639] 2025-08-27 00:20:27,637 - mcp_embedding_manager - INFO - Initialized operation mappings with 149 terms
[00:20:27.680] 2025-08-27 00:20:27,679 - mcp_embedding_manager - INFO - Loading embedding cache from .mcp_embedding_cache/embedding_cache.pkl (size: 173790244 bytes)
[00:20:27.821] 2025-08-27 00:20:27,820 - mcp_embedding_manager - INFO - Loaded 7050 cached embeddings
[00:20:29.403] 2025-08-27 00:20:29,403 - mcp_embedding_manager - INFO - [Cache] Loaded 9650 entries from file
[00:20:29.404] [MCPEmbeddingManager] Singleton created with 0 cached embeddings
[00:20:29.404] [INFO] Loading embedding index from .mcp_embedding_cache/tool_index.pkl
[00:20:29.404] 2025-08-27 00:20:29,404 - mcp_embedding_manager - INFO - Loading index from .mcp_embedding_cache/tool_index.pkl (size: 3723608 bytes)
[00:20:29.451] 2025-08-27 00:20:29,451 - mcp_embedding_manager - INFO - FAISS index loaded
[00:20:29.452] 2025-08-27 00:20:29,451 - mcp_embedding_manager - INFO - Updated dimension to 3072
[00:20:29.452] 2025-08-27 00:20:29,451 - mcp_embedding_manager - INFO - Index loaded successfully: 30 tools
[00:20:29.456] [SUCCESS] Loaded 30 tool embeddings
[00:20:29.460] 2025-08-27 00:20:29,456 - mdp_workflow_generator - INFO - Embedding index loaded successfully
[00:20:29.460] [SUCCESS] Embedding manager initialized with 30 tools
[00:20:29.460] [INFO] Initialized task types: ['simple_task', 'data_pipeline', 'api_integration', 'basic_task', 'multi_stage_pipeline']
[00:20:29.460] [INFO] Loading full MCP protocol registry...
[00:20:29.460] 2025-08-27 00:20:29,458 - mdp_workflow_generator - INFO - Loaded full tool registry from mcp_generated_library/tool_registry_consolidated.json
[00:20:29.460] [INFO] Loaded full tool registry with 30 tools
[00:20:29.460] 2025-08-27 00:20:29,459 - mdp_workflow_generator - INFO - Loading tools from mcp_generated_library/tool_registry_consolidated.json
[00:20:29.460] [INFO] Loading tools from mcp_generated_library/tool_registry_consolidated.json
[00:20:29.461] [INFO] Embedding manager ready with 30 tools
[00:20:29.461] [WARNING] Embedding manager exists but has no embeddings
[00:20:29.461] [INFO] Consider rebuilding index with: embedding_manager.build_index(tools_path)
[00:20:29.477] [INFO] Tool file_operations_reader: semantic operations = ['read', 'write', 'parse', 'transform']
[00:20:29.477] [INFO] Tool file_operations_scanner: semantic operations = ['read', 'write', 'parse', 'transform']
[00:20:29.478] [INFO] Tool network_fetcher: semantic operations = ['read', 'write', 'validate', 'integrate']
[00:20:29.478] [INFO] Tool integration_authenticator: semantic operations = ['integrate', 'transform', 'validate']
[00:20:29.478] [INFO] Tool utility_logger: semantic operations = ['cache', 'process']
[00:20:29.478] [INFO] Tool data_processing_parser: semantic operations = ['validate', 'transform', 'filter', 'aggregate']
[00:20:29.478] [INFO] Tool data_processing_transformer: semantic operations = ['validate', 'transform', 'filter', 'aggregate']
[00:20:29.478] [INFO] Tool data_processing_validator: semantic operations = ['validate', 'transform', 'filter', 'aggregate']
[00:20:29.478] [INFO] Tool network_validator: semantic operations = ['read', 'write', 'validate', 'integrate']
[00:20:29.478] [INFO] Tool computation_calculator: semantic operations = ['compute', 'aggregate', 'transform']
[00:20:29.479] [INFO] Tool data_processing_filter: semantic operations = ['validate', 'transform', 'filter', 'aggregate']
[00:20:29.479] [INFO] Tool data_processing_aggregator: semantic operations = ['validate', 'transform', 'filter', 'aggregate']
[00:20:29.479] [INFO] Tool file_operations_converter: semantic operations = ['read', 'write', 'parse', 'transform']
[00:20:29.479] [INFO] Tool file_operations_compressor: semantic operations = ['read', 'write', 'parse', 'transform']
[00:20:29.479] [INFO] Tool file_operations_writer: semantic operations = ['read', 'write', 'parse', 'transform']
[00:20:29.479] [INFO] Tool network_poster: semantic operations = ['read', 'write', 'validate', 'integrate']
[00:20:29.479] [INFO] Tool network_monitor: semantic operations = ['read', 'write', 'validate', 'integrate']
[00:20:29.479] [INFO] Tool network_router: semantic operations = ['read', 'write', 'validate', 'integrate']
[00:20:29.479] [INFO] Tool computation_predictor: semantic operations = ['compute', 'aggregate', 'transform']
[00:20:29.479] [INFO] Tool computation_analyzer: semantic operations = ['compute', 'aggregate', 'transform']
[00:20:29.479] [INFO] Tool computation_simulator: semantic operations = ['compute', 'aggregate', 'transform']
[00:20:29.480] [INFO] Tool computation_optimizer: semantic operations = ['compute', 'aggregate', 'transform']
[00:20:29.480] [INFO] Tool integration_mapper: semantic operations = ['integrate', 'transform', 'validate']
[00:20:29.480] [INFO] Tool integration_queue: semantic operations = ['integrate', 'transform', 'validate']
[00:20:29.480] [INFO] Tool integration_scheduler: semantic operations = ['integrate', 'transform', 'validate']
[00:20:29.480] [INFO] Tool integration_connector: semantic operations = ['integrate', 'transform', 'validate']
[00:20:29.480] [INFO] Tool utility_cache: semantic operations = ['cache', 'process']
[00:20:29.480] [INFO] Tool utility_tracker: semantic operations = ['cache', 'process']
[00:20:29.480] [INFO] Tool utility_helper: semantic operations = ['cache', 'process']
[00:20:29.480] [INFO] Tool utility_notifier: semantic operations = ['cache', 'process']
[00:20:29.480] 2025-08-27 00:20:29,480 - mdp_workflow_generator - INFO - Loaded 30 tools
[00:20:29.480] [INFO] Setting default state_dim based on loaded tools
[00:20:29.480] [INFO] state_dim set to 345 (tools=30, base=340, task_types=5)
[00:20:29.480] 2025-08-27 00:20:29,480 - mdp_workflow_generator - INFO - Default state_dim calculated: 345
[00:20:29.480] [INFO] Setting default action_dim based on loaded tools
[00:20:29.480] [INFO] action_dim set to 31 (tools=30 + NO_OP)
[00:20:29.480] 2025-08-27 00:20:29,480 - mdp_workflow_generator - INFO - Default action_dim calculated: 31
[00:20:29.480] [INFO] ⚡ SKIP_MODEL_LOADING=true - Skipping neural network model loading
[00:20:29.480] [INFO] ⚡ Memory optimization: Saving ~350MB by not loading model
[00:20:29.480] [INFO] ⚡ Will use pre-generated workflows or random policy
[00:20:29.480] 2025-08-27 00:20:29,480 - mdp_workflow_generator - INFO - Model loading skipped for memory optimization (SKIP_MODEL_LOADING=true)
[00:20:29.480] [INFO] Initializing TaskManager...
[00:20:32.117] 2025-08-27 00:20:32,117 - unified_training_manager - INFO - Using device: cpu
[00:20:32.328] 2025-08-27 00:20:32,328 - unified_training_manager - INFO - Task filtering results:
[00:20:32.328] 2025-08-27 00:20:32,328 - unified_training_manager - INFO -   Total: 5040 -> 5040
[00:20:32.328] 2025-08-27 00:20:32,328 - unified_training_manager - INFO -   simple_task: 320 -> 320
[00:20:32.328] 2025-08-27 00:20:32,328 - unified_training_manager - INFO -   data_pipeline: 1520 -> 1520
[00:20:32.328] 2025-08-27 00:20:32,328 - unified_training_manager - INFO -   api_integration: 1360 -> 1360
[00:20:32.328] 2025-08-27 00:20:32,328 - unified_training_manager - INFO -   basic_task: 1200 -> 1200
[00:20:32.328] 2025-08-27 00:20:32,328 - unified_training_manager - INFO -   multi_stage_pipeline: 640 -> 640
[00:20:32.328] 2025-08-27 00:20:32,328 - unified_training_manager - INFO - Loaded 5040 tasks from mcp_generated_library/task_library_all_difficulties.json
[00:20:32.331] 2025-08-27 00:20:32,331 - unified_training_manager - INFO - Organized tasks: 5 types, 3 complexity levels, 5 difficulty levels
[00:20:32.331] [TaskManager] Difficulty level 'easy': 1096 tasks
[00:20:32.331] [TaskManager] Difficulty level 'very_easy': 856 tasks
[00:20:32.331] [TaskManager] Difficulty level 'medium': 1136 tasks
[00:20:32.331] [TaskManager] Difficulty level 'hard': 1096 tasks
[00:20:32.331] [TaskManager] Difficulty level 'very_hard': 856 tasks
[00:20:32.334] [INFO] TaskManager initialized with 5040 tasks
[00:20:32.334] [INFO] Task types available: ['basic_task', 'data_pipeline', 'multi_stage_pipeline', 'simple_task', 'api_integration']
[00:20:32.334] [INFO] Initializing ToolCallVerifier...
[00:20:32.339] [INFO] ToolCallVerifier initialized with 30 tools
[00:20:32.339] [INFO] Output tools identified: 1
[00:20:32.339] [INFO] Component initialization status:
[00:20:32.339]   - embedding_manager: initialized
[00:20:32.339]   - task_manager: initialized
[00:20:32.339]   - output_verifier: initialized
[00:20:32.339]   - tool_capability_manager: initialized
[00:20:32.339]   - tool_success_rates: initialized with 0 entries
[00:20:32.339] [INFO] MDPWorkflowGenerator initialization complete
[00:20:32.339] 2025-08-27 00:20:32,339 - mdp_workflow_generator - INFO - MDPWorkflowGenerator initialized successfully
[00:20:32.339] 2025-08-27 00:20:32,339 - batch_test_runner - INFO - ✅ MDPWorkflowGenerator initialized successfully:
[00:20:32.339] 2025-08-27 00:20:32,339 - batch_test_runner - INFO -   - task_manager: ✓
[00:20:32.339] 2025-08-27 00:20:32,339 - batch_test_runner - INFO -   - output_verifier: ✓
[00:20:32.340] 2025-08-27 00:20:32,339 - batch_test_runner - INFO -   - embedding_manager: ✓
[00:20:32.340] 2025-08-27 00:20:32,339 - batch_test_runner - INFO -   - tool_capabilities: 30 tools
[00:20:32.340] 2025-08-27 00:20:32,339 - batch_test_runner - INFO -   - neural network: skipped (saving 350MB)
[00:20:32.340] [MCPEmbeddingManager] Reusing existing singleton instance (id: 140364705371504)
[00:20:32.340] [MCPEmbeddingManager] Current cache size: 30 embeddings
[00:20:32.340] [FlawedWorkflowGenerator] Initialized with 30 tools
[00:20:32.340] [FlawedWorkflowGenerator] RAG support: disabled
[00:20:32.356] 2025-08-27 00:20:32,356 - focused_ai_classifier - INFO - Focused AI classifier initialized with gpt-5-nano (parameter-filtered)
[00:20:32.356] [INFO] Enhanced manager: AI错误分类系统已启用
[00:20:32.357] [INFO] 检测到并发环境，使用安全存储模式（ResultCollector）
[00:20:32.360] 2025-08-27 00:20:32,360 - result_collector - INFO - ResultCollector初始化，临时目录: temp_results
[00:20:32.360] 2025-08-27 00:20:32,360 - result_merger - INFO - ResultMerger初始化完成
[00:20:32.360] 2025-08-27 00:20:32,360 - result_merger - WARNING - 另一个合并器已在运行 (PID: -1)
[00:20:32.360] [INFO] 后台合并进程已启动（每10秒合并一次）
[00:20:32.361] DEBUG: Checking generator attributes
[00:20:32.361]   - has tool_capabilities: True
[00:20:32.361]   - has tool_capability_manager: True
[00:20:32.361]   - has task_manager: True
[00:20:32.361] [INFO] Loaded 30 tools from generator
[00:20:32.361] [INFO] Tool names sample: ['computation_analyzer', 'computation_calculator', 'computation_optimizer', 'computation_predictor', 'computation_simulator']...
[00:20:32.361] [MCPEmbeddingManager] Reusing existing singleton instance (id: 140364705371504)
[00:20:32.361] [MCPEmbeddingManager] Current cache size: 30 embeddings
[00:20:32.361] [INFO] Initializing LLM client using APIClientManager
[00:20:32.369] [INFO] Using Azure OpenAI client
[00:20:32.369] [DEBUG] Checking if generator has tool_capability_manager attribute
[00:20:32.369] [DEBUG] Creating FlawedWorkflowGenerator with correct parameters
[00:20:32.369] [MCPEmbeddingManager] Reusing existing singleton instance (id: 140364705371504)
[00:20:32.369] [MCPEmbeddingManager] Current cache size: 30 embeddings
[00:20:32.369] [FlawedWorkflowGenerator] Initialized with 30 tools
[00:20:32.369] [FlawedWorkflowGenerator] RAG support: enabled
[00:20:32.369] [INFO] FlawedWorkflowGenerator initialized successfully
[00:20:32.369] [INFO] Initializing StableScorer for Phase 2 scoring
[00:20:32.369] <tool_capability_manager.ToolCapabilityManager object at 0x7fa911455570>
[00:20:32.369] [MCPEmbeddingManager] Reusing existing singleton instance (id: 140364705371504)
[00:20:32.369] [MCPEmbeddingManager] Current cache size: 30 embeddings
[00:20:32.369] [INFO] Loaded tool success history for 0 tools
[00:20:32.369] [INFO] StableScorer initialized with semantic capability
[00:20:32.369] [INFO] StableScorer initialized successfully
[00:20:32.369] [INFO] Loading task instances...
[00:20:32.369] [INFO] Loading task instances from mcp_generated_library/difficulty_versions/task_library_enhanced_v3_easy.json
[00:20:32.378] [INFO] Loaded 630 task instances
[00:20:32.378] [INFO] Task instances loaded: ['basic_task', 'data_pipeline', 'multi_stage_pipeline', 'simple_task', 'api_integration']
[00:20:32.378] 2025-08-27 00:20:32,378 - batch_test_runner - INFO - Loading task library with pre-generated workflows: task_library_enhanced_v3_easy_with_workflows.json
[00:20:32.378] 2025-08-27 00:20:32,378 - batch_test_runner - INFO - Using partial loading: 20 tasks per type
[00:20:33.538] 2025-08-27 00:20:33,538 - batch_test_runner - INFO - Partially loaded 100 tasks (vs 630 total)
[00:20:33.538] 2025-08-27 00:20:33,538 - batch_test_runner - INFO - Estimated memory saving: 84.1%
[00:20:33.597] 2025-08-27 00:20:33,596 - batch_test_runner - INFO - Initialization complete
[00:20:33.777] 2025-08-27 00:20:33,777 - batch_test_runner - INFO - Starting batch test with 5 tasks, 2 workers
[00:20:33.777] 2025-08-27 00:20:33,777 - batch_test_runner - INFO - Each task timeout: 10 minutes, Total batch timeout: 20 minutes
[00:20:33.779] [InteractiveExecutor] No LLM client provided, initializing from api_client_manager
[00:20:33.780] [InteractiveExecutor] No LLM client provided, initializing from api_client_manager
[00:20:33.780] 2025-08-27 00:20:33,780 - smart_model_router - INFO - Using idealab for qwen2.5-3b-instruct
[00:20:33.804] 2025-08-27 00:20:33,803 - api_client_manager - INFO - Created idealab client for model qwen2.5-3b-instruct
[00:20:33.804] [InteractiveExecutor] Initialized client with model: qwen2.5-3b-instruct
[00:20:33.804] [InteractiveExecutor] Using prompt type: optimal for API key selection
[00:20:33.804] 2025-08-27 00:20:33,804 - api_client_manager - INFO - Created idealab client for model qwen2.5-3b-instruct
[00:20:33.805] [InteractiveExecutor] Initialized client with model: qwen2.5-3b-instruct
[00:20:33.805] [InteractiveExecutor] Using prompt type: optimal for API key selection
[00:20:33.805] [InteractiveExecutor] API model name: qwen2.5-3b-instruct
[00:20:33.805] [MCPEmbeddingManager] Reusing existing singleton instance (id: 140364705371504)
[00:20:33.805] [MCPEmbeddingManager] Current cache size: 30 embeddings
[00:20:33.805] 2025-08-27 00:20:33,805 - mcp_embedding_manager - INFO - Loading index from .mcp_embedding_cache/tool_index.pkl (size: 3723608 bytes)
[00:20:33.807] [InteractiveExecutor] API model name: qwen2.5-3b-instruct
[00:20:33.807] [MCPEmbeddingManager] Reusing existing singleton instance (id: 140364705371504)
[00:20:33.807] [MCPEmbeddingManager] Current cache size: 30 embeddings
[00:20:33.807] 2025-08-27 00:20:33,807 - mcp_embedding_manager - INFO - Loading index from .mcp_embedding_cache/tool_index.pkl (size: 3723608 bytes)
[00:20:33.893] 2025-08-27 00:20:33,893 - mcp_embedding_manager - INFO - FAISS index loaded
[00:20:33.893] 2025-08-27 00:20:33,893 - mcp_embedding_manager - INFO - Updated dimension to 3072
[00:20:33.893] 2025-08-27 00:20:33,893 - mcp_embedding_manager - INFO - Index loaded successfully: 30 tools
[00:20:33.895] [INFO] Tool embedding index loaded successfully
[00:20:33.896] [INFO] Loaded full tool registry from mcp_generated_library/tool_registry_consolidated.json2025-08-27 00:20:33,896 - mcp_embedding_manager - INFO - FAISS index loaded
[00:20:33.896] 2025-08-27 00:20:33,896 - mcp_embedding_manager - INFO - Updated dimension to 3072
[00:20:33.896] 2025-08-27 00:20:33,896 - mcp_embedding_manager - INFO - Index loaded successfully: 30 tools
[00:20:33.899] [INFO] Tool embedding index loaded successfully
[00:20:33.899] 
[00:20:33.899] [INFO] Operation semantic index initialized
[00:20:33.899] 
[00:20:33.899] [TURN 1/10]
[00:20:33.900] [INFO] Loaded full tool registry from mcp_generated_library/tool_registry_consolidated.json
[00:20:33.900] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:20:33.906] [INFO] Operation semantic index initialized
[00:20:33.906] 
[00:20:33.906] [TURN 1/10]
[00:20:33.906] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:20:35.682] 2025-08-27 00:20:35,681 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:35.706]   [SEARCH] Query: file_operations_reader
[00:20:35.708] 
[00:20:35.708] [TURN 2/10]
[00:20:35.709] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:20:39.556] 2025-08-27 00:20:39,554 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:39.563]   [SEARCH] Query: data_processing_validator
[00:20:39.567] 
[00:20:39.567] [TURN 2/10]
[00:20:39.568] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:20:40.908] 2025-08-27 00:20:40,908 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:40.909]   [INFO] Tool info request: data_processing_validator
[00:20:40.909] 
[00:20:40.909] [TURN 3/10]
[00:20:40.909] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:20:41.695] 2025-08-27 00:20:41,694 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:41.699]   [INFO] Tool info request: file_operations_reader
[00:20:41.699] 
[00:20:41.699] [TURN 3/10]
[00:20:41.700] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:20:42.105] 2025-08-27 00:20:42,104 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:42.105]   [INFO] Tool info request: data_processing_parser
[00:20:42.105] 
[00:20:42.106] [TURN 4/10]
[00:20:42.106] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:20:46.796] 2025-08-27 00:20:46,795 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:46.800]   [SEARCH] Query: data_processing_parser
[00:20:46.801] 2025-08-27 00:20:46,801 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:46.801] 
[00:20:46.801] [TURN 4/10]
[00:20:46.803]   [SEARCH] Query: data_processing_parser
[00:20:46.803] 
[00:20:46.804] [TURN 5/10]
[00:20:46.804] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:20:46.806] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:20:48.213] 2025-08-27 00:20:48,213 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:48.218]   [INFO] Tool info request: data_processing_parser
[00:20:48.218] 
[00:20:48.218] [TURN 5/10]
[00:20:48.218] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:20:52.374] 2025-08-27 00:20:52,373 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:52.378]   [INFO] Tool info request: data_processing_parser
[00:20:52.378] 
[00:20:52.378] [TURN 6/10]
[00:20:52.379] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:20:52.600] 2025-08-27 00:20:52,599 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:52.608]   [SEARCH] Query: data_processing_filter
[00:20:52.610] 
[00:20:52.610] [TURN 6/10]
[00:20:52.611] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:20:53.854] 2025-08-27 00:20:53,852 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:53.857]   [SEARCH] Query: data_processing_parser
[00:20:53.858] 
[00:20:53.858] [TURN 7/10]
[00:20:53.859] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:20:54.044] 2025-08-27 00:20:54,044 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:54.051]   [INFO] Tool info request: data_processing_filter
[00:20:54.051] 
[00:20:54.052] [TURN 7/10]
[00:20:54.052] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:20:56.216] 2025-08-27 00:20:56,215 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:20:56.219]   [INFO] Tool info request: file_operations_writer
[00:20:56.219] 
[00:20:56.220] [TURN 8/10]
[00:20:56.220] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:00.190] 2025-08-27 00:21:00,189 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:00.193]   [INFO] Tool info request: data_processing_parser
[00:21:00.193] 
[00:21:00.193] [TURN 8/10]
[00:21:00.194] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:04.355] 2025-08-27 00:21:04,354 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:04.359]   [INFO] Tool info request: data_processing_validator
[00:21:04.360] 
[00:21:04.360] [TURN 9/10]
[00:21:04.364] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:08.166] 2025-08-27 00:21:08,166 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:08.171]   [INFO] Tool info request: data_processing_transformer
[00:21:08.172] 
[00:21:08.172] [TURN 10/10]
[00:21:08.177] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:10.620] 2025-08-27 00:21:10,619 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:10.624]   [INFO] Tool info request: data_processing_filter
[00:21:10.650] [DEBUG] Got result for task: has_result=True, save_logs=True
[00:21:10.650] [AI_DEBUG] 测试非完全成功(failure)，准备调用AI分类
[00:21:10.650] [AI_DEBUG] 生成的txt_content长度: 39221
[00:21:10.650] [AI_DEBUG] _ai_classify_with_txt_content called:
[00:21:10.650]   - use_ai_classification=True
[00:21:10.650]   - ai_classifier=True
[00:21:10.650]   - txt_content_len=39221
[00:21:10.650]   - task_model=qwen2.5-3b-instruct
[00:21:10.650] [AI_CLASSIFIER] 直接使用AI分析完整交互记录（跳过规则匹配）
[00:21:10.662] [InteractiveExecutor] No LLM client provided, initializing from api_client_manager
[00:21:10.683] 2025-08-27 00:21:10,682 - api_client_manager - INFO - Created idealab client for model qwen2.5-3b-instruct
[00:21:10.683] [InteractiveExecutor] Initialized client with model: qwen2.5-3b-instruct
[00:21:10.683] [InteractiveExecutor] Using prompt type: optimal for API key selection
[00:21:10.683] [InteractiveExecutor] API model name: qwen2.5-3b-instruct
[00:21:10.683] [MCPEmbeddingManager] Reusing existing singleton instance (id: 140364705371504)
[00:21:10.683] [MCPEmbeddingManager] Current cache size: 30 embeddings
[00:21:10.683] 2025-08-27 00:21:10,683 - mcp_embedding_manager - INFO - Loading index from .mcp_embedding_cache/tool_index.pkl (size: 3723608 bytes)
[00:21:10.783] 2025-08-27 00:21:10,782 - mcp_embedding_manager - INFO - FAISS index loaded
[00:21:10.783] 2025-08-27 00:21:10,782 - mcp_embedding_manager - INFO - Updated dimension to 3072
[00:21:10.783] 2025-08-27 00:21:10,782 - mcp_embedding_manager - INFO - Index loaded successfully: 30 tools
[00:21:10.787] [INFO] Tool embedding index loaded successfully
[00:21:10.790] [INFO] Loaded full tool registry from mcp_generated_library/tool_registry_consolidated.json
[00:21:10.790] [INFO] Operation semantic index initialized
[00:21:10.790] 
[00:21:10.791] [TURN 1/10]
[00:21:10.791] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:12.446] 2025-08-27 00:21:12,446 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:12.453]   [INFO] Tool info request: file_operations_writer
[00:21:12.453] 
[00:21:12.453] [TURN 9/10]
[00:21:12.453] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:17.877] 2025-08-27 00:21:17,872 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:17.885]   [SEARCH] Query: file_operations_reader
[00:21:17.889] 
[00:21:17.889] [TURN 2/10]
[00:21:17.890] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:17.909] 2025-08-27 00:21:17,908 - httpx - INFO - HTTP Request: POST https://85409-me3ofvov-eastus2.cognitiveservices.azure.com/openai/deployments/gpt-5-nano/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
[00:21:17.992] [AI_DEBUG] AI分类结果: category=max_turns_errors, confidence=0.85
[00:21:22.795] 2025-08-27 00:21:22,793 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:22.817]   [INFO] Tool info request: file_operations_reader
[00:21:22.818] 
[00:21:22.818] [TURN 3/10]
[00:21:22.821] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:24.170] 2025-08-27 00:21:24,166 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:24.347]   [SEARCH] Query: data_processing_parser
[00:21:24.348] 
[00:21:24.348] [TURN 4/10]
[00:21:24.348] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:26.256] 2025-08-27 00:21:26,255 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:26.262]   [INFO] Tool info request: file_operations_writer
[00:21:26.264] 
[00:21:26.264] [TURN 10/10]
[00:21:26.264] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:28.761] 2025-08-27 00:21:28,760 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:28.767]   [INFO] Tool info request: data_processing_parser
[00:21:28.769] 
[00:21:28.769] [TURN 5/10]
[00:21:28.770] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:30.179] 2025-08-27 00:21:30,179 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:30.185]   [SEARCH] Query: data_processing_filter
[00:21:30.190] 
[00:21:30.190] [TURN 6/10]
[00:21:30.191] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:34.574] 2025-08-27 00:21:34,573 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:34.578]   [INFO] Tool info request: file_operations_writer
[00:21:34.602] [DEBUG] Got result for task: has_result=True, save_logs=True
[00:21:34.602] [AI_DEBUG] 测试非完全成功(failure)，准备调用AI分类
[00:21:34.603] [AI_DEBUG] 生成的txt_content长度: 42985
[00:21:34.603] [AI_DEBUG] _ai_classify_with_txt_content called:
[00:21:34.603]   - use_ai_classification=True
[00:21:34.603]   - ai_classifier=True
[00:21:34.603]   - txt_content_len=42985
[00:21:34.603]   - task_model=qwen2.5-3b-instruct
[00:21:34.603] [AI_CLASSIFIER] 直接使用AI分析完整交互记录（跳过规则匹配）
[00:21:34.613] [InteractiveExecutor] No LLM client provided, initializing from api_client_manager
[00:21:34.649] 2025-08-27 00:21:34,648 - api_client_manager - INFO - Created idealab client for model qwen2.5-3b-instruct
[00:21:34.649] [InteractiveExecutor] Initialized client with model: qwen2.5-3b-instruct
[00:21:34.649] [InteractiveExecutor] Using prompt type: optimal for API key selection
[00:21:34.649] [InteractiveExecutor] API model name: qwen2.5-3b-instruct
[00:21:34.649] [MCPEmbeddingManager] Reusing existing singleton instance (id: 140364705371504)
[00:21:34.649] [MCPEmbeddingManager] Current cache size: 30 embeddings
[00:21:34.649] 2025-08-27 00:21:34,649 - mcp_embedding_manager - INFO - Loading index from .mcp_embedding_cache/tool_index.pkl (size: 3723608 bytes)
[00:21:34.765] 2025-08-27 00:21:34,765 - mcp_embedding_manager - INFO - FAISS index loaded
[00:21:34.765] 2025-08-27 00:21:34,765 - mcp_embedding_manager - INFO - Updated dimension to 3072
[00:21:34.765] 2025-08-27 00:21:34,765 - mcp_embedding_manager - INFO - Index loaded successfully: 30 tools
[00:21:34.767] [INFO] Tool embedding index loaded successfully
[00:21:34.769] [INFO] Loaded full tool registry from mcp_generated_library/tool_registry_consolidated.json
[00:21:34.770] [INFO] Operation semantic index initialized
[00:21:34.772] 
[00:21:34.772] [TURN 1/10]
[00:21:34.773] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:35.781] 2025-08-27 00:21:35,781 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:35.787]   [INFO] Tool info request: data_processing_filter
[00:21:35.787] 
[00:21:35.787] [TURN 7/10]
[00:21:35.788] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:36.577] 2025-08-27 00:21:36,577 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:36.582]   [SEARCH] Query: network api fetch validate parse
[00:21:36.587] 
[00:21:36.587] [TURN 2/10]
[00:21:36.588] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:39.764] 2025-08-27 00:21:39,762 - httpx - INFO - HTTP Request: POST https://85409-me3ofvov-eastus2.cognitiveservices.azure.com/openai/deployments/gpt-5-nano/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
[00:21:39.769] [AI_DEBUG] AI分类结果: category=tool_call_format_errors, confidence=0.82
[00:21:40.719] 2025-08-27 00:21:40,719 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:40.724]   [SEARCH] Query: data_processing_validator
[00:21:40.725] 
[00:21:40.725] [TURN 8/10]
[00:21:40.725] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:42.332] 2025-08-27 00:21:42,332 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:42.336]   [INFO] Tool info request: data_processing_validator
[00:21:42.336] 
[00:21:42.336] [TURN 9/10]
[00:21:42.337] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:42.631] 2025-08-27 00:21:42,630 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:42.657]   [INFO] Tool info request: network_fetcher
[00:21:42.657] 
[00:21:42.657] [TURN 3/10]
[00:21:42.657] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:46.705] 2025-08-27 00:21:46,702 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:46.712]   [INFO] Tool info request: data_processing_validator
[00:21:46.713] 
[00:21:46.713] [TURN 4/10]
[00:21:46.716] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:46.841] 2025-08-27 00:21:46,840 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:46.857]   [INFO] Tool info request: file_operations_reader
[00:21:46.859] 
[00:21:46.859] [TURN 10/10]
[00:21:46.860] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:48.366] 2025-08-27 00:21:48,365 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:48.372] 2025-08-27 00:21:48,371 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:48.498]   [INFO] Tool info request: data_processing_parser
[00:21:48.502]   [INFO] Tool info request: data_processing_parser
[00:21:48.503] 
[00:21:48.503] [TURN 5/10]
[00:21:48.507] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:48.547] [DEBUG] Got result for task: has_result=True, save_logs=True
[00:21:48.569] [AI_DEBUG] 测试非完全成功(failure)，准备调用AI分类
[00:21:48.572] [AI_DEBUG] 生成的txt_content长度: 45340
[00:21:48.574] [AI_DEBUG] _ai_classify_with_txt_content called:
[00:21:48.574]   - use_ai_classification=True
[00:21:48.579]   - ai_classifier=True
[00:21:48.579]   - txt_content_len=45340
[00:21:48.579]   - task_model=qwen2.5-3b-instruct
[00:21:48.580] [AI_CLASSIFIER] 直接使用AI分析完整交互记录（跳过规则匹配）
[00:21:48.671] [InteractiveExecutor] No LLM client provided, initializing from api_client_manager
[00:21:48.896] 2025-08-27 00:21:48,895 - api_client_manager - INFO - Created idealab client for model qwen2.5-3b-instruct
[00:21:48.896] [InteractiveExecutor] Initialized client with model: qwen2.5-3b-instruct
[00:21:48.896] [InteractiveExecutor] Using prompt type: optimal for API key selection
[00:21:48.896] [InteractiveExecutor] API model name: qwen2.5-3b-instruct
[00:21:48.896] [MCPEmbeddingManager] Reusing existing singleton instance (id: 140364705371504)
[00:21:48.898] [MCPEmbeddingManager] Current cache size: 30 embeddings
[00:21:48.898] 2025-08-27 00:21:48,896 - mcp_embedding_manager - INFO - Loading index from .mcp_embedding_cache/tool_index.pkl (size: 3723608 bytes)
[00:21:49.111] 2025-08-27 00:21:49,111 - mcp_embedding_manager - INFO - FAISS index loaded
[00:21:49.112] 2025-08-27 00:21:49,111 - mcp_embedding_manager - INFO - Updated dimension to 3072
[00:21:49.112] 2025-08-27 00:21:49,111 - mcp_embedding_manager - INFO - Index loaded successfully: 30 tools
[00:21:49.117] [INFO] Tool embedding index loaded successfully
[00:21:49.122] [INFO] Loaded full tool registry from mcp_generated_library/tool_registry_consolidated.json
[00:21:49.127] [INFO] Operation semantic index initialized
[00:21:49.140] 
[00:21:49.140] [TURN 1/10]
[00:21:49.149] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:51.277] 2025-08-27 00:21:51,276 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:51.297]   [SEARCH] Query: file reader writer
[00:21:51.300] 
[00:21:51.300] [TURN 2/10]
[00:21:51.301] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:52.657] 2025-08-27 00:21:52,656 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:52.661]   [INFO] Tool info request: file_operations_reader
[00:21:52.661] 
[00:21:52.661] [TURN 3/10]
[00:21:52.663] 2025-08-27 00:21:52,663 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:52.665]   [INFO] Tool info request: network_fetcher
[00:21:52.665] 
[00:21:52.665] [TURN 6/10]
[00:21:52.665] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:52.670] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:53.963] 2025-08-27 00:21:53,962 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:53.967]   [INFO] Tool info request: file_operations_reader
[00:21:53.968] 
[00:21:53.968] [TURN 4/10]
[00:21:53.969] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:54.040] 2025-08-27 00:21:54,040 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:54.045]   [INFO] Tool info request: data_processing_validator
[00:21:54.045] 
[00:21:54.045] [TURN 7/10]
[00:21:54.045] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:56.366] 2025-08-27 00:21:56,347 - httpx - INFO - HTTP Request: POST https://85409-me3ofvov-eastus2.cognitiveservices.azure.com/openai/deployments/gpt-5-nano/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
[00:21:56.378] 2025-08-27 00:21:56,378 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:56.394] [AI_DEBUG] AI分类结果: category=max_turns_errors, confidence=0.78
[00:21:56.399]   [INFO] Tool info request: data_processing_parser
[00:21:56.400] 
[00:21:56.400] [TURN 8/10]
[00:21:56.402] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:58.859] 2025-08-27 00:21:58,858 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:58.863]   [INFO] Tool info request: network_fetcher
[00:21:58.863] 
[00:21:58.863] [TURN 9/10]
[00:21:58.864] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:21:59.013] 2025-08-27 00:21:59,013 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:21:59.018]   [NO_ACTION] Quick feedback provided - no valid action format detected
[00:21:59.018] 
[00:21:59.018] [TURN 5/10]
[00:21:59.018] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:22:00.508] 2025-08-27 00:22:00,500 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:22:00.517]   [INFO] Tool info request: data_processing_validator
[00:22:00.517] 
[00:22:00.518] [TURN 10/10]
[00:22:00.518] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:22:02.233] 2025-08-27 00:22:02,232 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:22:02.242]   [NO_ACTION] Quick feedback provided - no valid action format detected
[00:22:02.242] 
[00:22:02.242] [TURN 6/10]
[00:22:02.242] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:22:03.197] 2025-08-27 00:22:03,196 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:22:03.202]   [INFO] Tool info request: data_processing_parser
[00:22:03.215] [DEBUG] Got result for task: has_result=True, save_logs=True
[00:22:03.215] [AI_DEBUG] 测试非完全成功(failure)，准备调用AI分类
[00:22:03.216] [AI_DEBUG] 生成的txt_content长度: 30787
[00:22:03.217] [AI_DEBUG] _ai_classify_with_txt_content called:
[00:22:03.217]   - use_ai_classification=True
[00:22:03.217]   - ai_classifier=True
[00:22:03.217]   - txt_content_len=30787
[00:22:03.217]   - task_model=qwen2.5-3b-instruct
[00:22:03.217] [AI_CLASSIFIER] 直接使用AI分析完整交互记录（跳过规则匹配）
[00:22:03.634] 2025-08-27 00:22:03,633 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:22:03.637]   [NO_ACTION] Quick feedback provided - no valid action format detected
[00:22:03.637] 
[00:22:03.637] [TURN 7/10]
[00:22:03.637] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:22:05.323] 2025-08-27 00:22:05,322 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:22:05.328]   [NO_ACTION] Quick feedback provided - no valid action format detected
[00:22:05.328] 
[00:22:05.328] [TURN 8/10]
[00:22:05.329] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:22:08.260] 2025-08-27 00:22:08,259 - httpx - INFO - HTTP Request: POST https://85409-me3ofvov-eastus2.cognitiveservices.azure.com/openai/deployments/gpt-5-nano/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
[00:22:08.263] [AI_DEBUG] AI分类结果: category=tool_call_format_errors, confidence=0.85
[00:22:09.359] 2025-08-27 00:22:09,359 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:22:09.361]   [NO_ACTION] Quick feedback provided - no valid action format detected
[00:22:09.361] 
[00:22:09.361] [TURN 9/10]
[00:22:09.362] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:22:10.841] 2025-08-27 00:22:10,841 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:22:10.842]   [NO_ACTION] Quick feedback provided - no valid action format detected
[00:22:10.842] 
[00:22:10.842] [TURN 10/10]
[00:22:10.842] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[00:22:12.427] 2025-08-27 00:22:12,424 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[00:22:12.447]   [NO_ACTION] Quick feedback provided - no valid action format detected
[00:22:12.447] [ASSISTED] Task received 7 format helps, final result: failure
[00:22:12.470] [DEBUG] Got result for task: has_result=True, save_logs=True
[00:22:12.480] [AI_DEBUG] 测试非完全成功(failure)，准备调用AI分类
[00:22:12.480] [AI_DEBUG] 生成的txt_content长度: 26171
[00:22:12.482] [AI_DEBUG] _ai_classify_with_txt_content called:
[00:22:12.482]   - use_ai_classification=True
[00:22:12.482]   - ai_classifier=True
[00:22:12.482]   - txt_content_len=26171
[00:22:12.482]   - task_model=qwen2.5-3b-instruct
[00:22:12.482] [AI_CLASSIFIER] 直接使用AI分析完整交互记录（跳过规则匹配）
[00:22:16.764] 2025-08-27 00:22:16,762 - httpx - INFO - HTTP Request: POST https://85409-me3ofvov-eastus2.cognitiveservices.azure.com/openai/deployments/gpt-5-nano/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
[00:22:16.771] [AI_DEBUG] AI分类结果: category=tool_call_format_errors, confidence=0.85
[00:22:16.776] 💾 智能Checkpoint: 保存5个结果...
[00:22:16.776]    触发原因: 数量=5, 时间=0.0s, 强制=True
[00:22:16.781] 2025-08-27 00:22:16,780 - result_collector - INFO - 📤 已提交 qwen2.5-3b-instruct 的 1 个结果到收集器: qwen2.5-3b-instruct_87574_1756268536779141.json
[00:22:16.781] 2025-08-27 00:22:16,781 - result_collector - INFO - 📤 已提交 qwen2.5-3b-instruct 的 1 个结果到收集器: qwen2.5-3b-instruct_87574_1756268536781224.json
[00:22:16.782] 2025-08-27 00:22:16,782 - result_collector - INFO - 📤 已提交 qwen2.5-3b-instruct 的 1 个结果到收集器: qwen2.5-3b-instruct_87574_1756268536781987.json
[00:22:16.783] 2025-08-27 00:22:16,783 - result_collector - INFO - 📤 已提交 qwen2.5-3b-instruct 的 1 个结果到收集器: qwen2.5-3b-instruct_87574_1756268536782624.json
[00:22:16.784] 2025-08-27 00:22:16,784 - result_collector - INFO - 📤 已提交 qwen2.5-3b-instruct 的 1 个结果到收集器: qwen2.5-3b-instruct_87574_1756268536783790.json
[00:22:16.784] ✅ Checkpoint完成: 成功保存 5/5 个结果
[00:22:16.784] 
[00:22:16.784] [INFO] Batch writing 5 records to database (qwen2.5-3b-instruct:5)
[00:22:16.785] 2025-08-27 00:22:16,784 - batch_test_runner - INFO - Batch writing 5 records to database (qwen2.5-3b-instruct:5)
[00:22:16.786] 2025-08-27 00:22:16,786 - result_collector - INFO - 📤 已提交 qwen2.5-3b-instruct 的 5 个结果到收集器: qwen2.5-3b-instruct_87574_1756268536785328.json
[00:22:16.786] [INFO] Successfully wrote 5/5 records (qwen2.5-3b-instruct:5)
[00:22:16.786] 2025-08-27 00:22:16,786 - batch_test_runner - INFO - Successfully wrote 5/5 records (qwen2.5-3b-instruct:5)
[00:22:16.788] [INFO] Runtime error report saved to: runtime_reports/runtime_error_report_20250827_002216.json
[00:22:16.803] 2025-08-27 00:22:16,803 - batch_test_runner - INFO - Database saved successfully
[00:22:16.804] 
[00:22:16.804] 📊 Statistics saved to: /Users/ruicheng/Documents/GitHub/WorkflowBench/pilot_bench_cumulative_results/master_database.json
[00:22:16.804] 2025-08-27 00:22:16,804 - batch_test_runner - INFO - Statistics saved to: /Users/ruicheng/Documents/GitHub/WorkflowBench/pilot_bench_cumulative_results/master_database.json
[00:22:16.804] 2025-08-27 00:22:16,804 - batch_test_runner - INFO - ============================================================
[00:22:16.804] 2025-08-27 00:22:16,804 - batch_test_runner - INFO - Batch test completed at 2025-08-27T00:22:16.804469
[00:22:16.804] 2025-08-27 00:22:16,804 - batch_test_runner - INFO - Summary:
[00:22:16.804] 2025-08-27 00:22:16,804 - batch_test_runner - INFO -   - Total tests: 5
[00:22:16.804] 2025-08-27 00:22:16,804 - batch_test_runner - INFO -   - Successful: 0
[00:22:16.804] 2025-08-27 00:22:16,804 - batch_test_runner - INFO -   - Failed: 5
[00:22:16.804] 2025-08-27 00:22:16,804 - batch_test_runner - INFO -   - Success rate: 0.0%
[00:22:16.804] 2025-08-27 00:22:16,804 - batch_test_runner - INFO -   - Log file: logs/batch_test_20250827_002025.log
[00:22:16.804] 2025-08-27 00:22:16,804 - batch_test_runner - INFO - ============================================================
[00:22:16.805] 
[00:22:16.805] ✅ 批测试完成
[00:22:16.805]    成功: 0/5
[00:22:16.805]    失败: 5/5
[00:22:16.805] 📤 提交 5 个结果到ResultCollector...
