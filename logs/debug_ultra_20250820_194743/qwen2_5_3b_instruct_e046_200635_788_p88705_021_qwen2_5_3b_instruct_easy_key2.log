===== 分片 qwen2.5-3b-instruct_easy_key2 =====
时间: 2025-08-20T20:06:35.789959
模型: qwen2.5-3b-instruct
实例: qwen-key2
命令: python -u smart_batch_runner.py --model qwen2.5-3b-instruct --deployment qwen-key2 --prompt-types optimal --difficulty easy --task-types all --num-instances 1 --max-workers 5 --tool-success-rate 0.8 --batch-commit --checkpoint-interval 20 --ai-classification --no-adaptive --qps 50
环境变量:
  STORAGE_FORMAT=parquet
  PYTHONFAULTHANDLER=1
  PYTHONUNBUFFERED=1
==================================================

[20:06:37.517] 2025-08-20 20:06:37,517 - faiss.loader - INFO - Loading faiss.
[20:06:37.534] 2025-08-20 20:06:37,534 - faiss.loader - INFO - Successfully loaded faiss.
[20:06:38.398] [INFO] 使用Parquet存储格式
[20:06:38.720] [INFO] 使用Parquet存储格式
[20:06:38.722] [INFO] 使用PARQUET存储格式
[20:06:38.723] 
[20:06:38.723] ============================================================
[20:06:38.723] 智能批测试: qwen2.5-3b-instruct (idealab)
[20:06:38.723] Prompt types: ['optimal']
[20:06:38.723] 难度: easy
[20:06:38.723] 目标: 每种配置 1 个实例
[20:06:38.723] ============================================================
[20:06:38.752] ○ simple_task         :   0/  1 已完成 (需要补充 1 个)
[20:06:38.760] ○ basic_task          :   0/  1 已完成 (需要补充 1 个)
[20:06:38.768] ○ data_pipeline       :   0/  1 已完成 (需要补充 1 个)
[20:06:38.776] ○ api_integration     :   0/  1 已完成 (需要补充 1 个)
[20:06:38.784] ○ multi_stage_pipeline:   0/  1 已完成 (需要补充 1 个)
[20:06:38.784] 
[20:06:38.784] ⏳ 需要运行 5 个新测试
[20:06:38.784] 
[20:06:38.784] ▶ 准备 simple_task (1 个实例)...
[20:06:38.784] 
[20:06:38.784] ▶ 准备 basic_task (1 个实例)...
[20:06:38.784] 
[20:06:38.784] ▶ 准备 data_pipeline (1 个实例)...
[20:06:38.784] 
[20:06:38.784] ▶ 准备 api_integration (1 个实例)...
[20:06:38.784] 
[20:06:38.784] ▶ 准备 multi_stage_pipeline (1 个实例)...
[20:06:38.784] 
[20:06:38.784] ▶ 开始执行 5 个测试...
[20:06:38.784] 📦 批量提交模式：每20个测试保存一次
[20:06:38.784] ⚠️  检测到idealab API，调整并发: workers=3, qps=5.0
[20:06:38.789] 2025-08-20 20:06:38,789 - smart_model_router - INFO - ✨ Using USER's Azure endpoint for gpt-5-nano
[20:06:38.876] 2025-08-20 20:06:38,876 - txt_based_ai_classifier - INFO - TXT-based AI classifier initialized with gpt-5-nano (parameter-filtered)
[20:06:38.876] [AI_DEBUG] AI分类器初始化成功: <txt_based_ai_classifier.TxtBasedAIClassifier object at 0x16e77e2d0>
[20:06:38.876] 2025-08-20 20:06:38,876 - batch_test_runner - INFO - 基于TXT文件的AI错误分类系统已启用 (使用gpt-5-nano)
[20:06:38.876] [DEBUG] BatchTestRunner initialized with save_logs=True, enable_database_updates=True, use_ai_classification=True, checkpoint_interval=20
[20:06:38.877] 2025-08-20 20:06:38,877 - batch_test_runner - INFO - ============================================================
[20:06:38.877] 2025-08-20 20:06:38,877 - batch_test_runner - INFO - Batch test runner initialized
[20:06:38.877] 2025-08-20 20:06:38,877 - batch_test_runner - INFO - Configuration: debug=False, silent=False, adaptive=False
[20:06:38.877] 2025-08-20 20:06:38,877 - batch_test_runner - INFO - Log file: logs/batch_test_20250820_200638.log
[20:06:38.877] 2025-08-20 20:06:38,877 - batch_test_runner - INFO - ============================================================
[20:06:38.877] 2025-08-20 20:06:38,877 - batch_test_runner - INFO - Running 5 tests with 3 workers, QPS limit: 5.0
[20:06:38.877] 2025-08-20 20:06:38,877 - batch_test_runner - INFO - Initializing test components...
[20:06:39.172] 2025-08-20 20:06:39,172 - batch_test_runner - INFO - Found pre-generated workflows, will use them to save memory
[20:06:39.172] 2025-08-20 20:06:39,172 - batch_test_runner - INFO - ⚡ [OPTIMIZATION] Using MDPWorkflowGenerator with SKIP_MODEL_LOADING=true
[20:06:39.172] 2025-08-20 20:06:39,172 - batch_test_runner - INFO - ⚡ This saves ~350MB memory while keeping all functionality intact
[20:06:39.172] [DEBUG] Creating new ToolCapabilityManager instance
[20:06:39.172] [OperationEmbeddingIndex] Initializing with unified API client manager
[20:06:39.172] ['config/config.json', 'config/api_keys.json', 'config/api-keys.json']
[20:06:39.172] 2025-08-20 20:06:39,172 - api_client_manager - INFO - Loaded configuration from config/config.json
[20:06:39.178] [OperationEmbeddingIndex] OpenAI client initialized with model: gpt-4o-mini
[20:06:39.178] [OperationEmbeddingIndex] Using embedding model: text-embedding-3-large
[20:06:39.178] [OperationEmbeddingIndex] Detecting actual embedding dimension...
[20:06:40.078] 2025-08-20 20:06:40,078 - httpx - INFO - HTTP Request: POST https://archer222arc.openai.azure.com/openai/deployments/text-embedding-3-large/embeddings?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
[20:06:40.080] [OperationEmbeddingIndex] Detected embedding dimension: 3072
[20:06:40.147] [INFO] Loaded 4150 embeddings from persistent cache
[20:06:40.147] [OperationEmbeddingIndex] Initialized with 4150 cached embeddings
[20:06:40.149] [INFO] Loaded 15 LLM-enhanced operation definitions from cache
[20:06:40.149] [INFO] Found cached operation index at .mcp_operation_cache/operation_index.pkl
[20:06:40.149] [INFO] Loading operation index from .mcp_operation_cache/operation_index.pkl
[20:06:40.176] [INFO] Successfully loaded FAISS index with dimension 3072
[20:06:40.176] [INFO] Operation index loaded successfully from .mcp_operation_cache/operation_index.pkl
[20:06:40.176] [INFO] Loaded 15 operations with dimension 3072
[20:06:40.176] [INFO] Successfully loaded cached index
[20:06:40.176] [INFO] Operation semantic index initialized
[20:06:40.176] [INFO] Using device: cpu
[20:06:40.177] [INFO] Initialized tool success tracking attributes
[20:06:40.177] [INFO] Initializing embedding manager for enhanced tool selection
[20:06:40.177] [MCPEmbeddingManager] Creating new singleton instance
[20:06:40.177] [MCPEmbeddingManager] Initializing with unified API client manager
[20:06:40.185] [MCPEmbeddingManager] Using embedding model: text-embedding-3-large
[20:06:40.185] [MCPEmbeddingManager] Client initialized successfully
[20:06:40.185] 2025-08-20 20:06:40,185 - mcp_embedding_manager - INFO - Loading embedding cache from .mcp_embedding_cache/embedding_cache.pkl (size: 173790244 bytes)
[20:06:40.313] 2025-08-20 20:06:40,313 - mcp_embedding_manager - INFO - Loaded 7050 cached embeddings
[20:06:40.537] 2025-08-20 20:06:40,537 - mcp_embedding_manager - INFO - Loaded search cache with 3 entries
[20:06:40.537] 2025-08-20 20:06:40,537 - mcp_embedding_manager - INFO - Initialized operation mappings with 149 terms
[20:06:40.560] 2025-08-20 20:06:40,560 - mcp_embedding_manager - INFO - Loading embedding cache from .mcp_embedding_cache/embedding_cache.pkl (size: 173790244 bytes)
[20:06:40.620] 2025-08-20 20:06:40,620 - mcp_embedding_manager - INFO - Loaded 7050 cached embeddings
[20:06:40.956] 2025-08-20 20:06:40,956 - mcp_embedding_manager - INFO - [Cache] Loaded 9650 entries from file
[20:06:40.956] [MCPEmbeddingManager] Singleton created with 0 cached embeddings
[20:06:40.956] [INFO] Loading embedding index from .mcp_embedding_cache/tool_index.pkl
[20:06:40.956] 2025-08-20 20:06:40,956 - mcp_embedding_manager - INFO - Loading index from .mcp_embedding_cache/tool_index.pkl (size: 3723608 bytes)
[20:06:41.310] 2025-08-20 20:06:41,309 - mcp_embedding_manager - INFO - FAISS index loaded
[20:06:41.310] 2025-08-20 20:06:41,310 - mcp_embedding_manager - INFO - Updated dimension to 3072
[20:06:41.310] 2025-08-20 20:06:41,310 - mcp_embedding_manager - INFO - Index loaded successfully: 30 tools
[20:06:41.312] [SUCCESS] Loaded 30 tool embeddings
[20:06:41.312] 2025-08-20 20:06:41,312 - mdp_workflow_generator - INFO - Embedding index loaded successfully
[20:06:41.312] [SUCCESS] Embedding manager initialized with 30 tools
[20:06:41.312] [INFO] Initialized task types: ['simple_task', 'data_pipeline', 'api_integration', 'basic_task', 'multi_stage_pipeline']
[20:06:41.312] [INFO] Loading full MCP protocol registry...
[20:06:41.313] 2025-08-20 20:06:41,313 - mdp_workflow_generator - INFO - Loaded full tool registry from mcp_generated_library/tool_registry_consolidated.json
[20:06:41.313] [INFO] Loaded full tool registry with 30 tools
[20:06:41.313] 2025-08-20 20:06:41,313 - mdp_workflow_generator - INFO - Loading tools from mcp_generated_library/tool_registry_consolidated.json
[20:06:41.313] [INFO] Loading tools from mcp_generated_library/tool_registry_consolidated.json
[20:06:41.313] [INFO] Embedding manager ready with 30 tools
[20:06:41.313] [WARNING] Embedding manager exists but has no embeddings
[20:06:41.313] [INFO] Consider rebuilding index with: embedding_manager.build_index(tools_path)
[20:06:41.313] [INFO] Tool file_operations_reader: semantic operations = ['read', 'write', 'parse', 'transform']
[20:06:41.314] [INFO] Tool file_operations_scanner: semantic operations = ['read', 'write', 'parse', 'transform']
[20:06:41.314] [INFO] Tool network_fetcher: semantic operations = ['read', 'write', 'validate', 'integrate']
[20:06:41.314] [INFO] Tool integration_authenticator: semantic operations = ['integrate', 'transform', 'validate']
[20:06:41.314] [INFO] Tool utility_logger: semantic operations = ['cache', 'process']
[20:06:41.314] [INFO] Tool data_processing_parser: semantic operations = ['validate', 'transform', 'filter', 'aggregate']
[20:06:41.314] [INFO] Tool data_processing_transformer: semantic operations = ['validate', 'transform', 'filter', 'aggregate']
[20:06:41.314] [INFO] Tool data_processing_validator: semantic operations = ['validate', 'transform', 'filter', 'aggregate']
[20:06:41.314] [INFO] Tool network_validator: semantic operations = ['read', 'write', 'validate', 'integrate']
[20:06:41.314] [INFO] Tool computation_calculator: semantic operations = ['compute', 'aggregate', 'transform']
[20:06:41.314] [INFO] Tool data_processing_filter: semantic operations = ['validate', 'transform', 'filter', 'aggregate']
[20:06:41.314] [INFO] Tool data_processing_aggregator: semantic operations = ['validate', 'transform', 'filter', 'aggregate']
[20:06:41.314] [INFO] Tool file_operations_converter: semantic operations = ['read', 'write', 'parse', 'transform']
[20:06:41.314] [INFO] Tool file_operations_compressor: semantic operations = ['read', 'write', 'parse', 'transform']
[20:06:41.314] [INFO] Tool file_operations_writer: semantic operations = ['read', 'write', 'parse', 'transform']
[20:06:41.314] [INFO] Tool network_poster: semantic operations = ['read', 'write', 'validate', 'integrate']
[20:06:41.314] [INFO] Tool network_monitor: semantic operations = ['read', 'write', 'validate', 'integrate']
[20:06:41.314] [INFO] Tool network_router: semantic operations = ['read', 'write', 'validate', 'integrate']
[20:06:41.314] [INFO] Tool computation_predictor: semantic operations = ['compute', 'aggregate', 'transform']
[20:06:41.314] [INFO] Tool computation_analyzer: semantic operations = ['compute', 'aggregate', 'transform']
[20:06:41.314] [INFO] Tool computation_simulator: semantic operations = ['compute', 'aggregate', 'transform']
[20:06:41.314] [INFO] Tool computation_optimizer: semantic operations = ['compute', 'aggregate', 'transform']
[20:06:41.314] [INFO] Tool integration_mapper: semantic operations = ['integrate', 'transform', 'validate']
[20:06:41.314] [INFO] Tool integration_queue: semantic operations = ['integrate', 'transform', 'validate']
[20:06:41.314] [INFO] Tool integration_scheduler: semantic operations = ['integrate', 'transform', 'validate']
[20:06:41.314] [INFO] Tool integration_connector: semantic operations = ['integrate', 'transform', 'validate']
[20:06:41.314] [INFO] Tool utility_cache: semantic operations = ['cache', 'process']
[20:06:41.314] [INFO] Tool utility_tracker: semantic operations = ['cache', 'process']
[20:06:41.314] [INFO] Tool utility_helper: semantic operations = ['cache', 'process']
[20:06:41.314] [INFO] Tool utility_notifier: semantic operations = ['cache', 'process']
[20:06:41.314] 2025-08-20 20:06:41,314 - mdp_workflow_generator - INFO - Loaded 30 tools
[20:06:41.314] [INFO] Setting default state_dim based on loaded tools
[20:06:41.314] [INFO] state_dim set to 345 (tools=30, base=340, task_types=5)
[20:06:41.314] 2025-08-20 20:06:41,314 - mdp_workflow_generator - INFO - Default state_dim calculated: 345
[20:06:41.314] [INFO] Setting default action_dim based on loaded tools
[20:06:41.314] [INFO] action_dim set to 31 (tools=30 + NO_OP)
[20:06:41.314] 2025-08-20 20:06:41,314 - mdp_workflow_generator - INFO - Default action_dim calculated: 31
[20:06:41.314] [INFO] ⚡ SKIP_MODEL_LOADING=true - Skipping neural network model loading
[20:06:41.314] [INFO] ⚡ Memory optimization: Saving ~350MB by not loading model
[20:06:41.314] [INFO] ⚡ Will use pre-generated workflows or random policy
[20:06:41.314] 2025-08-20 20:06:41,314 - mdp_workflow_generator - INFO - Model loading skipped for memory optimization (SKIP_MODEL_LOADING=true)
[20:06:41.314] [INFO] Initializing TaskManager...
[20:06:42.625] 2025-08-20 20:06:42,625 - unified_training_manager - INFO - Using device: cpu
[20:06:42.724] 2025-08-20 20:06:42,724 - unified_training_manager - INFO - Task filtering results:
[20:06:42.724] 2025-08-20 20:06:42,724 - unified_training_manager - INFO -   Total: 5040 -> 5040
[20:06:42.724] 2025-08-20 20:06:42,724 - unified_training_manager - INFO -   simple_task: 320 -> 320
[20:06:42.724] 2025-08-20 20:06:42,724 - unified_training_manager - INFO -   data_pipeline: 1520 -> 1520
[20:06:42.724] 2025-08-20 20:06:42,724 - unified_training_manager - INFO -   api_integration: 1360 -> 1360
[20:06:42.724] 2025-08-20 20:06:42,724 - unified_training_manager - INFO -   basic_task: 1200 -> 1200
[20:06:42.724] 2025-08-20 20:06:42,724 - unified_training_manager - INFO -   multi_stage_pipeline: 640 -> 640
[20:06:42.724] 2025-08-20 20:06:42,724 - unified_training_manager - INFO - Loaded 5040 tasks from mcp_generated_library/task_library_all_difficulties.json
[20:06:42.726] 2025-08-20 20:06:42,726 - unified_training_manager - INFO - Organized tasks: 5 types, 3 complexity levels, 5 difficulty levels
[20:06:42.726] [TaskManager] Difficulty level 'easy': 1096 tasks
[20:06:42.726] [TaskManager] Difficulty level 'very_easy': 856 tasks
[20:06:42.726] [TaskManager] Difficulty level 'medium': 1136 tasks
[20:06:42.726] [TaskManager] Difficulty level 'hard': 1096 tasks
[20:06:42.726] [TaskManager] Difficulty level 'very_hard': 856 tasks
[20:06:42.728] [INFO] TaskManager initialized with 5040 tasks
[20:06:42.728] [INFO] Task types available: ['basic_task', 'data_pipeline', 'multi_stage_pipeline', 'simple_task', 'api_integration']
[20:06:42.728] [INFO] Initializing ToolCallVerifier...
[20:06:42.729] [INFO] ToolCallVerifier initialized with 30 tools
[20:06:42.729] [INFO] Output tools identified: 1
[20:06:42.729] [INFO] Component initialization status:
[20:06:42.729]   - embedding_manager: initialized
[20:06:42.729]   - task_manager: initialized
[20:06:42.729]   - output_verifier: initialized
[20:06:42.729]   - tool_capability_manager: initialized
[20:06:42.729]   - tool_success_rates: initialized with 0 entries
[20:06:42.729] [INFO] MDPWorkflowGenerator initialization complete
[20:06:42.729] 2025-08-20 20:06:42,729 - mdp_workflow_generator - INFO - MDPWorkflowGenerator initialized successfully
[20:06:42.729] 2025-08-20 20:06:42,729 - batch_test_runner - INFO - ✅ MDPWorkflowGenerator initialized successfully:
[20:06:42.729] 2025-08-20 20:06:42,729 - batch_test_runner - INFO -   - task_manager: ✓
[20:06:42.729] 2025-08-20 20:06:42,729 - batch_test_runner - INFO -   - output_verifier: ✓
[20:06:42.729] 2025-08-20 20:06:42,729 - batch_test_runner - INFO -   - embedding_manager: ✓
[20:06:42.729] 2025-08-20 20:06:42,729 - batch_test_runner - INFO -   - tool_capabilities: 30 tools
[20:06:42.729] 2025-08-20 20:06:42,729 - batch_test_runner - INFO -   - neural network: skipped (saving 350MB)
[20:06:42.729] [MCPEmbeddingManager] Reusing existing singleton instance (id: 13375393712)
[20:06:42.729] [MCPEmbeddingManager] Current cache size: 30 embeddings
[20:06:42.729] [FlawedWorkflowGenerator] Initialized with 30 tools
[20:06:42.729] [FlawedWorkflowGenerator] RAG support: disabled
[20:06:42.730] DEBUG: Checking generator attributes
[20:06:42.730]   - has tool_capabilities: True
[20:06:42.730]   - has tool_capability_manager: True
[20:06:42.730]   - has task_manager: True
[20:06:42.730] [INFO] Loaded 30 tools from generator
[20:06:42.730] [INFO] Tool names sample: ['computation_analyzer', 'computation_calculator', 'computation_optimizer', 'computation_predictor', 'computation_simulator']...
[20:06:42.730] [MCPEmbeddingManager] Reusing existing singleton instance (id: 13375393712)
[20:06:42.730] [MCPEmbeddingManager] Current cache size: 30 embeddings
[20:06:42.730] [INFO] Initializing LLM client using APIClientManager
[20:06:42.736] [INFO] Using Azure OpenAI client
[20:06:42.736] [DEBUG] Checking if generator has tool_capability_manager attribute
[20:06:42.736] [DEBUG] Creating FlawedWorkflowGenerator with correct parameters
[20:06:42.736] [MCPEmbeddingManager] Reusing existing singleton instance (id: 13375393712)
[20:06:42.736] [MCPEmbeddingManager] Current cache size: 30 embeddings
[20:06:42.736] [FlawedWorkflowGenerator] Initialized with 30 tools
[20:06:42.736] [FlawedWorkflowGenerator] RAG support: enabled
[20:06:42.736] [INFO] FlawedWorkflowGenerator initialized successfully
[20:06:42.736] [INFO] Initializing StableScorer for Phase 2 scoring
[20:06:42.736] <tool_capability_manager.ToolCapabilityManager object at 0x31d0cb4d0>
[20:06:42.736] [MCPEmbeddingManager] Reusing existing singleton instance (id: 13375393712)
[20:06:42.736] [MCPEmbeddingManager] Current cache size: 30 embeddings
[20:06:42.736] [INFO] Loaded tool success history for 0 tools
[20:06:42.736] [INFO] StableScorer initialized with semantic capability
[20:06:42.736] [INFO] StableScorer initialized successfully
[20:06:42.736] [INFO] Loading task instances...
[20:06:42.736] [INFO] Loading task instances from mcp_generated_library/difficulty_versions/task_library_enhanced_v3_easy.json
[20:06:42.743] [INFO] Loaded 630 task instances
[20:06:42.743] [INFO] Task instances loaded: ['basic_task', 'data_pipeline', 'multi_stage_pipeline', 'simple_task', 'api_integration']
[20:06:42.743] 2025-08-20 20:06:42,743 - batch_test_runner - INFO - Loading task library with pre-generated workflows: task_library_enhanced_v3_easy_with_workflows.json
[20:06:42.745] 2025-08-20 20:06:42,745 - batch_test_runner - INFO - Using partial loading: 20 tasks per type
[20:06:43.056] 2025-08-20 20:06:43,056 - batch_test_runner - INFO - Partially loaded 100 tasks (vs 630 total)
[20:06:43.056] 2025-08-20 20:06:43,056 - batch_test_runner - INFO - Estimated memory saving: 84.1%
[20:06:43.072] 2025-08-20 20:06:43,072 - batch_test_runner - INFO - Initialization complete
[20:06:43.097] 2025-08-20 20:06:43,097 - batch_test_runner - INFO - Starting batch test with 5 tasks, 3 workers
[20:06:43.097] 2025-08-20 20:06:43,097 - batch_test_runner - INFO - Each task timeout: 10 minutes, Total batch timeout: 20 minutes
[20:06:43.098] [InteractiveExecutor] No LLM client provided, initializing from api_client_manager
[20:06:43.098] 2025-08-20 20:06:43,098 - smart_model_router - INFO - Using idealab for qwen2.5-3b-instruct
[20:06:43.105] 2025-08-20 20:06:43,105 - api_client_manager - INFO - Created idealab client for model qwen2.5-3b-instruct
[20:06:43.105] [InteractiveExecutor] Initialized client with model: qwen2.5-3b-instruct
[20:06:43.105] [InteractiveExecutor] Using prompt type: optimal for API key selection
[20:06:43.106] [InteractiveExecutor] API model name: qwen2.5-3b-instruct
[20:06:43.106] [MCPEmbeddingManager] Reusing existing singleton instance (id: 13375393712)
[20:06:43.106] [MCPEmbeddingManager] Current cache size: 30 embeddings
[20:06:43.106] 2025-08-20 20:06:43,106 - mcp_embedding_manager - INFO - Loading index from .mcp_embedding_cache/tool_index.pkl (size: 3723608 bytes)
[20:06:43.396] 2025-08-20 20:06:43,396 - mcp_embedding_manager - INFO - FAISS index loaded
[20:06:43.396] [InteractiveExecutor] No LLM client provided, initializing from api_client_manager2025-08-20 20:06:43,396 - mcp_embedding_manager - INFO - Updated dimension to 3072
[20:06:43.396] 2025-08-20 20:06:43,396 - mcp_embedding_manager - INFO - Index loaded successfully: 30 tools
[20:06:43.399] [INFO] Tool embedding index loaded successfully
[20:06:43.399] 
[20:06:43.399] [INFO] Loaded full tool registry from mcp_generated_library/tool_registry_consolidated.json
[20:06:43.400] [INFO] Operation semantic index initialized
[20:06:43.400] 
[20:06:43.400] [TURN 1/10]
[20:06:43.400] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:06:43.410] 2025-08-20 20:06:43,410 - api_client_manager - INFO - Created idealab client for model qwen2.5-3b-instruct
[20:06:43.410] [InteractiveExecutor] Initialized client with model: qwen2.5-3b-instruct
[20:06:43.410] [InteractiveExecutor] Using prompt type: optimal for API key selection
[20:06:43.413] [InteractiveExecutor] API model name: qwen2.5-3b-instruct
[20:06:43.414] [MCPEmbeddingManager] Reusing existing singleton instance (id: 13375393712)
[20:06:43.414] [MCPEmbeddingManager] Current cache size: 30 embeddings
[20:06:43.414] 2025-08-20 20:06:43,414 - mcp_embedding_manager - INFO - Loading index from .mcp_embedding_cache/tool_index.pkl (size: 3723608 bytes)
[20:06:43.432] 2025-08-20 20:06:43,432 - mcp_embedding_manager - INFO - FAISS index loaded
[20:06:43.432] 2025-08-20 20:06:43,432 - mcp_embedding_manager - INFO - Updated dimension to 3072
[20:06:43.432] 2025-08-20 20:06:43,432 - mcp_embedding_manager - INFO - Index loaded successfully: 30 tools
[20:06:43.435] [INFO] Tool embedding index loaded successfully
[20:06:43.436] [INFO] Loaded full tool registry from mcp_generated_library/tool_registry_consolidated.json
[20:06:43.436] [INFO] Operation semantic index initialized
[20:06:43.437] 
[20:06:43.437] [TURN 1/10]
[20:06:43.437] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:06:43.591] [InteractiveExecutor] No LLM client provided, initializing from api_client_manager
[20:06:43.598] 2025-08-20 20:06:43,598 - api_client_manager - INFO - Created idealab client for model qwen2.5-3b-instruct
[20:06:43.598] [InteractiveExecutor] Initialized client with model: qwen2.5-3b-instruct
[20:06:43.598] [InteractiveExecutor] Using prompt type: optimal for API key selection
[20:06:43.599] [InteractiveExecutor] API model name: qwen2.5-3b-instruct
[20:06:43.599] [MCPEmbeddingManager] Reusing existing singleton instance (id: 13375393712)
[20:06:43.599] [MCPEmbeddingManager] Current cache size: 30 embeddings
[20:06:43.599] 2025-08-20 20:06:43,599 - mcp_embedding_manager - INFO - Loading index from .mcp_embedding_cache/tool_index.pkl (size: 3723608 bytes)
[20:06:43.615] 2025-08-20 20:06:43,615 - mcp_embedding_manager - INFO - FAISS index loaded
[20:06:43.616] 2025-08-20 20:06:43,615 - mcp_embedding_manager - INFO - Updated dimension to 3072
[20:06:43.616] 2025-08-20 20:06:43,615 - mcp_embedding_manager - INFO - Index loaded successfully: 30 tools
[20:06:43.618] [INFO] Tool embedding index loaded successfully
[20:06:43.619] [INFO] Loaded full tool registry from mcp_generated_library/tool_registry_consolidated.json
[20:06:43.619] [INFO] Operation semantic index initialized
[20:06:43.619] 
[20:06:43.619] [TURN 1/10]
[20:06:43.619] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:06:47.741] 2025-08-20 20:06:47,741 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:06:47.744]   [SEARCH] Query: data_processing_validator
[20:06:47.746] 2025-08-20 20:06:47,746 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:06:47.749] 
[20:06:47.749] [TURN 2/10]
[20:06:47.752]   [SEARCH] Query: file_operations_reader[LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:06:47.756] 
[20:06:47.756] 
[20:06:47.756] [TURN 2/10]
[20:06:47.757] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:06:47.792] 2025-08-20 20:06:47,792 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:06:47.797]   [SEARCH] Query: file_operations_reader
[20:06:47.797] 
[20:06:47.797] [TURN 2/10]
[20:06:47.797] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:06:50.533] 2025-08-20 20:06:50,532 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:06:50.538]   [INFO] Tool info request: file_operations_reader
[20:06:50.538] 
[20:06:50.538] [TURN 3/10]
[20:06:50.539] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:06:50.966] 2025-08-20 20:06:50,966 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:06:50.970]   [INFO] Tool info request: file_operations_reader
[20:06:50.970] 
[20:06:50.970] [TURN 3/10]
[20:06:50.971] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:06:52.047] 2025-08-20 20:06:52,045 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:06:52.049]   [INFO] Tool info request: data_processing_validator
[20:06:52.049] 
[20:06:52.049] [TURN 3/10]
[20:06:52.050] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:06:52.673] 2025-08-20 20:06:52,672 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:06:52.677]   [SEARCH] Query: data_processing_parser
[20:06:52.680] 2025-08-20 20:06:52,680 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:06:52.682] 
[20:06:52.686] [TURN 4/10]
[20:06:52.686] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:06:52.687]   [SEARCH] Query: data_processing_parser
[20:06:52.687] 
[20:06:52.687] [TURN 4/10]
[20:06:52.688] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:06:53.186] 2025-08-20 20:06:53,185 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:06:53.187]   [SEARCH] Query: data_processing_parser
[20:06:53.187] 
[20:06:53.187] [TURN 4/10]
[20:06:53.187] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:06:54.426] 2025-08-20 20:06:54,425 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:06:54.436]   [INFO] Tool info request: data_processing_parser
[20:06:54.436] 
[20:06:54.436] [TURN 5/10]
[20:06:54.437] 2025-08-20 20:06:54,437 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:06:54.441]   [INFO] Tool info request: data_processing_parser
[20:06:54.441] 
[20:06:54.441] [TURN 5/10]
[20:06:54.442] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:06:54.471] 2025-08-20 20:06:54,467 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:06:54.471]   [INFO] Tool info request: data_processing_parser
[20:06:54.471] 
[20:06:54.472] [TURN 5/10]
[20:06:54.484] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:06:54.484] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:06:57.235] 2025-08-20 20:06:57,234 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:06:57.237]   [SEARCH] Query: data_processing_filter
[20:06:57.238] 
[20:06:57.238] [TURN 6/10]
[20:06:57.239] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:06:57.242] 2025-08-20 20:06:57,242 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:06:57.243]   [SEARCH] Query: data_processing_validator
[20:06:57.243] 
[20:06:57.243] [TURN 6/10]
[20:06:57.243] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:06:58.873] 2025-08-20 20:06:58,873 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:06:58.876]   [INFO] Tool info request: data_processing_filter
[20:06:58.877] 
[20:06:58.877] [TURN 7/10]
[20:06:58.877] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:06:58.891] 2025-08-20 20:06:58,891 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:06:58.892]   [INFO] Tool info request: data_processing_validator
[20:06:58.892] 
[20:06:58.892] [TURN 7/10]
[20:06:58.893] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:06:58.910] 2025-08-20 20:06:58,910 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:06:58.913]   [SEARCH] Query: data_processing_transformer
[20:06:58.914] 
[20:06:58.914] [TURN 6/10]
[20:06:58.914] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:00.276] 2025-08-20 20:07:00,276 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:00.280]   [SEARCH] Query: data_processing_validator
[20:07:00.281] 
[20:07:00.281] [TURN 8/10]
[20:07:00.282] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:00.480] 2025-08-20 20:07:00,480 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:00.481]   [SEARCH] Query: data_processing_parser
[20:07:00.481] 
[20:07:00.481] [TURN 8/10]
[20:07:00.528] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:04.092] 2025-08-20 20:07:04,092 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:04.095]   [INFO] Tool info request: data_processing_transformer
[20:07:04.095] 
[20:07:04.095] [TURN 7/10]
[20:07:04.096] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:04.345] 2025-08-20 20:07:04,345 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:04.345]   [INFO] Tool info request: data_processing_parser
[20:07:04.345] 
[20:07:04.345] [TURN 9/10]
[20:07:04.346] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:04.841] 2025-08-20 20:07:04,841 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:04.844]   [INFO] Tool info request: data_processing_validator
[20:07:04.844] 
[20:07:04.844] [TURN 9/10]
[20:07:04.845] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:05.973] 2025-08-20 20:07:05,973 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:05.978]   [SEARCH] Query: data_processing_filter
[20:07:05.978] 
[20:07:05.978] [TURN 8/10]
[20:07:05.981] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:06.064] 2025-08-20 20:07:06,064 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:06.065]   [SEARCH] Query: data_processing_transformer
[20:07:06.065] 
[20:07:06.065] [TURN 10/10]
[20:07:06.066] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:08.987] 2025-08-20 20:07:08,986 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:08.990]   [INFO] Tool info request: data_processing_validator
[20:07:08.990] 
[20:07:08.990] [TURN 10/10]
[20:07:08.993] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:09.861] 2025-08-20 20:07:09,861 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:09.865]   [INFO] Tool info request: data_processing_filter
[20:07:09.865] 
[20:07:09.865] [TURN 9/10]
[20:07:09.868] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:09.912] 2025-08-20 20:07:09,912 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:09.914]   [INFO] Tool info request: data_processing_transformer
[20:07:09.917] [DEBUG] Got result for task: has_result=True, save_logs=True
[20:07:09.917] [AI_DEBUG] 测试非完全成功(failure)，准备调用AI分类
[20:07:09.918] [AI_DEBUG] 生成的txt_content长度: 29572
[20:07:09.918] [AI_DEBUG] _ai_classify_with_txt_content called:
[20:07:09.918]   - use_ai_classification=True
[20:07:09.918]   - ai_classifier=True
[20:07:09.918]   - txt_content_len=29572
[20:07:09.918]   - task_model=qwen2.5-3b-instruct
[20:07:09.918] [AI_CLASSIFIER] 直接使用AI分析完整交互记录（跳过规则匹配）
[20:07:09.919] [InteractiveExecutor] No LLM client provided, initializing from api_client_manager
[20:07:09.933] 2025-08-20 20:07:09,933 - api_client_manager - INFO - Created idealab client for model qwen2.5-3b-instruct
[20:07:09.933] [InteractiveExecutor] Initialized client with model: qwen2.5-3b-instruct
[20:07:09.933] [InteractiveExecutor] Using prompt type: optimal for API key selection
[20:07:09.933] [InteractiveExecutor] API model name: qwen2.5-3b-instruct
[20:07:09.934] [MCPEmbeddingManager] Reusing existing singleton instance (id: 13375393712)
[20:07:09.934] [MCPEmbeddingManager] Current cache size: 30 embeddings
[20:07:09.934] 2025-08-20 20:07:09,934 - mcp_embedding_manager - INFO - Loading index from .mcp_embedding_cache/tool_index.pkl (size: 3723608 bytes)
[20:07:09.961] 2025-08-20 20:07:09,960 - mcp_embedding_manager - INFO - FAISS index loaded
[20:07:09.961] 2025-08-20 20:07:09,961 - mcp_embedding_manager - INFO - Updated dimension to 3072
[20:07:09.961] 2025-08-20 20:07:09,961 - mcp_embedding_manager - INFO - Index loaded successfully: 30 tools
[20:07:09.963] [INFO] Tool embedding index loaded successfully
[20:07:09.965] [INFO] Loaded full tool registry from mcp_generated_library/tool_registry_consolidated.json
[20:07:09.965] [INFO] Operation semantic index initialized
[20:07:09.965] 
[20:07:09.965] [TURN 1/10]
[20:07:09.966] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:10.752] 2025-08-20 20:07:10,752 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 400 "
[20:07:10.753] [LLM_ERROR] Attempt 1/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.AllocationQuota","message":"Allocated quota exceeded, please increase your quota limit.","request_id":"758dc73d-2b04-968d-a60b-92da1bb2f3ae"}, traceId: 213e06c317557456305192096e7909'}
[20:07:10.753] [RETRY] 400 error detected, waiting 0.5s before retry (not counting as turn)...
[20:07:11.632] 2025-08-20 20:07:11,632 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 400 "
[20:07:11.633] [LLM_ERROR] Attempt 2/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.AllocationQuota","message":"Allocated quota exceeded, please increase your quota limit.","request_id":"76cee97f-0b1a-9b99-9b5f-481aa76ae30a"}, traceId: 213e06c317557456314042100e7909'}
[20:07:11.633] [RETRY] 400 error detected, waiting 2.1s before retry (not counting as turn)...
[20:07:11.686] 2025-08-20 20:07:11,686 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:11.689]   [SEARCH] Query: integration_consumer
[20:07:11.742] 2025-08-20 20:07:11,742 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:11.746]   [SEARCH] Query: data_processing_validator
[20:07:11.746] 
[20:07:11.746] [TURN 10/10]
[20:07:11.746] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:12.097] 2025-08-20 20:07:12,097 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 400 "
[20:07:12.101] [LLM_ERROR] Attempt 1/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.AllocationQuota","message":"Allocated quota exceeded, please increase your quota limit.","request_id":"07550351-6a52-9949-8690-f285e7057bbc"}, traceId: 213e007417557456318636179eee4b'}
[20:07:12.101] [RETRY] 400 error detected, waiting 0.5s before retry (not counting as turn)...
[20:07:12.258] 2025-08-20 20:07:12,257 - httpx - INFO - HTTP Request: POST https://archer222arc.openai.azure.com/openai/deployments/text-embedding-3-large/embeddings?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
[20:07:12.261] [InteractiveExecutor] No LLM client provided, initializing from api_client_manager
[20:07:12.269] 2025-08-20 20:07:12,269 - api_client_manager - INFO - Created idealab client for model qwen2.5-3b-instruct
[20:07:12.269] [InteractiveExecutor] Initialized client with model: qwen2.5-3b-instruct
[20:07:12.269] [InteractiveExecutor] Using prompt type: optimal for API key selection
[20:07:12.270] [InteractiveExecutor] API model name: qwen2.5-3b-instruct
[20:07:12.270] [MCPEmbeddingManager] Reusing existing singleton instance (id: 13375393712)
[20:07:12.270] [MCPEmbeddingManager] Current cache size: 30 embeddings
[20:07:12.270] 2025-08-20 20:07:12,270 - mcp_embedding_manager - INFO - Loading index from .mcp_embedding_cache/tool_index.pkl (size: 3723608 bytes)
[20:07:12.290] 2025-08-20 20:07:12,290 - mcp_embedding_manager - INFO - FAISS index loaded
[20:07:12.290] 2025-08-20 20:07:12,290 - mcp_embedding_manager - INFO - Updated dimension to 3072
[20:07:12.290] 2025-08-20 20:07:12,290 - mcp_embedding_manager - INFO - Index loaded successfully: 30 tools
[20:07:12.293] [INFO] Tool embedding index loaded successfully
[20:07:12.293] [INFO] Loaded full tool registry from mcp_generated_library/tool_registry_consolidated.json
[20:07:12.294] [INFO] Operation semantic index initialized
[20:07:12.294] 
[20:07:12.294] [TURN 1/10]
[20:07:12.294] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:15.540] 2025-08-20 20:07:15,540 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:15.541]   [INFO] Tool info request: data_processing_validator
[20:07:15.991] 2025-08-20 20:07:15,990 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:15.992]   [SEARCH] Query: file_operations_reader
[20:07:15.993] 
[20:07:15.993] [TURN 2/10]
[20:07:15.995] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:17.602] 2025-08-20 20:07:17,600 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:17.609]   [INFO] Tool info request: file_operations_reader
[20:07:17.609] 
[20:07:17.609] [TURN 3/10]
[20:07:17.610] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:17.874] 2025-08-20 20:07:17,873 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:17.874]   [SEARCH] Query: network api fetch
[20:07:17.874] 
[20:07:17.874] [TURN 2/10]
[20:07:17.880] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:18.273] 2025-08-20 20:07:18,273 - httpx - INFO - HTTP Request: POST https://85409-me3ofvov-eastus2.cognitiveservices.azure.com/openai/deployments/gpt-5-nano/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
[20:07:18.276] [AI_DEBUG] AI分类结果: category=tool_call_format_errors, confidence=0.85
[20:07:18.279] [DEBUG] Got result for task: has_result=True, save_logs=True
[20:07:18.279] [AI_DEBUG] 测试非完全成功(failure)，准备调用AI分类
[20:07:18.279] [AI_DEBUG] 生成的txt_content长度: 28796
[20:07:18.279] [AI_DEBUG] _ai_classify_with_txt_content called:
[20:07:18.279]   - use_ai_classification=True
[20:07:18.279]   - ai_classifier=True
[20:07:18.279]   - txt_content_len=28796
[20:07:18.279]   - task_model=qwen2.5-3b-instruct
[20:07:18.279] [AI_CLASSIFIER] 直接使用AI分析完整交互记录（跳过规则匹配）
[20:07:21.140] 2025-08-20 20:07:21,140 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:21.141]   [INFO] Tool info request: file_operations_reader
[20:07:21.141] 
[20:07:21.141] [TURN 4/10]
[20:07:21.142] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:21.926] 2025-08-20 20:07:21,926 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:21.928]   [INFO] Tool info request: network_fetcher
[20:07:21.928] 
[20:07:21.928] [TURN 3/10]
[20:07:21.932] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:22.506] 2025-08-20 20:07:22,505 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:22.514]   [EARLY_EXIT] No actions taken, continuing...
[20:07:22.514] 
[20:07:22.514] [TURN 5/10]
[20:07:22.516] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:23.087] 2025-08-20 20:07:23,087 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:23.088]   [SEARCH] Query: data_processing_validator
[20:07:23.088] 
[20:07:23.088] [TURN 4/10]
[20:07:23.089] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:23.973] 2025-08-20 20:07:23,973 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:23.978]   [EARLY_EXIT] No actions taken, continuing...
[20:07:23.978] 
[20:07:23.978] [TURN 6/10]
[20:07:23.978] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:24.308] 2025-08-20 20:07:24,308 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:24.310]   [INFO] Tool info request: data_processing_validator
[20:07:24.310] 
[20:07:24.310] [TURN 5/10]
[20:07:24.311] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:25.777] 2025-08-20 20:07:25,776 - httpx - INFO - HTTP Request: POST https://85409-me3ofvov-eastus2.cognitiveservices.azure.com/openai/deployments/gpt-5-nano/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
[20:07:25.778] [AI_DEBUG] AI分类结果: category=max_turns_errors, confidence=0.7
[20:07:25.782] [DEBUG] Got result for task: has_result=True, save_logs=True
[20:07:25.782] [AI_DEBUG] 测试非完全成功(failure)，准备调用AI分类
[20:07:25.782] [AI_DEBUG] 生成的txt_content长度: 29789
[20:07:25.782] [AI_DEBUG] _ai_classify_with_txt_content called:
[20:07:25.782]   - use_ai_classification=True
[20:07:25.782]   - ai_classifier=True
[20:07:25.782]   - txt_content_len=29789
[20:07:25.782]   - task_model=qwen2.5-3b-instruct
[20:07:25.782] [AI_CLASSIFIER] 直接使用AI分析完整交互记录（跳过规则匹配）
[20:07:27.465] 2025-08-20 20:07:27,465 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:27.467]   [SEARCH] Query: data_processing_transformer
[20:07:27.467] 
[20:07:27.467] [TURN 6/10]
[20:07:27.468] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:28.155] 2025-08-20 20:07:28,148 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:28.158]   [FORMAT_ISSUE] Turn 6: No tools executed after multiple turns
[20:07:28.158] 
[20:07:28.158] [TURN 7/10]
[20:07:28.165] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:28.923] 2025-08-20 20:07:28,923 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:28.925]   [INFO] Tool info request: data_processing_transformer
[20:07:28.925] 
[20:07:28.926] [TURN 7/10]
[20:07:28.927] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:29.186] 2025-08-20 20:07:29,186 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:29.192]   [FORMAT_ISSUE] Turn 7: No tools executed after multiple turns
[20:07:29.192] 
[20:07:29.192] [TURN 8/10]
[20:07:29.193] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:30.291] 2025-08-20 20:07:30,291 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:30.294]   [FORMAT_ISSUE] Turn 8: No tools executed after multiple turns
[20:07:30.294] 
[20:07:30.294] [TURN 9/10]
[20:07:30.294] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:30.415] 2025-08-20 20:07:30,415 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:30.417]   [INFO] Tool info request: network_fetcher
[20:07:30.417] 
[20:07:30.417] [TURN 8/10]
[20:07:30.419] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:34.036] 2025-08-20 20:07:34,031 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:34.037]   [INFO] Tool info request: data_processing_validator
[20:07:34.037] 
[20:07:34.037] [TURN 9/10]
[20:07:34.041] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:34.282] 2025-08-20 20:07:34,282 - httpx - INFO - HTTP Request: POST https://85409-me3ofvov-eastus2.cognitiveservices.azure.com/openai/deployments/gpt-5-nano/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
[20:07:34.285] [AI_DEBUG] AI分类结果: category=tool_call_format_errors, confidence=0.84
[20:07:34.734] 2025-08-20 20:07:34,733 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:34.738]   [FORMAT_ISSUE] Turn 9: No tools executed after multiple turns
[20:07:34.739] 
[20:07:34.739] [TURN 10/10]
[20:07:34.742] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:35.578] 2025-08-20 20:07:35,578 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:35.580]   [INFO] Tool info request: data_processing_transformer
[20:07:35.580] 
[20:07:35.580] [TURN 10/10]
[20:07:35.582] [LLM_CALL] Using model: qwen2.5-3b-instruct, API name: qwen2.5-3b-instruct
[20:07:38.440] 2025-08-20 20:07:38,440 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:38.441]   [INFO] Tool info request: network_fetcher
[20:07:38.442] [DEBUG] Got result for task: has_result=True, save_logs=True
[20:07:38.442] [AI_DEBUG] 测试非完全成功(failure)，准备调用AI分类
[20:07:38.443] [AI_DEBUG] 生成的txt_content长度: 25242
[20:07:38.443] [AI_DEBUG] _ai_classify_with_txt_content called:
[20:07:38.443]   - use_ai_classification=True
[20:07:38.443]   - ai_classifier=True
[20:07:38.443]   - txt_content_len=25242
[20:07:38.443]   - task_model=qwen2.5-3b-instruct
[20:07:38.443] [AI_CLASSIFIER] 直接使用AI分析完整交互记录（跳过规则匹配）
[20:07:40.615] 2025-08-20 20:07:40,615 - httpx - INFO - HTTP Request: POST https://idealab.alibaba-inc.com/api/openai/v1/chat/completions "HTTP/1.1 200 "
[20:07:40.619]   [FORMAT_ISSUE] Turn 10: No tools executed after multiple turns
[20:07:40.619] [ASSISTED] Task received 5 format helps, final result: failure
[20:07:46.526] 2025-08-20 20:07:46,524 - httpx - INFO - HTTP Request: POST https://85409-me3ofvov-eastus2.cognitiveservices.azure.com/openai/deployments/gpt-5-nano/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
[20:07:46.528] [AI_DEBUG] AI分类结果: category=tool_call_format_errors, confidence=0.85
[20:07:46.532] [DEBUG] Got result for task: has_result=True, save_logs=True
[20:07:46.532] [AI_DEBUG] 测试非完全成功(failure)，准备调用AI分类
[20:07:46.532] [AI_DEBUG] 生成的txt_content长度: 17598
[20:07:46.532] [AI_DEBUG] _ai_classify_with_txt_content called:
[20:07:46.532]   - use_ai_classification=True
[20:07:46.532]   - ai_classifier=True
[20:07:46.532]   - txt_content_len=17598
[20:07:46.532]   - task_model=qwen2.5-3b-instruct
[20:07:46.532] [AI_CLASSIFIER] 直接使用AI分析完整交互记录（跳过规则匹配）
[20:07:54.175] 2025-08-20 20:07:54,174 - httpx - INFO - HTTP Request: POST https://85409-me3ofvov-eastus2.cognitiveservices.azure.com/openai/deployments/gpt-5-nano/chat/completions?api-version=2024-12-01-preview "HTTP/1.1 200 OK"
[20:07:54.177] [AI_DEBUG] AI分类结果: category=tool_call_format_errors, confidence=0.85
[20:07:54.191] 
[20:07:54.191] [INFO] Batch writing 5 records to database (qwen2.5-3b-instruct:5)
[20:07:54.191] 2025-08-20 20:07:54,191 - batch_test_runner - INFO - Batch writing 5 records to database (qwen2.5-3b-instruct:5)
[20:07:54.192] [INFO] Successfully wrote 5/5 records (qwen2.5-3b-instruct:5)
[20:07:54.192] 2025-08-20 20:07:54,192 - batch_test_runner - INFO - Successfully wrote 5/5 records (qwen2.5-3b-instruct:5)
[20:07:54.193] [INFO] 数据已同步到Parquet存储
[20:07:54.193] 2025-08-20 20:07:54,193 - batch_test_runner - INFO - Database saved successfully
[20:07:54.193] 2025-08-20 20:07:54,193 - batch_test_runner - INFO - ============================================================
[20:07:54.194] 2025-08-20 20:07:54,193 - batch_test_runner - INFO - Batch test completed at 2025-08-20T20:07:54.193984
[20:07:54.194] 2025-08-20 20:07:54,194 - batch_test_runner - INFO - Summary:
[20:07:54.194] 2025-08-20 20:07:54,194 - batch_test_runner - INFO -   - Total tests: 5
[20:07:54.194] 2025-08-20 20:07:54,194 - batch_test_runner - INFO -   - Successful: 0
[20:07:54.194] 2025-08-20 20:07:54,194 - batch_test_runner - INFO -   - Failed: 5
[20:07:54.194] 2025-08-20 20:07:54,194 - batch_test_runner - INFO -   - Success rate: 0.0%
[20:07:54.194] 2025-08-20 20:07:54,194 - batch_test_runner - INFO -   - Log file: logs/batch_test_20250820_200638.log
[20:07:54.194] 2025-08-20 20:07:54,194 - batch_test_runner - INFO - ============================================================
[20:07:54.194] 
[20:07:54.194] ✅ 批测试完成
[20:07:54.194]    成功: 0/5
[20:07:54.194]    失败: 5/5
[20:07:54.194] 
[20:07:54.194] 📤 最终保存5个测试结果...
[20:07:54.197] [DEBUG] 创建新的manager实例: key=True_
[20:07:54.197] ✅ 已保存 5 个测试结果到数据库
[20:07:54.308] [INFO] 已将 5 个汇总写入Parquet
[20:07:54.365] [INFO] 刷新manager缓存: key=True_

==================================================
分片 qwen2.5-3b-instruct_easy_key2 完成
退出码: 0
总行数: 627
运行时间: 80.2秒
时间: 2025-08-20T20:07:56.045228
