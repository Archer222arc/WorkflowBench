2025-08-27 17:45:29,882 - INFO - 初始化实例池: 17个实例 (2个Azure + 6个IdealLab)
2025-08-27 17:45:29,882 - INFO - ResultCollector初始化，临时目录: temp_results
2025-08-27 17:45:29,882 - INFO - ResultAggregator初始化
2025-08-27 17:45:29,882 - INFO - 🆕 启用ResultCollector模式，支持零冲突并发
2025-08-27 17:45:29,882 - INFO - 调试日志目录: logs/debug_ultra_20250827_174327
2025-08-27 17:45:29,883 - INFO - [DEBUG] 开始调试模式运行
2025-08-27 17:45:29,883 - INFO - [DEBUG] 参数: args=(), kwargs={'model': 'qwen2.5-3b-instruct', 'prompt_types': 'optimal', 'difficulty': 'medium', 'task_types': 'all', 'num_instances': 20, 'max_workers': 2, 'tool_success_rate': 0.8, 'rate_mode': 'fixed', 'silent': False}
2025-08-27 17:45:29,883 - INFO - 
🔥 启动超高并行测试
2025-08-27 17:45:29,883 - INFO -    模型: qwen2.5-3b-instruct
2025-08-27 17:45:29,883 - INFO -    Prompt类型: optimal
2025-08-27 17:45:29,884 - INFO -    难度: medium
2025-08-27 17:45:29,884 - INFO -    实例数: 20
2025-08-27 17:45:29,884 - INFO -    速率模式: fixed
2025-08-27 17:45:29,884 - INFO - 🎯 使用qwen智能分片策略: qwen2.5-3b-instruct
2025-08-27 17:45:29,884 - INFO - Qwen统一优化: 任务均匀分配到2个keys，每key约10个实例
2025-08-27 17:45:29,884 - INFO - 📊 创建了 2 个并行分片
2025-08-27 17:45:29,884 - INFO - [DEBUG] 启动分片 qwen2.5-3b-instruct_medium_key0，包含模型: qwen2.5-3b-instruct
2025-08-27 17:45:29,884 - INFO -    传递STORAGE_FORMAT=json给子进程
2025-08-27 17:45:29,888 - INFO - [DEBUG] 分片 qwen2.5-3b-instruct_medium_key0 日志: logs/debug_ultra_20250827_174327/qwen2_5_3b_instruct_e046_174529_884_p51655_019_qwen2_5_3b_instruct_medium_key0.log
2025-08-27 17:45:29,888 - INFO - [DEBUG] 运行命令: python -u smart_batch_runner.py --model qwen2.5-3b-instruct --deployment qwen-key0 --prompt-types optimal --difficulty medium --task-types all --num-instances 10 --max-workers 2 --tool-success-rate 0.8 --batch-commit --checkpoint-interval 20 --ai-classification --no-adaptive --qps 50
2025-08-27 17:45:29,903 - INFO - 🚀 第一个分片 qwen2.5-3b-instruct_medium_key0 立即启动
2025-08-27 17:45:29,903 - INFO - ⏱️  延迟5秒后启动第二个分片...
[分片qwen2.5-3b-instruct_medium_key0] /Users/ruicheng/miniconda3/lib/python3.10/site-packages/torch/nn/modules/transformer.py:20: UserWarning: Failed to initialize NumPy: _ARRAY_API not found (Triggered internally at /Users/runner/work/pytorch/pytorch/pytorch/torch/csrc/utils/tensor_numpy.cpp:84.)
2025-08-27 17:45:34,917 - INFO - [DEBUG] 启动分片 qwen2.5-3b-instruct_medium_key1，包含模型: qwen2.5-3b-instruct
2025-08-27 17:45:34,941 - INFO -    传递STORAGE_FORMAT=json给子进程
2025-08-27 17:45:34,953 - INFO - [DEBUG] 分片 qwen2.5-3b-instruct_medium_key1 日志: logs/debug_ultra_20250827_174327/qwen2_5_3b_instruct_e046_174534_941_p51655_020_qwen2_5_3b_instruct_medium_key1.log
2025-08-27 17:45:34,953 - INFO - [DEBUG] 运行命令: python -u smart_batch_runner.py --model qwen2.5-3b-instruct --deployment qwen-key1 --prompt-types optimal --difficulty medium --task-types all --num-instances 10 --max-workers 2 --tool-success-rate 0.8 --batch-commit --checkpoint-interval 20 --ai-classification --no-adaptive --qps 50
2025-08-27 17:45:34,998 - INFO - ⏳ 并发等待 2 个分片完成...
[分片qwen2.5-3b-instruct_medium_key1] /Users/ruicheng/miniconda3/lib/python3.10/site-packages/torch/nn/modules/transformer.py:20: UserWarning: Failed to initialize NumPy: _ARRAY_API not found (Triggered internally at /Users/runner/work/pytorch/pytorch/pytorch/torch/csrc/utils/tensor_numpy.cpp:84.)
2025-08-27 17:46:11,464 - INFO - ✅ 分片 qwen2.5-3b-instruct_medium_key0 完成
2025-08-27 17:46:11,469 - INFO - [DEBUG] 分片 qwen2.5-3b-instruct_medium_key1 完成，退出码=0，48行输出，36.4秒
2025-08-27 17:46:11,479 - INFO - [DEBUG] 分片 qwen2.5-3b-instruct_medium_key0 完成，退出码=0，48行输出，41.5秒
2025-08-27 17:46:11,557 - INFO - ✅ 分片 qwen2.5-3b-instruct_medium_key1 完成
2025-08-27 17:46:11,574 - INFO - 
📊 并行测试完成
2025-08-27 17:46:11,574 - INFO -    成功: 2/2 个分片
2025-08-27 17:46:11,574 - INFO -    总耗时: 41.7秒
2025-08-27 17:46:11,574 - INFO -    理论加速比: 2x
2025-08-27 17:46:11,574 - INFO - 🔄 开始收集所有分片的测试结果...
2025-08-27 17:46:11,629 - INFO - 🔄 开始收集结果，发现 0 个结果文件
2025-08-27 17:46:11,636 - INFO - 📊 收集统计:
2025-08-27 17:46:11,636 - INFO - ✅ 总计收集 0 个测试结果，来自 0 个模型
2025-08-27 17:46:11,639 - WARNING - ⚠️ 未发现任何待处理的结果
2025-08-27 17:46:11,663 - INFO - [DEBUG] 运行完成
2025-08-27 17:46:24,375 - INFO - NumExpr defaulting to 10 threads.
2025-08-27 17:46:29,575 - INFO - [DEBUG] 调试报告已生成: logs/debug_ultra_20250827_174327/debug_report.md
