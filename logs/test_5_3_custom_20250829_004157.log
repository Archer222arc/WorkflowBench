[1;33m[WARNING][0m ⚠️ 未找到conda环境，使用系统Python
[0;34m[INFO][0m === 5.3 缺陷工作流测试脚本启动 ===
[0;34m[INFO][0m 时间戳: 20250829_004157
[0;34m[INFO][0m 日志文件: /Users/ruicheng/Documents/GitHub/WorkflowBench/logs/test_5_3_custom_20250829_004157.log
[0;34m[INFO][0m 检查环境和依赖文件...
[0;32m[SUCCESS][0m 所有必需文件检查完成
[0;34m[INFO][0m 获取用户选择...
[0;34m[INFO][0m 用户选择的缺陷类型: flawed_sequence_disorder
[0;34m[INFO][0m 选择开源模型进行测试
[0;34m[INFO][0m 开始执行 5.3 缺陷工作流测试
[0;34m[INFO][0m 缺陷类型数: 1
[0;34m[INFO][0m 测试模型数: 8
[0;34m[INFO][0m 总测试组合: 8
[0;34m[INFO][0m 模型配置: opensource
[0;34m[INFO][0m 并发配置: 50 workers, 10 processes
[0;34m[INFO][0m 存储配置: JSON + ResultCollector
[0;34m[INFO][0m 🚀 开始测试 - 缺陷类型: flawed_sequence_disorder
[0;34m[INFO][0m 进度: 1/8 - 测试模型: DeepSeek-V3-0324
[0;34m[INFO][0m 🚀 开始测试 - 模型: DeepSeek-V3-0324, 缺陷类型: flawed_sequence_disorder
[0;34m[INFO][0m 执行命令: USE_RESULT_COLLECTOR='true' STORAGE_FORMAT='json' KMP_DUPLICATE_LIB_OK=TRUE python3 ./ultra_parallel_runner.py --model DeepSeek-V3-0324 --prompt-types flawed_sequence_disorder --difficulty easy --task-types all --num-instances 20 --rate-mode fixed --max-workers 50
[0;32m[SUCCESS][0m ✅ 模型 DeepSeek-V3-0324 测试完成
[0;34m[INFO][0m 详细日志: /Users/ruicheng/Documents/GitHub/WorkflowBench/logs/ultra_parallel_DeepSeek_V3_0324_flawed_sequence_disorder_20250829_004157.log
[0;34m[INFO][0m 日志行数:       85
[0;34m[INFO][0m 等待 3 秒后测试下一个模型...
[0;34m[INFO][0m 进度: 2/8 - 测试模型: DeepSeek-R1-0528
[0;34m[INFO][0m 🚀 开始测试 - 模型: DeepSeek-R1-0528, 缺陷类型: flawed_sequence_disorder
[0;34m[INFO][0m 执行命令: USE_RESULT_COLLECTOR='true' STORAGE_FORMAT='json' KMP_DUPLICATE_LIB_OK=TRUE python3 ./ultra_parallel_runner.py --model DeepSeek-R1-0528 --prompt-types flawed_sequence_disorder --difficulty easy --task-types all --num-instances 20 --rate-mode fixed --max-workers 50
[0;32m[SUCCESS][0m ✅ 模型 DeepSeek-R1-0528 测试完成
[0;34m[INFO][0m 详细日志: /Users/ruicheng/Documents/GitHub/WorkflowBench/logs/ultra_parallel_DeepSeek_R1_0528_flawed_sequence_disorder_20250829_004157.log
[0;34m[INFO][0m 日志行数:       48
[0;34m[INFO][0m 等待 3 秒后测试下一个模型...
[0;34m[INFO][0m 进度: 3/8 - 测试模型: Llama-3.3-70B-Instruct
[0;34m[INFO][0m 🚀 开始测试 - 模型: Llama-3.3-70B-Instruct, 缺陷类型: flawed_sequence_disorder
[0;34m[INFO][0m 执行命令: USE_RESULT_COLLECTOR='true' STORAGE_FORMAT='json' KMP_DUPLICATE_LIB_OK=TRUE python3 ./ultra_parallel_runner.py --model Llama-3.3-70B-Instruct --prompt-types flawed_sequence_disorder --difficulty easy --task-types all --num-instances 20 --rate-mode fixed --max-workers 50
[0;32m[SUCCESS][0m ✅ 模型 Llama-3.3-70B-Instruct 测试完成
[0;34m[INFO][0m 详细日志: /Users/ruicheng/Documents/GitHub/WorkflowBench/logs/ultra_parallel_Llama_3_3_70B_Instruct_flawed_sequence_disorder_20250829_004157.log
[0;34m[INFO][0m 日志行数:       48
[0;34m[INFO][0m 等待 3 秒后测试下一个模型...
[0;34m[INFO][0m 进度: 4/8 - 测试模型: qwen2.5-72b-instruct
[0;34m[INFO][0m 🚀 开始测试 - 模型: qwen2.5-72b-instruct, 缺陷类型: flawed_sequence_disorder
[0;34m[INFO][0m 执行命令: USE_RESULT_COLLECTOR='true' STORAGE_FORMAT='json' KMP_DUPLICATE_LIB_OK=TRUE python3 ./ultra_parallel_runner.py --model qwen2.5-72b-instruct --prompt-types flawed_sequence_disorder --difficulty easy --task-types all --num-instances 20 --rate-mode fixed --max-workers 1
[0;31m[ERROR][0m ❌ 模型 qwen2.5-72b-instruct 测试失败 (退出码: 143)
[0;31m[ERROR][0m 检查日志: /Users/ruicheng/Documents/GitHub/WorkflowBench/logs/ultra_parallel_qwen2_5_72b_instruct_flawed_sequence_disorder_20250829_004157.log
[0;31m[ERROR][0m === 最后50行日志内容 ===
[0;31m[ERROR][0m   === 测试开始时间: 2025年 8月29日 星期五 00时42分16秒 EDT ===
[0;31m[ERROR][0m   === 环境变量 ===
[0;31m[ERROR][0m   USE_RESULT_COLLECTOR=true
[0;31m[ERROR][0m   STORAGE_FORMAT=json
[0;31m[ERROR][0m   CUSTOM_WORKERS=50
[0;31m[ERROR][0m   === 命令执行 ===
[0;31m[ERROR][0m   INFO:__main__:使用环境变量 RATE_MODE: fixed
[0;31m[ERROR][0m   INFO:__main__:初始化实例池: 17个实例 (2个Azure + 6个IdealLab)
[0;31m[ERROR][0m   INFO:result_collector:ResultCollector初始化，临时目录: temp_results
[0;31m[ERROR][0m   INFO:result_collector:ResultAggregator初始化
[0;31m[ERROR][0m   INFO:__main__:🆕 启用ResultCollector模式，支持零冲突并发
[0;31m[ERROR][0m   INFO:__main__:资源池状态: 17个实例, 容量1306
[0;31m[ERROR][0m   INFO:__main__:
[0;31m[ERROR][0m   🎯 检测到Qwen模型，使用队列调度器
[0;31m[ERROR][0m   INFO:__main__:   模型: qwen2.5-72b-instruct → Key0
[0;31m[ERROR][0m   INFO:__main__:   Prompt类型: flawed_sequence_disorder
[0;31m[ERROR][0m   INFO:__main__:   难度: easy
[0;31m[ERROR][0m   INFO:__main__:🔄 Key0: 执行 qwen2.5-72b-instruct-easy
[0;31m[ERROR][0m   INFO:__main__:🎯 使用qwen智能分片策略: qwen2.5-72b-instruct
[0;31m[ERROR][0m   INFO:__main__:🔄 API Key轮换策略:
[0;31m[ERROR][0m   INFO:__main__:   模型: qwen2.5-72b-instruct (规模: 72b)
[0;31m[ERROR][0m   INFO:__main__:   分配Key: key0
[0;31m[ERROR][0m   INFO:__main__:   实例数: 20
[0;31m[ERROR][0m   INFO:__main__:   注意: 使用单分片模式避免key冲突
[0;31m[ERROR][0m   INFO:__main__:  IdealLab qwen模型限制: qwen-key0 强制使用 max_workers=1, qps=10
[0;31m[ERROR][0m   INFO:__main__:    注意: IdealLab API并发限制严格，忽略--max-workers设置
[0;31m[ERROR][0m   INFO:__main__:  使用IdealLab API Key 0
[0;31m[ERROR][0m   INFO:__main__:🚀 启动分片 qwen2.5-72b-instruct_easy_flawed_sequence_disorder_key0: qwen-key0
[0;31m[ERROR][0m   INFO:__main__:   实例数: 20, 模型: qwen2.5-72b-instruct
[0;31m[ERROR][0m   INFO:__main__:   传递STORAGE_FORMAT=json给子进程
[0;31m[ERROR][0m   INFO:__main__:   传递USE_PARTIAL_LOADING=true给子进程
[0;31m[ERROR][0m   INFO:__main__:   传递TASK_LOAD_COUNT=20给子进程
[0;31m[ERROR][0m   INFO:__main__:   传递SKIP_MODEL_LOADING=true给子进程
[0;31m[ERROR][0m   INFO:__main__:   传递USE_RESULT_COLLECTOR=true给子进程
[0;31m[ERROR][0m   INFO:__main__:   传递KMP_DUPLICATE_LIB_OK=TRUE给子进程
[0;31m[ERROR][0m   INFO:__main__:   设置PYTHONMALLOC=malloc给子进程
[0;31m[ERROR][0m   === 测试结束时间: 2025年 8月29日 星期五 00时44分34秒 EDT ===
[0;31m[ERROR][0m   === 退出码: 143 ===
[0;31m[ERROR][0m === 日志结束 ===
[0;34m[INFO][0m 等待 3 秒后测试下一个模型...
[0;34m[INFO][0m 进度: 5/8 - 测试模型: qwen2.5-32b-instruct
[0;34m[INFO][0m 🚀 开始测试 - 模型: qwen2.5-32b-instruct, 缺陷类型: flawed_sequence_disorder
[0;34m[INFO][0m 执行命令: USE_RESULT_COLLECTOR='true' STORAGE_FORMAT='json' KMP_DUPLICATE_LIB_OK=TRUE python3 ./ultra_parallel_runner.py --model qwen2.5-32b-instruct --prompt-types flawed_sequence_disorder --difficulty easy --task-types all --num-instances 20 --rate-mode fixed --max-workers 1
[0;32m[SUCCESS][0m ✅ 模型 qwen2.5-32b-instruct 测试完成
[0;34m[INFO][0m 详细日志: /Users/ruicheng/Documents/GitHub/WorkflowBench/logs/ultra_parallel_qwen2_5_32b_instruct_flawed_sequence_disorder_20250829_004157.log
[0;34m[INFO][0m 日志行数:       40
[0;34m[INFO][0m 等待 3 秒后测试下一个模型...
[0;34m[INFO][0m 进度: 6/8 - 测试模型: qwen2.5-14b-instruct
[0;34m[INFO][0m 🚀 开始测试 - 模型: qwen2.5-14b-instruct, 缺陷类型: flawed_sequence_disorder
[0;34m[INFO][0m 执行命令: USE_RESULT_COLLECTOR='true' STORAGE_FORMAT='json' KMP_DUPLICATE_LIB_OK=TRUE python3 ./ultra_parallel_runner.py --model qwen2.5-14b-instruct --prompt-types flawed_sequence_disorder --difficulty easy --task-types all --num-instances 20 --rate-mode fixed --max-workers 1
[1;33m[WARNING][0m 接收到中断信号，正在清理...
[0;34m[INFO][0m 清理完成
