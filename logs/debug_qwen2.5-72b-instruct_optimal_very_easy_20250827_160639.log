2025-08-27 16:06:39,194 - INFO - 初始化实例池: 17个实例 (2个Azure + 6个IdealLab)
2025-08-27 16:06:39,195 - INFO - ResultCollector初始化，临时目录: temp_results
2025-08-27 16:06:39,195 - INFO - ResultAggregator初始化
2025-08-27 16:06:39,195 - INFO - 🆕 启用ResultCollector模式，支持零冲突并发
2025-08-27 16:06:39,195 - INFO - 调试日志目录: logs/debug_ultra_20250827_160638
2025-08-27 16:06:39,195 - INFO - [DEBUG] 开始调试模式运行
2025-08-27 16:06:39,195 - INFO - [DEBUG] 参数: args=(), kwargs={'model': 'qwen2.5-72b-instruct', 'prompt_types': 'optimal', 'difficulty': 'very_easy', 'task_types': 'all', 'num_instances': 20, 'max_workers': 2, 'tool_success_rate': 0.8, 'rate_mode': 'fixed', 'silent': False}
2025-08-27 16:06:39,195 - INFO - 
🔥 启动超高并行测试
2025-08-27 16:06:39,195 - INFO -    模型: qwen2.5-72b-instruct
2025-08-27 16:06:39,195 - INFO -    Prompt类型: optimal
2025-08-27 16:06:39,195 - INFO -    难度: very_easy
2025-08-27 16:06:39,195 - INFO -    实例数: 20
2025-08-27 16:06:39,195 - INFO -    速率模式: fixed
2025-08-27 16:06:39,195 - INFO - 🎯 使用qwen智能分片策略: qwen2.5-72b-instruct
2025-08-27 16:06:39,195 - INFO - Qwen统一优化: 任务均匀分配到2个keys，每key约10个实例
2025-08-27 16:06:39,195 - INFO - 📊 创建了 2 个并行分片
2025-08-27 16:06:39,195 - INFO - [DEBUG] 启动分片 qwen2.5-72b-instruct_very_easy_key0，包含模型: qwen2.5-72b-instruct
2025-08-27 16:06:39,195 - INFO -    传递STORAGE_FORMAT=json给子进程
2025-08-27 16:06:39,204 - INFO - [DEBUG] 分片 qwen2.5-72b-instruct_very_easy_key0 日志: logs/debug_ultra_20250827_160638/qwen2_5_72b_instruct_560e_160639_195_p47034_001_qwen2_5_72b_instruct_very_easy_key0.log
2025-08-27 16:06:39,204 - INFO - [DEBUG] 运行命令: python -u smart_batch_runner.py --model qwen2.5-72b-instruct --deployment qwen-key0 --prompt-types optimal --difficulty very_easy --task-types all --num-instances 10 --max-workers 2 --tool-success-rate 0.8 --batch-commit --checkpoint-interval 20 --ai-classification --no-adaptive --qps 50
2025-08-27 16:06:39,214 - INFO - 🚀 第一个分片 qwen2.5-72b-instruct_very_easy_key0 立即启动
2025-08-27 16:06:39,214 - INFO - ⏱️  延迟5秒后启动第二个分片...
[分片qwen2.5-72b-instruct_very_easy_key0] /Users/ruicheng/miniconda3/lib/python3.10/site-packages/torch/nn/modules/transformer.py:20: UserWarning: Failed to initialize NumPy: _ARRAY_API not found (Triggered internally at /Users/runner/work/pytorch/pytorch/pytorch/torch/csrc/utils/tensor_numpy.cpp:84.)
[分片qwen2.5-72b-instruct_very_easy_key0] ⚠️  检测到idealab API，调整并发: workers=2, qps=None
[分片qwen2.5-72b-instruct_very_easy_key0] [AI_DEBUG] AI分类器初始化成功: <txt_based_ai_classifier.TxtBasedAIClassifier object at 0x7febc90490b0>
[分片qwen2.5-72b-instruct_very_easy_key0] [OperationEmbeddingIndex] Initializing with unified API client manager
2025-08-27 16:06:44,219 - INFO - [DEBUG] 启动分片 qwen2.5-72b-instruct_very_easy_key1，包含模型: qwen2.5-72b-instruct
2025-08-27 16:06:44,220 - INFO -    传递STORAGE_FORMAT=json给子进程
2025-08-27 16:06:44,220 - INFO - [DEBUG] 分片 qwen2.5-72b-instruct_very_easy_key1 日志: logs/debug_ultra_20250827_160638/qwen2_5_72b_instruct_560e_160644_220_p47034_002_qwen2_5_72b_instruct_very_easy_key1.log
2025-08-27 16:06:44,220 - INFO - [DEBUG] 运行命令: python -u smart_batch_runner.py --model qwen2.5-72b-instruct --deployment qwen-key1 --prompt-types optimal --difficulty very_easy --task-types all --num-instances 10 --max-workers 2 --tool-success-rate 0.8 --batch-commit --checkpoint-interval 20 --ai-classification --no-adaptive --qps 50
2025-08-27 16:06:44,229 - INFO - ⏳ 并发等待 2 个分片完成...
2025-08-27 16:06:44,814 - INFO - [DEBUG] 分片 qwen2.5-72b-instruct_very_easy_key0: 100 行输出，运行 5.6秒
[分片qwen2.5-72b-instruct_very_easy_key0] [MCPEmbeddingManager] Initializing with unified API client manager
[分片qwen2.5-72b-instruct_very_easy_key1] /Users/ruicheng/miniconda3/lib/python3.10/site-packages/torch/nn/modules/transformer.py:20: UserWarning: Failed to initialize NumPy: _ARRAY_API not found (Triggered internally at /Users/runner/work/pytorch/pytorch/pytorch/torch/csrc/utils/tensor_numpy.cpp:84.)
[分片qwen2.5-72b-instruct_very_easy_key1] ⚠️  检测到idealab API，调整并发: workers=2, qps=None
[分片qwen2.5-72b-instruct_very_easy_key1] [AI_DEBUG] AI分类器初始化成功: <txt_based_ai_classifier.TxtBasedAIClassifier object at 0x7f7c1a5a07d0>
[分片qwen2.5-72b-instruct_very_easy_key0] [WARNING] Embedding manager exists but has no embeddings
[分片qwen2.5-72b-instruct_very_easy_key1] [OperationEmbeddingIndex] Initializing with unified API client manager
2025-08-27 16:06:50,129 - INFO - [DEBUG] 分片 qwen2.5-72b-instruct_very_easy_key1: 100 行输出，运行 5.9秒
[分片qwen2.5-72b-instruct_very_easy_key1] [MCPEmbeddingManager] Initializing with unified API client manager
[分片qwen2.5-72b-instruct_very_easy_key1] [WARNING] Embedding manager exists but has no embeddings
2025-08-27 16:06:55,565 - INFO - [DEBUG] 分片 qwen2.5-72b-instruct_very_easy_key0: 200 行输出，运行 16.4秒
[分片qwen2.5-72b-instruct_very_easy_key0] [INFO] Initializing LLM client using APIClientManager
2025-08-27 16:06:59,727 - INFO - [DEBUG] 分片 qwen2.5-72b-instruct_very_easy_key1: 200 行输出，运行 15.5秒
[分片qwen2.5-72b-instruct_very_easy_key1] 2025-08-27 16:06:59,800 - result_merger - WARNING - 另一个合并器已在运行 (PID: -1)
[分片qwen2.5-72b-instruct_very_easy_key1] [INFO] Initializing LLM client using APIClientManager
[分片qwen2.5-72b-instruct_very_easy_key0] 2025-08-27 16:07:03,088 - batch_test_runner - INFO - Each task timeout: 10 minutes, Total batch timeout: 20 minutes
[分片qwen2.5-72b-instruct_very_easy_key1] 2025-08-27 16:07:08,438 - batch_test_runner - INFO - Each task timeout: 10 minutes, Total batch timeout: 20 minutes
[分片qwen2.5-72b-instruct_very_easy_key0] [InteractiveExecutor] Using prompt type: optimal for API key selection
[分片qwen2.5-72b-instruct_very_easy_key0] [InteractiveExecutor] Using prompt type: optimal for API key selection
[分片qwen2.5-72b-instruct_very_easy_key0] [InteractiveExecutor] API model name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [InteractiveExecutor] API model name: qwen2.5-72b-instruct2025-08-27 16:08:04,317 - mcp_embedding_manager - INFO - Loading index from .mcp_embedding_cache/tool_index.pkl (size: 3723608 bytes)
2025-08-27 16:08:09,335 - INFO - [DEBUG] 分片 qwen2.5-72b-instruct_very_easy_key0: 300 行输出，运行 90.1秒
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct[LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct[LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
2025-08-27 16:08:25,864 - INFO - [DEBUG] 分片 qwen2.5-72b-instruct_very_easy_key0: 400 行输出，运行 106.6秒
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [AI_DEBUG] 测试非完全成功(failure)，准备调用AI分类
[分片qwen2.5-72b-instruct_very_easy_key0] [InteractiveExecutor] Using prompt type: optimal for API key selection
[分片qwen2.5-72b-instruct_very_easy_key0] [InteractiveExecutor] Using prompt type: optimal for API key selection
[分片qwen2.5-72b-instruct_very_easy_key0] [InteractiveExecutor] API model name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [MCPEmbeddingManager] Current cache size: 30 embeddings[InteractiveExecutor] API model name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [AI_DEBUG] 测试非完全成功(failure)，准备调用AI分类
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
2025-08-27 16:08:43,664 - INFO - [DEBUG] 分片 qwen2.5-72b-instruct_very_easy_key0: 500 行输出，运行 124.4秒
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_ERROR] Attempt 1/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.RateQuota","message":"Requests rate limit exceeded, please try again later.","request_id":"36426452-75f9-93a1-bbdc-9eb849bca108"}, traceId: 2150416a17563253238647875ee106'}
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_ERROR] Attempt 1/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.RateQuota","message":"Requests rate limit exceeded, please try again later.","request_id":"ee7e22da-fd0f-9b3b-a88a-e81f5173353f"}, traceId: 215041a817563253258717882e3583'}  [EARLY_EXIT] No actions taken, continuing...
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
2025-08-27 16:08:57,921 - INFO - [DEBUG] 分片 qwen2.5-72b-instruct_very_easy_key0: 600 行输出，运行 138.7秒
[分片qwen2.5-72b-instruct_very_easy_key0] [AI_DEBUG] 测试非完全成功(failure)，准备调用AI分类
[分片qwen2.5-72b-instruct_very_easy_key0] [InteractiveExecutor] Using prompt type: optimal for API key selection
[分片qwen2.5-72b-instruct_very_easy_key0] [InteractiveExecutor] Using prompt type: optimal for API key selection
[分片qwen2.5-72b-instruct_very_easy_key0] [InteractiveExecutor] API model name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [InteractiveExecutor] API model name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_very_easy_key0] [AI_DEBUG] 测试非完全成功(failure)，准备调用AI分类
./run_systematic_test_final.sh: line 3698: 47034 Terminated: 15          USE_RESULT_COLLECTOR='true' STORAGE_FORMAT='json' KMP_DUPLICATE_LIB_OK=TRUE python -u ultra_parallel_runner_debug.py --model qwen2.5-72b-instruct --prompt-types optimal --difficulty very_easy --task-types all --num-instances 20 --rate-mode fixed --max-workers 2 --debug-log-dir logs/debug_ultra_20250827_160638
