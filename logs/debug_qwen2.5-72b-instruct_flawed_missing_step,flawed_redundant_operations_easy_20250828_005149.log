2025-08-28 00:51:49,911 - INFO - 初始化实例池: 17个实例 (2个Azure + 6个IdealLab)
2025-08-28 00:51:49,911 - INFO - ResultCollector初始化，临时目录: temp_results
2025-08-28 00:51:49,911 - INFO - ResultAggregator初始化
2025-08-28 00:51:49,911 - INFO - 🆕 启用ResultCollector模式，支持零冲突并发
2025-08-28 00:51:49,911 - INFO - 调试日志目录: logs/debug_ultra_20250828_005048
2025-08-28 00:51:49,912 - INFO - [DEBUG] 开始调试模式运行
2025-08-28 00:51:49,912 - INFO - [DEBUG] 参数: args=(), kwargs={'model': 'qwen2.5-72b-instruct', 'prompt_types': 'flawed_missing_step,flawed_redundant_operations', 'difficulty': 'easy', 'task_types': 'all', 'num_instances': 20, 'max_workers': 1, 'tool_success_rate': 0.8, 'rate_mode': 'fixed', 'silent': False}
2025-08-28 00:51:49,912 - INFO - 
🔥 启动超高并行测试
2025-08-28 00:51:49,912 - INFO -    模型: qwen2.5-72b-instruct
2025-08-28 00:51:49,912 - INFO -    Prompt类型: flawed_missing_step,flawed_redundant_operations
2025-08-28 00:51:49,912 - INFO -    难度: easy
2025-08-28 00:51:49,912 - INFO -    实例数: 20
2025-08-28 00:51:49,912 - INFO -    速率模式: fixed
2025-08-28 00:51:49,912 - INFO - 🎯 使用qwen智能分片策略: qwen2.5-72b-instruct
2025-08-28 00:51:49,912 - INFO - Qwen 5.3模式: qwen2.5-72b-instruct的operation_defects使用key1
2025-08-28 00:51:49,912 - INFO - 📊 创建了 1 个并行分片
2025-08-28 00:51:49,912 - INFO - [DEBUG] 启动分片 qwen2.5-72b-instruct_easy_operation_defects_key1，包含模型: qwen2.5-72b-instruct
2025-08-28 00:51:49,912 - INFO -   IdealLab模型 qwen2.5-72b-instruct 强制 max_workers=1（严格限流）
2025-08-28 00:51:49,912 - INFO -    传递STORAGE_FORMAT=json给子进程
2025-08-28 00:51:49,915 - INFO - [DEBUG] 分片 qwen2.5-72b-instruct_easy_operation_defects_key1 日志: logs/debug_ultra_20250828_005048/qwen2_5_72b_instruct_560e_005149_912_p95864_003_qwen2_5_72b_instruct_easy_operation_defects_key1.log
2025-08-28 00:51:49,915 - INFO - [DEBUG] 运行命令: python -u smart_batch_runner.py --model qwen2.5-72b-instruct --deployment qwen-key1 --prompt-types flawed_missing_step,flawed_redundant_operations --difficulty easy --task-types all --num-instances 20 --max-workers 1 --tool-success-rate 0.8 --batch-commit --checkpoint-interval 20 --ai-classification --no-adaptive --qps 50 --prompt-parallel
2025-08-28 00:51:49,931 - INFO - 🚀 第一个分片 qwen2.5-72b-instruct_easy_operation_defects_key1 立即启动
2025-08-28 00:51:49,932 - INFO - ⏳ 并发等待 1 个分片完成...
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] /Users/ruicheng/miniconda3/lib/python3.10/site-packages/torch/nn/modules/transformer.py:20: UserWarning: Failed to initialize NumPy: _ARRAY_API not found (Triggered internally at /Users/runner/work/pytorch/pytorch/pytorch/torch/csrc/utils/tensor_numpy.cpp:84.)
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] 策略: 2个prompt types使用不同API keys并行
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [AI_DEBUG] AI分类器初始化成功: <txt_based_ai_classifier.TxtBasedAIClassifier object at 0x7f98090136c0>
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [AI_DEBUG] AI分类器初始化成功: <txt_based_ai_classifier.TxtBasedAIClassifier object at 0x7f9808e56910>
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [OperationEmbeddingIndex] Initializing with unified API client manager
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [OperationEmbeddingIndex] Initializing with unified API client manager
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [MCPEmbeddingManager] Initializing with unified API client manager
2025-08-28 00:51:55,511 - INFO - [DEBUG] 分片 qwen2.5-72b-instruct_easy_operation_defects_key1: 100 行输出，运行 5.6秒
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [WARNING] Embedding manager exists but has no embeddings
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [WARNING] Embedding manager exists but has no embeddings
2025-08-28 00:51:59,576 - INFO - [DEBUG] 分片 qwen2.5-72b-instruct_easy_operation_defects_key1: 200 行输出，运行 9.6秒
2025-08-28 00:52:02,587 - INFO - [DEBUG] 分片 qwen2.5-72b-instruct_easy_operation_defects_key1: 300 行输出，运行 12.7秒
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] 2025-08-28 00:52:02,592 - result_merger - WARNING - 另一个合并器已在运行 (PID: -1)
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [INFO] Initializing LLM client using APIClientManager
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] 2025-08-28 00:52:02,600 - result_merger - WARNING - 另一个合并器已在运行 (PID: -1)
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [INFO] Initializing LLM client using APIClientManager
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_ERROR] Attempt 1/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.RateQuota","message":"Requests rate limit exceeded, please try again later.","request_id":"6128d9aa-6634-9ded-9f38-68596efdc8e6"}, traceId: 213e04ea17563567318806488e34c9'}
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_ERROR] Attempt 1/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.RateQuota","message":"Requests rate limit exceeded, please try again later.","request_id":"5f74cb3c-8e7d-9c78-86b2-a0909cc2655d"}, traceId: 213e064d17563567319291940e819f'}
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_ERROR] Attempt 1/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.RateQuota","message":"Requests rate limit exceeded, please try again later.","request_id":"a941d6b6-91a6-9b08-a9a8-336fe12a35ea"}, traceId: 213e064d17563567342411949e819f'}
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
2025-08-28 00:52:15,225 - INFO - [DEBUG] 分片 qwen2.5-72b-instruct_easy_operation_defects_key1: 400 行输出，运行 25.3秒
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_ERROR] Attempt 1/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.RateQuota","message":"Requests rate limit exceeded, please try again later.","request_id":"80e42226-efde-9843-a8be-fcee60e937d9"}, traceId: 213e04ea17563567353566504e34c9'}
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_ERROR] Attempt 1/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.RateQuota","message":"Requests rate limit exceeded, please try again later.","request_id":"dc6d2442-d75e-9dae-84b4-e4fb87650546"}, traceId: 213e064d17563567365961955e819f'}
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_ERROR] Attempt 1/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.RateQuota","message":"Requests rate limit exceeded, please try again later.","request_id":"8a670fcb-cf36-9e61-a8d3-4d01f9c68428"}, traceId: 213e04ea17563567396186529e34c9'}
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_ERROR] Attempt 1/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.RateQuota","message":"Requests rate limit exceeded, please try again later.","request_id":"a121c714-89ff-96be-a1d7-cfe3486c9fbd"}, traceId: 213e064d17563567403561966e819f'}
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_ERROR] Attempt 2/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.RateQuota","message":"Requests rate limit exceeded, please try again later.","request_id":"ef626bc1-8708-932b-808e-1ebc1982ad8e"}, traceId: 213e04ea17563567414886537e34c9'}
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_ERROR] Attempt 2/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.RateQuota","message":"Requests rate limit exceeded, please try again later.","request_id":"4af0a726-25f9-9e01-9929-248c92218c91"}, traceId: 213e064d17563567416681969e819f'}
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_ERROR] Attempt 1/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.RateQuota","message":"Requests rate limit exceeded, please try again later.","request_id":"6a332d60-e4eb-9cd1-a6da-829d2ac08aa9"}, traceId: 213e04ea17563567443746543e34c9'}
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_ERROR] Attempt 1/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.RateQuota","message":"Requests rate limit exceeded, please try again later.","request_id":"1d9d9e26-25d9-9f3e-8dc7-3bfda47a3385"}, traceId: 213e064d17563567483471996e819f'}
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_ERROR] Attempt 2/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.RateQuota","message":"Requests rate limit exceeded, please try again later.","request_id":"02110fc9-78f2-9a15-a640-6dbc11279c48"}, traceId: 213e064d17563567497171999e819f'}
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_ERROR] Attempt 1/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.RateQuota","message":"Requests rate limit exceeded, please try again later.","request_id":"b4cee762-a1cf-9ceb-a034-3c03da68f5f0"}, traceId: 213e04ea17563567503816570e34c9'}
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_ERROR] Attempt 3/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.RateQuota","message":"Requests rate limit exceeded, please try again later.","request_id":"6bcbcc7a-6646-9b6f-bda4-0a5f2a97cd66"}, traceId: 213e064d17563567516662003e819f'}
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_ERROR] Attempt 2/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.RateQuota","message":"Requests rate limit exceeded, please try again later.","request_id":"f089289b-0f47-9453-a358-59cdd3de4bae"}, traceId: 213e04ea17563567516666576e34c9'}
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_ERROR] Attempt 3/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.RateQuota","message":"Requests rate limit exceeded, please try again later.","request_id":"10a5f794-904d-9fb4-a578-b7128751b7e9"}, traceId: 213e04ea17563567539166583e34c9'}
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_ERROR] Attempt 4/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.RateQuota","message":"Requests rate limit exceeded, please try again later.","request_id":"11457a95-d718-9cfe-bb45-ff7c6dd55d33"}, traceId: 213e064d17563567554502023e819f'}
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_ERROR] Attempt 4/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.RateQuota","message":"Requests rate limit exceeded, please try again later.","request_id":"8d5fa2a1-d9ad-93ad-8370-624a2311cd2f"}, traceId: 213e04ea17563567575756600e34c9'}
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_ERROR] Attempt 5/5: Error code: 400 - {'success': False, 'message': '模型提供方限流', 'data': None, 'code': 'MPE-429', 'detailMessage': '{"code":"Throttling.RateQuota","message":"Requests rate limit exceeded, please try again later.","request_id":"377b9c53-9666-9f42-a9b9-38c9601e6219"}, traceId: 213e064d17563567581362031e819f'}
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [AI_DEBUG] 测试非完全成功(failure)，准备调用AI分类
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
[分片qwen2.5-72b-instruct_easy_operation_defects_key1] [LLM_CALL] Using model: qwen2.5-72b-instruct, API name: qwen2.5-72b-instruct
./run_systematic_test_final.sh: line 3725: 95864 Terminated: 15          USE_RESULT_COLLECTOR='true' STORAGE_FORMAT='json' KMP_DUPLICATE_LIB_OK=TRUE python -u ultra_parallel_runner_debug.py --model qwen2.5-72b-instruct --prompt-types flawed_missing_step,flawed_redundant_operations --difficulty easy --task-types all --num-instances 20 --rate-mode fixed --max-workers 1 --debug-log-dir logs/debug_ultra_20250828_005048
