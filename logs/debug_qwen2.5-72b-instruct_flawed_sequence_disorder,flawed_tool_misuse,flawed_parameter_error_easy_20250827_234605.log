2025-08-27 23:46:05,894 - INFO - 初始化实例池: 17个实例 (2个Azure + 6个IdealLab)
2025-08-27 23:46:05,894 - INFO - ResultCollector初始化，临时目录: temp_results
2025-08-27 23:46:05,894 - INFO - ResultAggregator初始化
2025-08-27 23:46:05,894 - INFO - 🆕 启用ResultCollector模式，支持零冲突并发
2025-08-27 23:46:05,894 - INFO - 调试日志目录: logs/debug_ultra_20250827_234503
2025-08-27 23:46:05,895 - INFO - [DEBUG] 开始调试模式运行
2025-08-27 23:46:05,895 - INFO - [DEBUG] 参数: args=(), kwargs={'model': 'qwen2.5-72b-instruct', 'prompt_types': 'flawed_sequence_disorder,flawed_tool_misuse,flawed_parameter_error', 'difficulty': 'easy', 'task_types': 'all', 'num_instances': 20, 'max_workers': 1, 'tool_success_rate': 0.8, 'rate_mode': 'fixed', 'silent': False}
2025-08-27 23:46:05,895 - INFO - 
🔥 启动超高并行测试
2025-08-27 23:46:05,895 - INFO -    模型: qwen2.5-72b-instruct
2025-08-27 23:46:05,895 - INFO -    Prompt类型: flawed_sequence_disorder,flawed_tool_misuse,flawed_parameter_error
2025-08-27 23:46:05,895 - INFO -    难度: easy
2025-08-27 23:46:05,895 - INFO -    实例数: 20
2025-08-27 23:46:05,895 - INFO -    速率模式: fixed
2025-08-27 23:46:05,895 - INFO - 🎯 使用qwen智能分片策略: qwen2.5-72b-instruct
2025-08-27 23:46:05,895 - INFO - Qwen 5.3模式: qwen2.5-72b-instruct的struct_defects使用key0
2025-08-27 23:46:05,895 - INFO - 📊 创建了 1 个并行分片
2025-08-27 23:46:05,895 - INFO - [DEBUG] 启动分片 qwen2.5-72b-instruct_easy_struct_defects_key0，包含模型: qwen2.5-72b-instruct
2025-08-27 23:46:05,895 - INFO -    传递STORAGE_FORMAT=json给子进程
2025-08-27 23:46:05,900 - INFO - [DEBUG] 分片 qwen2.5-72b-instruct_easy_struct_defects_key0 日志: logs/debug_ultra_20250827_234503/qwen2_5_72b_instruct_560e_234605_895_p82701_003_qwen2_5_72b_instruct_easy_struct_defects_key0.log
2025-08-27 23:46:05,900 - INFO - [DEBUG] 运行命令: python -u smart_batch_runner.py --model qwen2.5-72b-instruct --deployment qwen-key0 --prompt-types flawed_sequence_disorder,flawed_tool_misuse,flawed_parameter_error --difficulty easy --task-types all --num-instances 20 --max-workers 3 --tool-success-rate 0.8 --batch-commit --checkpoint-interval 20 --ai-classification --no-adaptive --qps 50 --prompt-parallel
2025-08-27 23:46:05,924 - INFO - 🚀 第一个分片 qwen2.5-72b-instruct_easy_struct_defects_key0 立即启动
2025-08-27 23:46:05,924 - INFO - ⏳ 并发等待 1 个分片完成...
[分片qwen2.5-72b-instruct_easy_struct_defects_key0] /Users/ruicheng/miniconda3/lib/python3.10/site-packages/torch/nn/modules/transformer.py:20: UserWarning: Failed to initialize NumPy: _ARRAY_API not found (Triggered internally at /Users/runner/work/pytorch/pytorch/pytorch/torch/csrc/utils/tensor_numpy.cpp:84.)
[分片qwen2.5-72b-instruct_easy_struct_defects_key0] 策略: 3个prompt types使用不同API keys并行
[分片qwen2.5-72b-instruct_easy_struct_defects_key0] [AI_DEBUG] AI分类器初始化成功: <txt_based_ai_classifier.TxtBasedAIClassifier object at 0x7f9ea21e26d0>2025-08-27 23:46:09,464 - txt_based_ai_classifier - INFO - TXT-based AI classifier initialized with gpt-5-nano (parameter-filtered)
[分片qwen2.5-72b-instruct_easy_struct_defects_key0] [AI_DEBUG] AI分类器初始化成功: <txt_based_ai_classifier.TxtBasedAIClassifier object at 0x7f9ea1781c60>
[分片qwen2.5-72b-instruct_easy_struct_defects_key0] [AI_DEBUG] AI分类器初始化成功: <txt_based_ai_classifier.TxtBasedAIClassifier object at 0x7f9ea28d6000>
[分片qwen2.5-72b-instruct_easy_struct_defects_key0] [OperationEmbeddingIndex] Initializing with unified API client manager
[分片qwen2.5-72b-instruct_easy_struct_defects_key0] [OperationEmbeddingIndex] Initializing with unified API client manager
[分片qwen2.5-72b-instruct_easy_struct_defects_key0] [OperationEmbeddingIndex] Initializing with unified API client manager
2025-08-27 23:46:16,404 - INFO - [DEBUG] 分片 qwen2.5-72b-instruct_easy_struct_defects_key0: 100 行输出，运行 10.5秒
[分片qwen2.5-72b-instruct_easy_struct_defects_key0] [MCPEmbeddingManager] Creating new singleton instance[MCPEmbeddingManager] Initializing with unified API client manager
[分片qwen2.5-72b-instruct_easy_struct_defects_key0] [WARNING] Embedding manager exists but has no embeddings
[分片qwen2.5-72b-instruct_easy_struct_defects_key0] [WARNING] Embedding manager exists but has no embeddings
[分片qwen2.5-72b-instruct_easy_struct_defects_key0] [WARNING] Embedding manager exists but has no embeddings
2025-08-27 23:47:00,851 - INFO - [DEBUG] 分片 qwen2.5-72b-instruct_easy_struct_defects_key0: 200 行输出，运行 54.9秒
2025-08-27 23:47:00,887 - INFO - [DEBUG] 分片 qwen2.5-72b-instruct_easy_struct_defects_key0: 300 行输出，运行 55.0秒
2025-08-27 23:47:32,289 - INFO - [DEBUG] 分片 qwen2.5-72b-instruct_easy_struct_defects_key0: 400 行输出，运行 86.3秒
[分片qwen2.5-72b-instruct_easy_struct_defects_key0] 2025-08-27 23:47:32,451 - result_merger - WARNING - 另一个合并器已在运行 (PID: -1)
[分片qwen2.5-72b-instruct_easy_struct_defects_key0] DEBUG: Checking generator attributes2025-08-27 23:47:32,462 - result_merger - WARNING - 另一个合并器已在运行 (PID: -1)
[分片qwen2.5-72b-instruct_easy_struct_defects_key0] [INFO] Initializing LLM client using APIClientManager
[分片qwen2.5-72b-instruct_easy_struct_defects_key0] [INFO] Initializing LLM client using APIClientManager
[分片qwen2.5-72b-instruct_easy_struct_defects_key0] 2025-08-27 23:47:32,522 - result_merger - WARNING - 另一个合并器已在运行 (PID: -1)
[分片qwen2.5-72b-instruct_easy_struct_defects_key0] [INFO] Initializing LLM client using APIClientManager
2025-08-27 23:47:32,841 - INFO - [DEBUG] 分片 qwen2.5-72b-instruct_easy_struct_defects_key0: 500 行输出，运行 86.9秒
