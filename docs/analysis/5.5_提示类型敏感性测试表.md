# 5.5 提示类型敏感性测试表 (对应计划4.4.1)

## 测试配置
- **Prompt类型**: `baseline`, `cot`（optimal已在5.1测试）
- **难度**: `easy`
- **工具成功率**: `0.8`（默认）
- **任务类型**: 全部5种 (simple_task, basic_task, data_pipeline, api_integration, multi_stage_pipeline)
- **每种任务类型**: 20个实例
- **每个prompt类型总测试数**: 100个测试/模型
- **总测试数**: 200个测试/模型（2个prompt类型 × 100个测试）

## 4.4.1 不同提示类型性能表

### 开源模型部分

| 模型名称 | Baseline提示 | CoT提示 | 最优工作流提示 | 缺陷工作流提示 | 提示敏感性指数 | 最佳提示类型 |
|---------|-------------|--------|-------------|-------------|-------------|-------------|
| **DeepSeek-V3-0324** | 待测 | 待测 | 68.0% ✅ | 待测* | 待算 | optimal（暂定） |
| **DeepSeek-R1-0528** | 待测 | 待测 | 44.0% ✅ | 待测* | 待算 | 待定 |
| **qwen2.5-72b-instruct** | 待测 | 待测 | 0.0% ⚠️ | 待测* | 待算 | N/A |
| **qwen2.5-32b-instruct** | 待测 | 待测 | 3.0% ⚠️ | 待测* | 待算 | 待定 |
| **qwen2.5-14b-instruct** | 待测 | 待测 | 26.4% ⚠️ | 待测* | 待算 | 待定 |
| **qwen2.5-7b-instruct** | 待测 | 待测 | 7.4% ⚠️ | 待测* | 待算 | 待定 |
| **qwen2.5-3b-instruct** | 待测 | 待测 | 11.8% ⚠️ | 待测* | 待算 | 待定 |
| **Llama-3.3-70B-Instruct** | 待测 | 待测 | 85.0% ✅ | 待测* | 待算 | optimal（暂定） |

*注1：最优工作流提示数据来自5.1基准测试*  
*注2：缺陷工作流提示将使用5.3测试的7种缺陷平均值*

### 详细提示类型分解

#### Baseline提示性能

| 模型名称 | 简单任务 | 基础任务 | 数据管道 | API集成 | 多阶段管道 | 平均成功率 | 加权得分 |
|---------|---------|---------|---------|---------|-----------|-----------|---------|
| **DeepSeek-V3-0324** | 待测 | 待测 | 待测 | 待测 | 待测 | 待测 | 待测 |
| **DeepSeek-R1-0528** | 待测 | 待测 | 待测 | 待测 | 待测 | 待测 | 待测 |
| **Llama-3.3-70B-Instruct** | 待测 | 待测 | 待测 | 待测 | 待测 | 待测 | 待测 |

#### Chain-of-Thought (CoT)提示性能

| 模型名称 | 简单任务 | 基础任务 | 数据管道 | API集成 | 多阶段管道 | 平均成功率 | 加权得分 |
|---------|---------|---------|---------|---------|-----------|-----------|---------|
| **DeepSeek-V3-0324** | 待测 | 待测 | 待测 | 待测 | 待测 | 待测 | 待测 |
| **DeepSeek-R1-0528** | 待测 | 待测 | 待测 | 待测 | 待测 | 待测 | 待测 |
| **Llama-3.3-70B-Instruct** | 待测 | 待测 | 待测 | 待测 | 待测 | 待测 | 待测 |

### 提示效果对比分析

| 模型名称 | Baseline→Optimal提升 | CoT→Optimal差异 | Baseline→CoT提升 | 变异系数 |
|---------|---------------------|-----------------|------------------|----------|
| **DeepSeek-V3-0324** | 待算 | 待算 | 待算 | 待算 |
| **DeepSeek-R1-0528** | 待算 | 待算 | 待算 | 待算 |
| **qwen2.5-72b-instruct** | 待算 | 待算 | 待算 | 待算 |
| **qwen2.5-32b-instruct** | 待算 | 待算 | 待算 | 待算 |
| **qwen2.5-14b-instruct** | 待算 | 待算 | 待算 | 待算 |
| **qwen2.5-7b-instruct** | 待算 | 待算 | 待算 | 待算 |
| **qwen2.5-3b-instruct** | 待算 | 待算 | 待算 | 待算 |
| **Llama-3.3-70B-Instruct** | 待算 | 待算 | 待算 | 待算 |

### 执行特征对比

| 模型名称 | Baseline平均步数 | CoT平均步数 | Optimal平均步数 | Baseline工具覆盖率 | CoT工具覆盖率 | Optimal工具覆盖率 |
|---------|----------------|------------|---------------|------------------|--------------|----------------|
| **DeepSeek-V3-0324** | 待测 | 待测 | 6.5 | 待测 | 待测 | 64.1% |
| **DeepSeek-R1-0528** | 待测 | 待测 | 4.2 | 待测 | 待测 | 37.4% |
| **Llama-3.3-70B-Instruct** | 待测 | 待测 | 8.8 | 待测 | 待测 | 41.9% |

## 关键指标说明

### 提示敏感性指数
衡量模型对不同提示策略的敏感程度：
```python
sensitivity_index = std([baseline_score, cot_score, optimal_score]) / mean([baseline_score, cot_score, optimal_score])
```

- **低敏感性** (<0.15): 提示影响小，模型能力稳定
- **中敏感性** (0.15-0.30): 适度依赖提示质量
- **高敏感性** (>0.30): 严重依赖提示策略

### 最佳提示类型判定
基于以下因素综合判定：
1. **成功率**: 最高成功率的提示类型
2. **效率**: 考虑执行步数和时间
3. **稳定性**: 跨任务类型的表现一致性
4. **成本**: CoT通常token消耗更多

### 变异系数
```python
cv = std([baseline, cot, optimal]) / mean([baseline, cot, optimal])
```
衡量提示类型间的性能变异程度

## 测试命令

```bash
# 运行提示类型敏感性测试
./run_systematic_test_final.sh

# 选择测试类型
5.5 提示类型敏感性测试

# 测试配置
- Prompt类型: baseline, cot
- 难度: easy
- 工具成功率: 0.8
```

## 预期发现

### 1. 提示类型效果排序（预期）
1. **Optimal**: 最佳性能（提供完整工作流）
2. **CoT**: 中等性能（引导推理过程）
3. **Baseline**: 基础性能（仅任务描述）
4. **Flawed**: 最差性能（需要纠错）

### 2. 模型特征与提示敏感性
- **大模型**: 对提示不太敏感，baseline也能表现良好
- **小模型**: 高度依赖提示质量，optimal显著优于baseline
- **推理型模型**: CoT效果可能接近或超过optimal

### 3. 任务复杂度影响
- **简单任务**: 提示类型影响较小
- **复杂任务**: optimal和CoT优势明显
- **多阶段任务**: 需要结构化提示支持

## 优化建议

基于测试结果可以：

### 1. 提示策略选择
- **高性能需求**: 使用optimal提示
- **平衡性能与成本**: 使用CoT
- **快速原型**: 使用baseline
- **鲁棒性测试**: 使用flawed

### 2. 模型特定优化
- 为每个模型定制最佳提示模板
- 识别对提示不敏感的鲁棒模型
- 为敏感模型提供更详细的指导

### 3. 任务适配
- 简单任务可用baseline节省成本
- 复杂任务必须用optimal或CoT
- 调试阶段用flawed测试纠错能力

## 补充说明

### 关于Qwen系列异常
当前Qwen系列在optimal提示下表现异常（0-26%成功率），可能原因：
1. API配置问题
2. 模型服务不稳定
3. 提示格式不兼容

建议先解决这些问题后再进行完整的提示敏感性测试。

---

**数据来源**: 
- Optimal数据：5.1基准测试结果
- Flawed数据：将来自5.3测试平均值
- Baseline/CoT：待运行测试

**创建时间**: 2025年8月16日  
**测试状态**: ⏳ 部分完成（optimal数据已有）