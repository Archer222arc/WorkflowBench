# 5.4 工具可靠性敏感性测试表 (对应计划4.3.2)

## 测试配置
- **Prompt类型**: `optimal`
- **难度**: `easy`
- **工具成功率设置**: 90%, 70%, 60%（默认80%已在5.1测试）
- **任务类型**: 全部5种 (simple_task, basic_task, data_pipeline, api_integration, multi_stage_pipeline)
- **每种任务类型**: 20个实例
- **每个工具成功率总测试数**: 100个测试/模型
- **总测试数**: 300个测试/模型（3个工具成功率 × 100个测试）

## 4.3.2 工具可靠性敏感性表

### 开源模型部分

| 模型名称 | 工具成功率90% | 工具成功率80% | 工具成功率70% | 工具成功率60% | 敏感性系数 | 鲁棒性得分 |
|---------|-------------|-------------|-------------|-------------|-----------|-----------|
| **DeepSeek-V3-0324** | - | 68.0% ✅ | - | - | - | - |
| **DeepSeek-R1-0528** | - | 44.0% ✅ | - | - | - | - |
| **qwen2.5-72b-instruct** | - | 0.0% ⚠️ | - | - | - | - |
| **qwen2.5-32b-instruct** | - | 3.0% ⚠️ | - | - | - | - |
| **qwen2.5-14b-instruct** | - | 26.4% ⚠️ | - | - | - | - |
| **qwen2.5-7b-instruct** | - | 7.4% ⚠️ | - | - | - | - |
| **qwen2.5-3b-instruct** | - | 11.8% ⚠️ | - | - | - | - |
| **Llama-3.3-70B-Instruct** | - | 85.0% ✅ | - | - | - | - |

*注：80%工具成功率数据来自5.1基准测试*

### 详细任务类型分解

#### 工具成功率 90%

| 模型名称 | 简单任务 | 基础任务 | 数据管道 | API集成 | 多阶段管道 | 平均成功率 |
|---------|---------|---------|---------|---------|-----------|-----------|
| **DeepSeek-V3-0324** | - | - | - | - | - | - |
| **DeepSeek-R1-0528** | - | - | - | - | - | - |
| **Llama-3.3-70B-Instruct** | - | - | - | - | - | - |

#### 工具成功率 70%

| 模型名称 | 简单任务 | 基础任务 | 数据管道 | API集成 | 多阶段管道 | 平均成功率 |
|---------|---------|---------|---------|---------|-----------|-----------|
| **DeepSeek-V3-0324** | - | - | - | - | - | - |
| **DeepSeek-R1-0528** | - | - | - | - | - | - |
| **Llama-3.3-70B-Instruct** | - | - | - | - | - | - |

#### 工具成功率 60%

| 模型名称 | 简单任务 | 基础任务 | 数据管道 | API集成 | 多阶段管道 | 平均成功率 |
|---------|---------|---------|---------|---------|-----------|-----------|
| **DeepSeek-V3-0324** | - | - | - | - | - | - |
| **DeepSeek-R1-0528** | - | - | - | - | - | - |
| **Llama-3.3-70B-Instruct** | - | - | - | - | - | - |

### 性能退化分析

| 模型名称 | 90%→80%退化率 | 80%→70%退化率 | 70%→60%退化率 | 平均退化率 | 稳定性评级 |
|---------|-------------|-------------|-------------|-----------|-----------|
| **DeepSeek-V3-0324** | - | - | - | - | - |
| **DeepSeek-R1-0528** | - | - | - | - | - |
| **qwen2.5-72b-instruct** | N/A | - | - | - | ⚠️ 异常 |
| **qwen2.5-32b-instruct** | N/A | - | - | - | ⚠️ 异常 |
| **qwen2.5-14b-instruct** | - | - | - | - | - |
| **qwen2.5-7b-instruct** | - | - | - | - | - |
| **qwen2.5-3b-instruct** | - | - | - | - | - |
| **Llama-3.3-70B-Instruct** | - | - | - | - | - |

## 关键指标说明

### 敏感性系数
衡量模型对工具可靠性变化的敏感程度：
```python
sensitivity = std([perf_90, perf_80, perf_70, perf_60]) / mean([perf_90, perf_80, perf_70, perf_60])
```
- **低敏感性** (<0.2): 模型表现稳定，不受工具可靠性影响
- **中敏感性** (0.2-0.4): 适度受影响
- **高敏感性** (>0.4): 严重依赖工具可靠性

### 鲁棒性得分
综合考虑性能和稳定性：
```python
robustness_score = (mean_performance * 0.6) + ((1 - sensitivity) * 0.4)
```

### 稳定性评级
- **A级**: 退化率<10%/级别
- **B级**: 退化率10-20%/级别
- **C级**: 退化率20-30%/级别
- **D级**: 退化率>30%/级别
- **异常**: 基准性能已经极低

## 测试命令

```bash
# 运行工具可靠性敏感性测试
./run_systematic_test_final.sh

# 选择测试类型
5.4 工具可靠性敏感性测试

# 测试配置
- 工具成功率: 90%, 70%, 60%
- Prompt: optimal
- 难度: easy
```

## 预期发现

### 1. 性能退化模式
- **线性退化**: 性能随工具可靠性线性下降
- **阈值效应**: 某个临界点后急剧下降
- **鲁棒模式**: 保持相对稳定直到极低可靠性

### 2. 任务类型敏感性
预期敏感性排序：
1. **多阶段管道**: 最敏感（依赖链长）
2. **API集成**: 高敏感（需要精确调用）
3. **数据管道**: 中等敏感
4. **基础任务**: 较低敏感
5. **简单任务**: 最不敏感

### 3. 模型特征与鲁棒性
- **大模型优势**: 更好的错误恢复能力
- **推理能力**: 能否绕过失败的工具
- **重试策略**: 是否自动重试失败操作

## 当前发现（基于80%工具成功率数据）

### 模型表现分层
在80%工具成功率下：
- **高鲁棒性**: Llama-3.3-70B (85.0%), DeepSeek-V3 (68.0%)
- **中等鲁棒性**: DeepSeek-R1 (44.0%), qwen2.5-14b (26.4%)
- **低鲁棒性**: qwen2.5系列其他模型 (0-11.8%)

### 待验证假设
需要90%、70%、60%数据来验证：
1. **线性退化假设**: 性能是否随工具可靠性线性下降
2. **阈值效应**: 是否存在性能急剧下降的临界点
3. **模型差异**: 不同模型的敏感性差异程度

## 优化建议

基于测试结果，可以：
1. **识别脆弱模型**: 需要额外的错误处理
2. **调整重试策略**: 针对不同可靠性级别
3. **优化提示词**: 增强错误恢复指令
4. **选择部署策略**: 高可靠性环境 vs 低可靠性环境

---

## 注意事项

### 数据说明
- 80%工具成功率数据来自5.1基准测试（optimal/easy配置）
- 数据库中存在60%、70%、90%工具成功率的配置，但easy难度下的测试数为0
- 可能的原因：
  1. 测试尚未完成
  2. 测试数据保存在其他位置
  3. 测试使用了不同的难度配置
- 敏感度指数和鲁棒性得分需要完整的4个工具成功率数据才能计算

---

**数据来源**: 
- 80%数据：pilot_bench_cumulative_results/master_database.json（5.1基准测试结果）
- 其他：数据库中有配置但无实际测试数据

**创建时间**: 2025年8月16日  
**更新时间**: 2025年8月16日  
**测试状态**: ⏳ 仅80%工具成功率数据可用  
**数据完整性**: 25% (仅有1/4的工具成功率配置有效数据)