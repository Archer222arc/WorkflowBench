# PILOT-Bench 批量测试使用说明

## 重要提示
`unified_test_runner.py` 已被删除并整合到 `batch_test_runner.py` 中。

## 快速替换指南

### 旧命令 → 新命令对照

```bash
# 旧命令（已废弃）
python unified_test_runner.py micro --model qwen2.5-3b-instruct

# 新命令（请使用这个）
python batch_test_runner.py --model qwen2.5-3b-instruct --count 5
```

### 更多替换示例

```bash
# 微量测试
旧: python unified_test_runner.py micro --model gpt-4o-mini
新: python batch_test_runner.py --model gpt-4o-mini --count 5

# 智能测试
旧: python unified_test_runner.py smart --model gpt-4o-mini --count 20
新: python batch_test_runner.py --model gpt-4o-mini --count 20 --smart

# 查看进度
旧: python unified_test_runner.py progress --model gpt-4o-mini
新: python batch_test_runner.py --model gpt-4o-mini --progress

# 详细进度
旧: python unified_test_runner.py progress --model gpt-4o-mini --detailed
新: python batch_test_runner.py --model gpt-4o-mini --progress --detailed
```

## 常用命令速查

### 1. 基础测试
```bash
# 运行10个测试（默认）
python batch_test_runner.py --model qwen2.5-3b-instruct

# 运行5个测试
python batch_test_runner.py --model qwen2.5-3b-instruct --count 5

# 运行100个测试
python batch_test_runner.py --model qwen2.5-3b-instruct --count 100
```

### 2. 高级功能
```bash
# 智能选择最需要的测试
python batch_test_runner.py --model qwen2.5-3b-instruct --count 50 --smart

# 包含缺陷测试
python batch_test_runner.py --model qwen2.5-3b-instruct --count 20 --flawed

# 智能选择 + 缺陷测试
python batch_test_runner.py --model qwen2.5-3b-instruct --count 100 --smart --flawed
```

### 3. 查看进度
```bash
# 简单进度
python batch_test_runner.py --model qwen2.5-3b-instruct --progress

# 详细进度（包含各类型统计）
python batch_test_runner.py --model qwen2.5-3b-instruct --progress --detailed
```

### 4. 模拟测试
```bash
# 运行50个模拟测试（不实际执行，用于验证流程）
python batch_test_runner.py --model qwen2.5-3b-instruct --simulate 50
```

### 5. Debug模式
```bash
# 启用debug模式，详细日志会保存到 batch_test_debug.log
python batch_test_runner.py --model qwen2.5-3b-instruct --count 5 --debug

# Debug模式下运行智能测试
python batch_test_runner.py --model qwen2.5-3b-instruct --count 10 --smart --debug

# 查看debug日志
cat batch_test_debug.log
```

## 批量测试脚本示例

```bash
#!/bin/bash
# 测试多个模型的脚本

MODELS=("gpt-4o-mini" "qwen2.5-3b-instruct" "qwen2.5-7b-instruct")

for model in "${MODELS[@]}"; do
    echo "================================"
    echo "测试模型: $model"
    echo "================================"
    
    # 智能批量测试
    python batch_test_runner.py --model "$model" --count 100 --smart --flawed
    
    # 显示进度
    python batch_test_runner.py --model "$model" --progress --detailed
    
    echo ""
done

# 生成综合报告
python comprehensive_report_generator.py
```

## 注意事项

1. **所有测试功能都已整合到 `batch_test_runner.py`**
2. **累积结果自动保存**，无需手动管理
3. **使用 `--smart` 参数**避免重复测试
4. **先用 `--simulate` 验证**再运行实际测试
5. **遇到错误时使用 `--debug`**，日志文件会记录完整的执行过程

## Debug日志说明

当使用 `--debug` 参数时，会在当前目录生成 `batch_test_debug.log` 文件，包含：

- 系统初始化过程
- 任务选择详情
- 工作流生成过程
- 执行步骤和结果
- 错误信息和完整堆栈跟踪
- API调用日志

**注意**：每次运行会覆盖之前的日志文件。如需保留，请在运行后手动备份。

---

更新时间：2025-08-05