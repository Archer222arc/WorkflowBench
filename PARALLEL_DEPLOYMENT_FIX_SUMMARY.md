# å¹¶è¡Œéƒ¨ç½²ä¿®å¤å®ŒæˆæŠ¥å‘Š

> æ‰§è¡Œæ—¶é—´ï¼š2025-08-18 15:00
> çŠ¶æ€ï¼šâœ… æˆåŠŸå®Œæˆ

## ğŸ“‹ é—®é¢˜æ¦‚è¿°

ç”¨æˆ·æŠ¥å‘Šäº†ä¸¤ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š
1. **é—®é¢˜1**ï¼šéœ€è¦èƒ½å¤Ÿè°ƒç”¨ä¸åŒçš„å¹¶è¡Œéƒ¨ç½²å®ä¾‹ï¼ˆå¦‚ DeepSeek-V3-0324-2, DeepSeek-V3-0324-3ï¼‰
2. **é—®é¢˜2**ï¼šè™½ç„¶æµ‹è¯•ä½¿ç”¨ä¸åŒéƒ¨ç½²ï¼Œä½†ç»Ÿè®¡æ—¶éœ€è¦åˆå¹¶åˆ°åŒä¸€ä¸ªåŸºç¡€æ¨¡å‹

## âœ… å·²å®Œæˆçš„ä¿®å¤

### 1. ultra_parallel_runner.py
- **ä¿®å¤è¡Œ253**ï¼šå°† `model=instance.name` æ”¹ä¸º `model=base_model.lower()`
  - ç¡®ä¿ç»Ÿè®¡ä½¿ç”¨å°å†™åŸºç¡€æ¨¡å‹å
- **æ·»åŠ deploymentå‚æ•°ä¼ é€’**ï¼ˆè¡Œ369ï¼‰ï¼š
  ```python
  "--deployment", shard.instance_name,  # ä¿æŒåŸå§‹å¤§å°å†™çš„éƒ¨ç½²åï¼ˆç”¨äºAPIè°ƒç”¨ï¼‰
  ```
- **ä¿æŒå®ä¾‹åå¤§å°å†™**ï¼ˆè¡Œ69-85ï¼‰ï¼šç»Ÿä¸€ä¸ºAzure APIè¦æ±‚çš„æ ¼å¼

### 2. smart_batch_runner.py
- **æ·»åŠ --deploymentå‚æ•°**ï¼ˆè¡Œ587ï¼‰
- **ä¿®æ”¹TestTaskåˆ›å»º**ï¼ˆè¡Œ258-259, 697-698ï¼‰ï¼š
  ```python
  model=model.lower() if model else model,  # è½¬å°å†™ç”¨äºç»Ÿè®¡
  deployment=deployment,  # APIè°ƒç”¨ç”¨çš„éƒ¨ç½²å
  ```

### 3. batch_test_runner.py
- **æ·»åŠ deploymentå­—æ®µåˆ°TestTask**ï¼ˆè¡Œ62ï¼‰
- **ä¿®æ”¹run_single_testæ¥å—deploymentå‚æ•°**ï¼ˆè¡Œ422ï¼‰
- **ä½¿ç”¨deploymentè¿›è¡ŒAPIè°ƒç”¨**ï¼ˆè¡Œ504-511ï¼‰ï¼š
  ```python
  api_model = deployment if deployment else model
  executor = InteractiveExecutor(model=api_model)  # ä½¿ç”¨deploymentåç§°
  ```

### 4. smart_model_router.py
- **æ·»åŠ å¹¶è¡Œéƒ¨ç½²å®ä¾‹æ”¯æŒ**ï¼ˆè¡Œ26-31ï¼‰ï¼š
  ```python
  # å¹¶è¡Œéƒ¨ç½²å®ä¾‹ï¼ˆä¿æŒåŸæ ·ä¼ é€’ï¼Œä¸åšè½¬æ¢ï¼‰
  "DeepSeek-V3-0324-2",      # DeepSeek V3 å¹¶è¡Œéƒ¨ç½²2
  "DeepSeek-V3-0324-3",      # DeepSeek V3 å¹¶è¡Œéƒ¨ç½²3
  "DeepSeek-R1-0528-2",      # DeepSeek R1 å¹¶è¡Œéƒ¨ç½²2
  "Llama-3.3-70B-Instruct-2", # Llama å¹¶è¡Œéƒ¨ç½²2
  ```

## ğŸ¯ ä¿®å¤æ•ˆæœ

### æµ‹è¯•éªŒè¯ç»“æœ
è¿è¡Œ `test_parallel_deployment.py` éªŒè¯ï¼š

| æµ‹è¯•é¡¹ | çŠ¶æ€ | è¯´æ˜ |
|--------|------|------|
| æ¨¡å‹è·¯ç”± | âœ… | å¹¶è¡Œå®ä¾‹æ­£ç¡®è·¯ç”±åˆ°user_azure |
| ä»»åŠ¡åˆ†ç‰‡ | âœ… | æ­£ç¡®ä½¿ç”¨å°å†™åŸºç¡€æ¨¡å‹åå’ŒåŸå§‹å®ä¾‹å |
| APIè°ƒç”¨æµç¨‹ | âœ… | deploymentå‚æ•°æ­£ç¡®ä¼ é€’ |
| æ•°æ®åº“èšåˆ | âœ… | æ— -2,-3åç¼€ï¼Œæ•°æ®æ­£ç¡®èšåˆ |

### å…³é”®æˆæœ
1. **APIè°ƒç”¨**ï¼šDeepSeek-V3-0324-2 èƒ½å¤ŸæˆåŠŸè°ƒç”¨ï¼ˆä¿æŒå¤§å°å†™ï¼‰
2. **æ•°æ®èšåˆ**ï¼šæ‰€æœ‰å¹¶è¡Œéƒ¨ç½²çš„æ•°æ®èšåˆåˆ°åŸºç¡€æ¨¡å‹ï¼ˆDeepSeek-V3-0324ï¼‰
3. **æ— æ•°æ®åˆ†æ•£**ï¼šæ•°æ®åº“ä¸­æ²¡æœ‰å¸¦-2,-3åç¼€çš„ç‹¬ç«‹æ¡ç›®

## ğŸ“Š æ•°æ®æµç¤ºä¾‹

```
è¾“å…¥: DeepSeek-V3-0324 (100ä¸ªå®ä¾‹)
    â†“
ultra_parallel_runner:
    åˆ†ç‰‡1: DeepSeek-V3-0324 (33ä¸ª)
    åˆ†ç‰‡2: DeepSeek-V3-0324-2 (33ä¸ª)  
    åˆ†ç‰‡3: DeepSeek-V3-0324-3 (34ä¸ª)
    â†“
smart_batch_runner:
    --model deepseek-v3-0324 (ç»Ÿè®¡)
    --deployment DeepSeek-V3-0324-2 (API)
    â†“
batch_test_runner:
    APIè°ƒç”¨: DeepSeek-V3-0324-2
    æ•°æ®å­˜å‚¨: deepseek-v3-0324
    â†“
æ•°æ®åº“:
    DeepSeek-V3-0324: 100ä¸ªæµ‹è¯•ï¼ˆèšåˆï¼‰
```

## ğŸ“ æ–‡æ¡£æ›´æ–°

### å·²æ›´æ–°æ–‡æ¡£
1. **debug_to_do.txt** - å®Œæ•´çš„é—®é¢˜åˆ†æå’Œè§£å†³æ–¹æ¡ˆ
2. **CLAUDE.md** - æ·»åŠ è°ƒè¯•äº¤äº’æœ€ä½³å®è·µç« èŠ‚
3. **MODEL_NAMING_CONVENTION.md** - è¯¦ç»†çš„å‘½åè§„èŒƒæ–‡æ¡£

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¹¶è¡Œéƒ¨ç½²ä»…é€‚ç”¨äº**ï¼š
   - DeepSeek-V3-0324 (æœ‰-2, -3)
   - DeepSeek-R1-0528 (æœ‰-2, -3)
   - Llama-3.3-70B-Instruct (æœ‰-2, -3)

2. **å…¶ä»–æ¨¡å‹ä¸å—å½±å“**ï¼š
   - Qwenç³»åˆ—ã€GPTç³»åˆ—ç­‰æ²¡æœ‰å¹¶è¡Œéƒ¨ç½²
   - ä¿æŒåŸæœ‰é€»è¾‘

3. **å¤§å°å†™è§„åˆ™**ï¼š
   - APIè°ƒç”¨ï¼šä¿æŒAzureè¦æ±‚çš„å¤§å°å†™ï¼ˆDeepSeek-V3-0324-2ï¼‰
   - æ•°æ®ç»Ÿè®¡ï¼šä½¿ç”¨æ ‡å‡†åŒ–æ ¼å¼ï¼ˆDeepSeek-V3-0324ï¼‰

## ğŸš€ ä¸‹ä¸€æ­¥å»ºè®®

1. **è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•**éªŒè¯å®Œæ•´æµç¨‹ï¼š
   ```bash
   ./run_systematic_test_final.sh \
       --model DeepSeek-V3-0324 \
       --num-instances 10 \
       --ultra-parallel
   ```

2. **ç›‘æ§æ•°æ®èšåˆ**ç¡®ä¿æ­£ç¡®æ€§

3. **æ€§èƒ½ä¼˜åŒ–**åˆ©ç”¨å¹¶è¡Œéƒ¨ç½²æå‡ååé‡

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-08-18 15:00
**çŠ¶æ€**: âœ… ä¿®å¤æˆåŠŸå®Œæˆ